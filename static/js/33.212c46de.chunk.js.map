{"version":3,"sources":["mobile/pages/Broker/Broker.js","components/Button/Button.js","utils/DeriNumberFormat.js","../node_modules/date-format/lib/index.js","assets/img/play-button.png","hooks/useClaimInfo.js","components/Broker/Broker.js"],"names":["Borker_des","lang","Button","btnText","className","disabled","click","afterClick","checkApprove","wallet","spec","status","setStatus","useState","isApproved","setIsApproved","pending","setPending","buttonText","setbuttonText","loadRef","useRef","beforeAction","current","style","display","afterAction","useEffect","async","detail","account","res","pool","bTokenId","loadApproveStatus","onClick","approve","success","alert","ref","marginRight","inject","observer","props","renderablity","setRenderablity","isValidate","allowZero","value","undefined","isNaN","Math","abs","defaultValue","others","displayType","fixedDecimalScale","timeout","window","setTimeout","isConnected","clearTimeout","padWithZeros","vNumber","width","numAsString","toString","length","addZero","asString","format","date","module","exports","ISO8601_FORMAT","now","vDay","getDate","vMonth","getMonth","vYearLong","getFullYear","vYearShort","substring","vYear","indexOf","vHour","getHours","vMinute","getMinutes","vSecond","getSeconds","vMillisecond","getMilliseconds","vTimeZone","timezoneOffset","os","h","String","floor","m","offset","getTimezoneOffset","replace","setDatePart","part","local","parse","pattern","str","missingValuesDate","Error","matchers","regexp","fn","setUTCMinutes","getUTCMinutes","parsedPattern","reduce","p","test","index","match","dateFns","filter","sort","a","b","matches","RegExp","exec","forEach","f","i","extractDateParts","Date","ISO8601_WITH_TZ_OFFSET_FORMAT","DATETIME_FORMAT","ABSOLUTETIME_FORMAT","useClaimInfo","claimInfo","setClaimInfo","interval","loadClaimInfo","getUserInfoAll","claimed","total","toFixed","unclaimed","valid","amount","harvestDeriLp","lp","harvestDeriTrade","trade","chainId","setInterval","clearInterval","config","DeriEnv","get","loading","claimInfoInterval","useConfig","firstDeri","setFirstDeri","secondDeri","setSecondDeri","thirdDeri","setThirdDeri","yourDeri","setYourDeri","yourRank","setYourRank","sumPage","setSumPage","currentPage","setCurrentPage","totList","setTotList","setClaimed","list","setList","remainingTime","setRemainingTime","isLoading","setIsLoading","loaded","sum_page","ceil","data","slice","path","fetchRestApi","map","item","obj","address","trader_address","trader_volume","deri_reward","trader_invite_timestamp","rewardList","rank","topList","hasOwnProperty","totalReward","intervalEpoch","brokerEpoch","period","parseInt","dis","s","thousandSeparator","decimalScale","target","href","tip","eqInNumber","mintDToken","text","mintDeri","dateFormat","page","xmlns","height","viewBox","id","data-name","d","transform","fill"],"mappings":"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","file":"static/js/33.212c46de.chunk.js","sourcesContent":["import Borker from '../../../components/Broker/Broker'\nimport \"./Broker.less\"\nexport default function Borker_des({lang}){\n  return (\n    <Borker lang={lang}/>\n  )\n}","import {useState,useRef,useEffect} from 'react';\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\n  const [isApproved, setIsApproved] = useState(true);\n  const [pending, setPending] = useState(false);\n  const [buttonText, setbuttonText] = useState(btnText)\n  const loadRef = useRef(null)\n\n  const onClick = async () => {\n    if(status !== 'enabled') {\n      return ;\n    }\n    beforeAction()\n    const result = await click();    \n    if(result){\n      afterClick && afterClick()\n    } \n    afterAction()\n  }\n\n  const beforeAction = ()  => {\n    setStatus('disabled')\n    setPending(true);\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\n  }\n\n  const afterAction = () => {\n    loadRef.current && (loadRef.current.style.display = 'none')\n    setStatus('enabled')\n    setPending(false);\n  }\n\n  const loadApproveStatus = async () => {\n    if(checkApprove && wallet && wallet.detail.account){\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\n      setIsApproved(res);\n    }\n  }\n  const approve = async () => {\n    beforeAction();\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\n    if(res.success){\n      setIsApproved(true);\n    } else {\n      setIsApproved(false)\n      alert(lang['approve-failed'])\n    }\n    afterAction();\n  }\n\n  const action = () => {\n    if(isApproved){\n      onClick();\n    } else {\n      approve();\n    }\n  }\n\n  useEffect(() => {\n    loadApproveStatus();\n    return () => {};\n  }, [wallet,spec,checkApprove]);\n\n  useEffect(() => {\n    if(btnText){\n      setbuttonText(btnText)\n    }\n    return () => {\n    }\n  }, [btnText])\n\n  return(\n    <button className={className} onClick={action} >\n        <span className='btn-loading-wrap'>\n          <span ref={loadRef}\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : 'none' ,marginRight : '2'}}>\n          </span>\n        </span>\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\n        </button>\n  )\n}","import React,{useState,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport { inject, observer } from 'mobx-react';\n\nfunction DeriNumberFormat(props){\n  const [renderablity, setRenderablity] = useState(<span className='loading-line'></span>);\n\n  const isValidate = () => {\n    const {allowZero} = props \n    return (typeof props.value !== 'object' && props.value !== undefined && props.value !== '' && props.value !== 'NaN') \n          || ((isNaN(props.value) && Math.abs(props.value)) === 0 && allowZero === true )\n  }\n\n  useEffect(() => {\n    const {allowZero,wallet,defaultValue = '--',...others} = props \n    if(isValidate()) {\n      setRenderablity(<NumberFormat {...others}  displayType = 'text'  fixedDecimalScale={true} />)\n    } else {\n      setRenderablity(<span className='loading-line'></span>)\n    } \n    const timeout = window.setTimeout(() => {\n      if(!isValidate() && wallet && !wallet.isConnected()){\n        setRenderablity(defaultValue)\n      }\n    },30000)\n    return () => {\n      clearTimeout(timeout)\n    };\n  }, [props.value]);\n\n  return renderablity;\n}\n\nexport default inject('wallet','trading')(observer(DeriNumberFormat))","\"use strict\";\n\nfunction padWithZeros(vNumber, width) {\n  var numAsString = vNumber.toString();\n  while (numAsString.length < width) {\n    numAsString = \"0\" + numAsString;\n  }\n  return numAsString;\n}\n\nfunction addZero(vNumber) {\n  return padWithZeros(vNumber, 2);\n}\n\n/**\n * Formats the TimeOffset\n * Thanks to http://www.svendtofte.com/code/date_format/\n * @private\n */\nfunction offset(timezoneOffset) {\n  var os = Math.abs(timezoneOffset);\n  var h = String(Math.floor(os / 60));\n  var m = String(os % 60);\n  if (h.length === 1) {\n    h = \"0\" + h;\n  }\n  if (m.length === 1) {\n    m = \"0\" + m;\n  }\n  return timezoneOffset < 0 ? \"+\" + h + m : \"-\" + h + m;\n}\n\nfunction asString(format, date) {\n  if (typeof format !== \"string\") {\n    date = format;\n    format = module.exports.ISO8601_FORMAT;\n  }\n  if (!date) {\n    date = module.exports.now();\n  }\n\n  // Issue # 14 - Per ISO8601 standard, the time string should be local time\n  // with timezone info.\n  // See https://en.wikipedia.org/wiki/ISO_8601 section \"Time offsets from UTC\"\n\n  var vDay = addZero(date.getDate());\n  var vMonth = addZero(date.getMonth() + 1);\n  var vYearLong = addZero(date.getFullYear());\n  var vYearShort = addZero(vYearLong.substring(2, 4));\n  var vYear = format.indexOf(\"yyyy\") > -1 ? vYearLong : vYearShort;\n  var vHour = addZero(date.getHours());\n  var vMinute = addZero(date.getMinutes());\n  var vSecond = addZero(date.getSeconds());\n  var vMillisecond = padWithZeros(date.getMilliseconds(), 3);\n  var vTimeZone = offset(date.getTimezoneOffset());\n  var formatted = format\n    .replace(/dd/g, vDay)\n    .replace(/MM/g, vMonth)\n    .replace(/y{1,4}/g, vYear)\n    .replace(/hh/g, vHour)\n    .replace(/mm/g, vMinute)\n    .replace(/ss/g, vSecond)\n    .replace(/SSS/g, vMillisecond)\n    .replace(/O/g, vTimeZone);\n  return formatted;\n}\n\nfunction setDatePart(date, part, value, local) {\n  date['set' + (local ? '' : 'UTC') + part](value);\n}\n\nfunction extractDateParts(pattern, str, missingValuesDate) {\n  // Javascript Date object doesn't support custom timezone.  Sets all felds as\n  // GMT based to begin with.  If the timezone offset is provided, then adjust\n  // it using provided timezone, otherwise, adjust it with the system timezone.\n  var local = pattern.indexOf('O') < 0;\n  var matchers = [\n    {\n      pattern: /y{1,4}/,\n      regexp: \"\\\\d{1,4}\",\n      fn: function(date, value) {\n        setDatePart(date, 'FullYear', value, local);\n      }\n    },\n    {\n      pattern: /MM/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Month', (value - 1), local);\n      }\n    },\n    {\n      pattern: /dd/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Date', value, local);\n      }\n    },\n    {\n      pattern: /hh/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Hours', value, local);\n      }\n    },\n    {\n      pattern: /mm/,\n      regexp: \"\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Minutes', value, local);\n      }\n    },\n    {\n      pattern: /ss/,\n      regexp: \"\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Seconds', value, local);\n      }\n    },\n    {\n      pattern: /SSS/,\n      regexp: \"\\\\d\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Milliseconds', value, local);\n      }\n    },\n    {\n      pattern: /O/,\n      regexp: \"[+-]\\\\d{3,4}|Z\",\n      fn: function(date, value) {\n        if (value === \"Z\") {\n          value = 0;\n        }\n        var offset = Math.abs(value);\n        var timezoneOffset = (value > 0 ? -1 :  1 ) * ((offset % 100) + Math.floor(offset / 100) * 60);\n        // Per ISO8601 standard: UTC = local time - offset\n        //\n        // For example, 2000-01-01T01:00:00-0700\n        //   local time: 2000-01-01T01:00:00\n        //   ==> UTC   : 2000-01-01T08:00:00 ( 01 - (-7) = 8 )\n        //\n        // To make it even more confusing, the date.getTimezoneOffset() is\n        // opposite sign of offset string in the ISO8601 standard.  So if offset\n        // is '-0700' the getTimezoneOffset() would be (+)420. The line above\n        // calculates timezoneOffset to matche Javascript's behavior.\n        //\n        // The date/time of the input is actually the local time, so the date\n        // object that was constructed is actually local time even thought the\n        // UTC setters are used.  This means the date object's internal UTC\n        // representation was wrong.  It needs to be fixed by substracting the\n        // offset (or adding the offset minutes as they are opposite sign).\n        //\n        // Note: the time zone has to be processed after all other fileds are\n        // set.  The result would be incorrect if the offset was calculated\n        // first then overriden by the other filed setters.\n        date.setUTCMinutes(date.getUTCMinutes() + timezoneOffset);\n      }\n    }\n  ];\n\n  var parsedPattern = matchers.reduce(\n    function(p, m) {\n      if (m.pattern.test(p.regexp)) {\n        m.index = p.regexp.match(m.pattern).index;\n        p.regexp = p.regexp.replace(m.pattern, \"(\" + m.regexp + \")\");\n      } else {\n        m.index = -1;\n      }\n      return p;\n    },\n    { regexp: pattern, index: [] }\n  );\n\n  var dateFns = matchers.filter(function(m) {\n    return m.index > -1;\n  });\n  dateFns.sort(function(a, b) {\n    return a.index - b.index;\n  });\n\n  var matcher = new RegExp(parsedPattern.regexp);\n  var matches = matcher.exec(str);\n  if (matches) {\n    var date = missingValuesDate || module.exports.now();\n    dateFns.forEach(function(f, i) {\n      f.fn(date, matches[i + 1]);\n    });\n\n    return date;\n  }\n\n  throw new Error(\n    \"String '\" + str + \"' could not be parsed as '\" + pattern + \"'\"\n  );\n}\n\nfunction parse(pattern, str, missingValuesDate) {\n  if (!pattern) {\n    throw new Error(\"pattern must be supplied\");\n  }\n\n  return extractDateParts(pattern, str, missingValuesDate);\n}\n\n/**\n * Used for testing - replace this function with a fixed date.\n */\nfunction now() {\n  return new Date();\n}\n\nmodule.exports = asString;\nmodule.exports.asString = asString;\nmodule.exports.parse = parse;\nmodule.exports.now = now;\nmodule.exports.ISO8601_FORMAT = \"yyyy-MM-ddThh:mm:ss.SSS\";\nmodule.exports.ISO8601_WITH_TZ_OFFSET_FORMAT = \"yyyy-MM-ddThh:mm:ss.SSSO\";\nmodule.exports.DATETIME_FORMAT = \"dd MM yyyy hh:mm:ss.SSS\";\nmodule.exports.ABSOLUTETIME_FORMAT = \"hh:mm:ss.SSS\";\n","export default \"data:image/png;base64,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\"","import { useState, useEffect } from 'react'\nimport { getUserInfoAll ,deriToNatural} from '../lib/web3js/indexV2';\n\n\nexport default function useClaimInfo(wallet){\n  const [claimInfo, setClaimInfo] = useState({});\n  let interval = null;\n\n  const loadClaimInfo =  async () => {\n    if(wallet.isConnected()){\n      const claimInfo  = await getUserInfoAll(wallet.detail.account);\n      const claimed = (+claimInfo.total).toFixed(2);\n      const unclaimed = claimInfo.valid ? (+claimInfo.amount).toFixed(2) : 0;\n      const harvestDeriLp = (+claimInfo.lp).toFixed(2);\n      const harvestDeriTrade = (+claimInfo.trade).toFixed(2);\n      const chainId = claimInfo.chainId\n      setClaimInfo({claimed,unclaimed,harvestDeriLp,harvestDeriTrade,chainId})\n    }\n  }\n\n  useEffect(() => {\n    interval = window.setInterval(loadClaimInfo,1000 * 60 *3);\n      loadClaimInfo();\n    return () => clearInterval(interval);\n  }, [wallet.detail.account])\n  return [claimInfo,interval];\n}","import React, { useState, useEffect } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport rightArrow from '../../assets/img/play-button.png'\nimport dateFormat from 'date-format'\nimport config from '../../config.json'\nimport {\n  mintDToken,\n  fetchRestApi,\n  DeriEnv\n} from \"../../lib/web3js/indexV2\";\nimport classNames from 'classnames';\nimport useClaimInfo from \"../../hooks/useClaimInfo\";\nimport DeriNumberFormat from '../../utils/DeriNumberFormat'\nimport Button from '../Button/Button';\nimport { eqInNumber } from '../../utils/utils';\nimport useConfig from \"../../hooks/useConfig\";\nconst chainConfig = config[DeriEnv.get()]['chainInfo'];\nfunction Broker({ wallet = {}, lang ,loading}) {\n  const [claimInfo, claimInfoInterval] = useClaimInfo(wallet);\n  const config = useConfig(claimInfo.chainId)\n  const [firstDeri, setFirstDeri] = useState('--');\n  const [secondDeri, setSecondDeri] = useState('--');\n  const [thirdDeri, setThirdDeri] = useState('--');\n  const [yourDeri, setYourDeri] = useState('--');\n  const [yourRank, setYourRank] = useState('--');\n  const [sumPage, setSumPage] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totList, setTotList] = useState([])\n  const [claimed, setClaimed] = useState(false);\n  const [list, setList] = useState([]);\n  const [remainingTime, setRemainingTime] = useState('')\n  const [isLoading,setIsLoading] = useState(false)\n\n  const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\n  const rewardList = async () => {\n    let path = `/broker/${wallet.detail.account}/reward_list`\n    let res = await fetchRestApi(path)\n    if (res.data) {\n      let data = res.data.map(item => {\n        let obj = {}\n        obj.address = item.trader_address\n        obj.trader_volume = item.trader_volume\n        obj.deri_reward = item.deri_reward;\n        obj.trader_invite_timestamp = item.trader_invite_timestamp * 1000\n        obj.trader_address = item.trader_address.slice(0, 6) +\n          \"...\" +\n          item.trader_address.slice(item.trader_address.length - 4, item.trader_address.length)\n        return obj\n      })\n      setTotList(data)\n    }\n  }\n\n  useEffect(()=>{\n    loading.loading();\n    // Promise.all([\n    //   brokerEpoch(),topList(),totalReward(),rewardList()\n    // ]).then(results => {\n    //   loading.loaded()\n    // })\n    \n    if(firstDeri!='--' && secondDeri!='--' && thirdDeri!='--' && yourDeri!='--' && yourRank!='--' && list.length>0 &&claimInfo.claimed){\n      loading.loaded()\n    }\n  },[firstDeri,secondDeri,thirdDeri,yourDeri,yourRank,list,claimInfo])\n\n  const brokerEpoch = async ()=>{\n    let path = `/broker/${wallet.detail.account}/get_harvest_deri`\n    let res = await fetchRestApi(path)\n    if(res.data){\n      setYourDeri(res.data.deri_reward)\n    }\n  }\n\n  \n\n  const topList = async () => {\n    let path = '/broker/top3_reward_list'\n    let res = await fetchRestApi(path)\n    if (res.data) {\n      if(res.data.length){\n        res.data.map(item => {\n          if (item.rank === 1) {\n            setFirstDeri(item.deri_reward)\n          } else if (item.rank === 2) {\n            setSecondDeri(item.deri_reward)\n          } else if (item.rank === 3) {\n            setThirdDeri(item.deri_reward)\n          }\n        })\n      }else{\n        setFirstDeri(0)\n        setSecondDeri(0)\n        setThirdDeri(0)\n      }\n    }\n  }\n\n  const totalReward = async () => {\n    let path = `/broker/${wallet.detail.account}/total_reward`\n    let res = await fetchRestApi(path)\n    if (res.data) {\n      if (res.data.hasOwnProperty('deri_reward')) {\n        setYourRank(res.data.rank)\n      } else {\n        setYourRank('>999')\n      }\n    }\n  }\n\n  const mintDeri = async () => {\n    if ((+claimInfo.unclaimed) === 0) {\n      alert(lang['no-deri-to-claim']);\n      return;\n    }\n    if (!eqInNumber(wallet.detail.chainId, claimInfo.chainId)) {\n      alert(`${lang['your-deri-is-on']} ${config.text}  ${lang['connect-to']} ${config.text} ${lang['to-claim']}.`)\n      return;\n    }\n    let now = parseInt(Date.now() / 1000) % (3600 * 8);\n    if (now < 1800) {\n      alert(lang['claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch']);\n      return;\n    }\n    const res = await mintDToken(wallet.detail.chainId, wallet.detail.account)\n    if (res.success) {\n      clearInterval(claimInfoInterval);\n      return true;\n    } else {\n      alert(lang['claim-failed'])\n      return false;\n    }\n  }\n\n  const click = async () => {\n\t\tif(wallet.isConnected()){\n\t\t\tconst res = await mintDeri();\n\t\t\tif(res){\n\t\t\t\tsetClaimed(true)\n\t\t\t}\n\t\t} \n\t}\n  \n  const upPage = () => {\n    let page = currentPage\n    if (page != 1) {\n      page -= 1;\n    }\n    setCurrentPage(page)\n  }\n\n  const downPage = () => {\n    let page = currentPage\n    if (page < sumPage) {\n      page += 1;\n    }\n    setCurrentPage(page)\n  }\n\n  useEffect(() => {\n    if (totList.length) {\n      let sum_page = totList.length / 10;\n      sum_page = Math.ceil(sum_page)\n      let data = totList.slice((currentPage - 1) * 10, currentPage * 10)\n      setSumPage(sum_page);\n      setList(data);\n    }\n\n  }, [wallet.detail, totList, currentPage])\n  useEffect(() => {\n    // loading.loading()\n    if(hasConnectWallet()){\n      rewardList();\n      topList();\n      totalReward();\n    }\n  }, [wallet.detail])\n  useEffect(() => {\n    let intervalEpoch = null;\n    intervalEpoch = window.setInterval(brokerEpoch(),1000 * 60 *3);\n    return () => {\n      intervalEpoch && clearInterval(intervalEpoch);\n\t\t}\n  },[wallet.detail.account])\n\n  useEffect(() => {\n\t\tlet interval = null;\n\t\t\t//计数器\n\t\t\tinterval = window.setInterval(() => {\n\t\t\t\tlet period = 3600 * 8;\n\t\t\t\tlet current = parseInt(Date.now()/1000);\n\t\t\t\tlet epochBegin = parseInt(current / period)*period;\n\t\t\t\tlet dis = (epochBegin + period - current);\n\t\t\t\tlet h = parseInt(dis / 3600);\n\t\t\t\tlet m = parseInt((dis % 3600)/60);\n\t\t\t\tlet s = parseInt(dis % 60);\n\t\t\t\tsetRemainingTime(`${h} ${lang['h']} ${m} ${lang['m']} ${s} ${lang['s']}`);\n\t\t\t},1000);\n    return () => {\n      interval && clearInterval(interval);\n\t\t};\n\t\t\n  }, [wallet.detail.account]);\n\n  return (\n    <div className='broker'>\n      <div className='title'>\n        {lang['title-one']}\n        <br />\n        {lang['title-two']}\n      </div>\n      <div className='rewards'>\n        <div className='reward-box'>\n          <div className='rewards-left'>\n            <div className='rewards-one'>\n              <div className='num'>\n                <span>\n                  <DeriNumberFormat value={firstDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\n                </span> DERI\n              </div>\n              <div className='one'>\n                # 1 {lang['rewards']}\n              </div>\n            </div>\n            <div className='rewards-three'>\n              <div className='num'>\n                <span>\n                  <DeriNumberFormat value={thirdDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\n                </span>  DERI\n              </div>\n              <div className='one'>\n                # 3 {lang['rewards']}\n              </div>\n            </div>\n          </div>\n          <div className='rewards-right'>\n            <div className='rewards-two'>\n              <div className='num'>\n                <span>\n                  <DeriNumberFormat value={secondDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\n                </span> DERI\n              </div>\n              <div className='one'>\n                # 2 {lang['rewards']}\n              </div>\n            </div>\n            <div className='rewards-frou'>\n              <div className='num'>\n                <span>\n                  {yourRank}\n                </span>\n              </div>\n              <div className='one'>\n                {lang['your-rewards']}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-box\"></div>\n      </div>\n      <div className='process'>\n        <div className='invite'>\n          {lang['invute-friends']}\n        </div>\n        <div className='proce'></div>\n        <div className='bind'>\n          {lang['bind-address']}\n        </div>\n        <div className='proce'></div>\n        <div className='earn'>\n          {lang['earn-deri']}\n        </div>\n      </div>\n      <div className='rules'>\n        <div>\n\n        </div>\n        <div>\n          <a target='_blank' href='https://docs.deri.finance/guides/mining#mining-by-brokerage-mining-0-01deri-per-contract-or-distributed-per-volume-weight-if-breaching-the-hourly-upper-limit'>{lang['detailed-rules']} >></a>\n        </div>\n      </div>\n      <div className='my-harvest'>\n        <div className='header'>\n          {lang['my-harvest']}\n        </div>\n        <div className='list'>\n          <div className='my-deri'>\n            <div className='claim-deri'>\n              <div className='claimed-deri'>\n                <div className='unclaimed-title'>\n                  <span  tip={lang['your-total-unclaimed-deri-title']}>\n                    {lang['current-epoch-remaining-time']}\n                  </span>\n                  <span className='deri-text'>\n                  {remainingTime}\n                  </span>\n                </div>\n                <div className='unclaimed-title'>\n                  <span  tip={lang['your-total-unclaimed-deri-title']}>\n                    {lang['my-trading-volume-in-current-hour']} \n                  </span>\n                  <span className='deri-text'>\n                    <DeriNumberFormat value={(+yourDeri).toFixed(2)} displayType='text' thousandSeparator={true} decimalScale='2' />  DERI\n                  </span>\n                </div>\n                <div className='claimed-title'>\n                  <span className='hover-title' tip={lang['your-total-claimed-deri-title']}>\n                  {lang['claimed-deri']}\n                  </span>\n                  <span className='deri-text'>\n                    {claimed ? ((+claimInfo.claimed) + (+claimInfo.unclaimed)).toFixed(2) : claimInfo.claimed }\n                  </span>\n                </div>\n                <div className='unclaimed-title'>\n                  <span className='hover-title' tip={lang['your-total-unclaimed-deri-title']}>\n                    {lang['unclaimed-deri']}\n                  </span>\n                  <span className='deri-text'>\n                  { claimed ? 0 : (+claimInfo.unclaimed).toFixed(2) }\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div className='button'>\n              <Button className='btn' btnText={lang['claim']} lang={lang} click={click}></Button>\n            </div>\n          </div>\n          <div className='address-list'>\n            <div className='list-title'>\n              <div className='time-invited'>{lang['time-invited']}</div>\n              <div className='friends-add'>\n                {lang['friends-add']}\n              </div>\n              <div className='contract-vol'>{lang['contract-vol']}</div>\n              <div className='deri-minted'>{lang['deri-minted']}</div>\n            </div>\n            {list.map((list, index) => <div className='list-box' key={index} >\n              <div className='time'>\n                {dateFormat.asString('yyyy-MM-dd hh:mm', new Date(parseInt(list.trader_invite_timestamp)))}\n              </div>\n              <div className='address'>\n              {list.trader_address}\n              {/* <span className='view'>\n                  <span className='view-space'>\n                    <a target='_blank' rel='noreferrer' href={chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?`${chainConfig[wallet.detail.chainId]['viewUrl']}address/${list.address}`:''}>\n                    View at {chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?chainConfig[wallet.detail.chainId]['viewUrl']:''}\n                    </a>\n                  </span>\n                  <span className='right-arrow'>\n                    <img alt='' src={rightArrow}/>\n                  </span>\n                  <span className='view-arrow'>\n                    <a target='_blank' rel='noreferrer' href={chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?`${chainConfig[wallet.detail.chainId]['viewUrl']}address/${list.address}`:''}>\n                      <img rel='noreferrer' alt='' src=\"data:image/svg+xml;base64,DQo8c3ZnIGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHdpZHRoPSIxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOC42NzYuNjQyYS42NS42NSAwIDAwLS4wNzIuMDA2SDQuNzkzYS42NS42NSAwIDAwLS41Ny45NzUuNjUuNjUgMCAwMC41Ny4zMjJINy4xMkwuNDM4IDguNjE0YS42NDcuNjQ3IDAgMDAuMjg2IDEuMDk2LjY1LjY1IDAgMDAuNjMyLS4xNzlMOC4wNCAyLjg2MXYyLjMyNGEuNjQ4LjY0OCAwIDAwLjk3Ny41Ny42NDguNjQ4IDAgMDAuMzIyLS41N1YxLjM4YS42NDcuNjQ3IDAgMDAtLjY2Mi0uNzM3eiIgZmlsbD0iI0FBQUFBQSIvPg0KPC9zdmc+DQoNCg==\"/>\n                    </a>\n                  </span>\n                </span> */}\n              </div>\n              <div className='volume'>{list.trader_volume}</div>\n              <div className='deri'>\n                <DeriNumberFormat value={list.deri_reward} displayType='text' thousandSeparator={true} decimalScale='2' />\n              </div>\n            </div>)}\n          </div>\n          <div className='page-of'>\n            <div onClick={upPage}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"9.6\" height=\"8\" viewBox=\"0 0 9.6 8\">\n              <path id=\"路径_3\" data-name=\"路径 3\" d=\"M3186.224,481.353a.4.4,0,1,1,.552.58l-3.069,2.91h7.993a.4.4,0,1,1,0,.8h-7.98l3.056,2.91a.4.4,0,0,1-.552.58l-3.49-3.324a.8.8,0,0,1,.007-1.138Z\" transform=\"translate(-3182.5 -481.243)\" fill=\"#aaa\" />\n            </svg>\n            </div>\n            <div className='page'>{lang['page']} {currentPage} {lang['of']} {sumPage}</div>\n            <div onClick={downPage}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"9.6\" height=\"8\" viewBox=\"0 0 9.6 8\">\n              <path id=\"路径_4\" data-name=\"路径 4\" d=\"M3268.376,481.353a.4.4,0,0,0-.552.58l3.069,2.91H3262.9a.4.4,0,0,0,0,.8h7.98l-3.056,2.91a.4.4,0,0,0,.552.58l3.49-3.324a.8.8,0,0,0-.007-1.138Z\" transform=\"translate(-3262.5 -481.243)\" fill=\"#aaa\" />\n            </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default inject('wallet','loading')(observer(Broker))\n"],"sourceRoot":""}