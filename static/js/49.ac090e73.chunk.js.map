{"version":3,"sources":["components/Nuls/img/nuls.svg","components/Nuls/img/deri.svg","components/Nuls/img/success.svg","components/Nuls/img/undone.svg","components/Nuls/img/right.svg","components/Nuls/Nuls.js","desktop/pages/Nuls/Nuls.js","components/Button/Button.js"],"names":["inject","observer","wallet","lang","useState","Button","className","btnText","actionElement","setActionElement","hasConnectWallet","detail","account","isApprove","setIsApprove","isClaim","setIsClaim","isTrade","setIsTrade","isBalance","setIsBalacne","isThanFiveHundred","setIsThanFiveHundred","isHasPToken","setIsHasPToken","config","DeriEnv","get","poolAddress","connect","getTotalAirdropCount","a","totalAirdropCount","chainId","approve","unlockBToken","success","getHasPToken","isUserPTokenLiteExist","res","claimPtoken","alert","airdropPTokenLite","getBalance","hasRequiredBalance","getIsApprove","isBTokenUnlocked","getIsClaim","isPTokenAirdropped","getIsTrade","openConfigListCache","update","getTradeHistory","length","useEffect","element","href","click","src","nulsimg","deriimg","undone","right","disabled","afterClick","checkApprove","spec","status","setStatus","isApproved","setIsApproved","pending","setPending","buttonText","setbuttonText","loadRef","useRef","onClick","beforeAction","afterAction","current","style","display","loadApproveStatus","pool","bTokenId","ref","marginRight"],"mappings":"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","file":"static/js/49.ac090e73.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/nuls.236d79b4.svg\";","export default __webpack_public_path__ + \"static/media/deri.aa74d3cb.svg\";","export default __webpack_public_path__ + \"static/media/success.4aa75af6.svg\";","export default __webpack_public_path__ + \"static/media/undone.f6087837.svg\";","export default __webpack_public_path__ + \"static/media/right.26915bd4.svg\";","/* eslint-disable jsx-a11y/anchor-has-content */\r\n/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useEffect, useState } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport nulsimg from './img/nuls.svg'\r\nimport deriimg from './img/deri.svg'\r\nimport success from './img/success.svg'\r\nimport undone from './img/undone.svg'\r\nimport right from './img/right.svg'\r\nimport Button from '../Button/Button'\r\nimport {\r\n  isPTokenAirdropped,\r\n  isUserPTokenLiteExist,\r\n  totalAirdropCount,\r\n  isBTokenUnlocked,\r\n  hasRequiredBalance,\r\n  getTradeHistory,\r\n  openConfigListCache,\r\n  unlockBToken,\r\n  DeriEnv,\r\n  airdropPTokenLite\r\n} from \"../../lib/web3js/indexV2\";\r\nfunction Nuls({ wallet = {}, lang }) {\r\n  const [actionElement, setActionElement] = useState(<Button className='btn' btnText={lang['connect-wallet']}></Button>)\r\n  const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\r\n  const [isApprove, setIsApprove] = useState(false);\r\n  const [isClaim, setIsClaim] = useState(false);\r\n  const [isTrade, setIsTrade] = useState(false);\r\n  const [isBalance,setIsBalacne] = useState(false);\r\n  const [isThanFiveHundred,setIsThanFiveHundred] = useState(false)\r\n\r\n  const [isHasPToken,setIsHasPToken] = useState(false)\r\n  const config = DeriEnv.get() === 'dev' ? {\r\n    poolAddress:'0xb18e2815c005a99BE77c8719c79ec2451A59aDAD'\r\n  } : {\r\n    poolAddress :'0xB8b79fd4BCB7dc0Ef352F258b4f9eC53306439fd'\r\n  }\r\n  const connect = () => {\r\n    wallet.connect()\r\n  }\r\n\r\n  const getTotalAirdropCount = async ()=>{\r\n    let res = await totalAirdropCount(wallet.detail.chainId)\r\n    if(+res >= 500){\r\n      setIsThanFiveHundred(true)\r\n    }\r\n  }\r\n\r\n  const approve = async () => {\r\n    let res = await unlockBToken(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\r\n    if(res.success){\r\n      setIsApprove(true)\r\n    }\r\n  }\r\n\r\n  const getHasPToken = async ()=>{\r\n    let res = await isUserPTokenLiteExist(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\r\n    setIsHasPToken(res)\r\n  }\r\n\r\n  const claimPtoken = async () => {\r\n    if(!isBalance){\r\n      alert(lang['less-nuls'])\r\n      return\r\n    }\r\n    if(isHasPToken){\r\n      alert(lang['use-a-new-address'])\r\n      return\r\n    }\r\n\r\n    let res = await airdropPTokenLite(wallet.detail.chainId,wallet.detail.account)\r\n    if(res.success){\r\n      setIsClaim(true)\r\n    }else{\r\n      alert(lang['faild'])\r\n    }\r\n\r\n  }\r\n\r\n  const getBalance = async ()=>{\r\n    let res = await hasRequiredBalance(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\r\n    setIsBalacne(res)\r\n  }\r\n\r\n  const getIsApprove = async ()=>{\r\n    let res = await isBTokenUnlocked(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\r\n    setIsApprove(res)\r\n  }\r\n\r\n  const getIsClaim = async ()=>{\r\n    let res = await isPTokenAirdropped(wallet.detail.chainId,wallet.detail.account)\r\n    setIsClaim(res)\r\n  }\r\n\r\n  const getIsTrade = async () =>{\r\n    await openConfigListCache.update()\r\n    let res = await getTradeHistory(wallet.detail.chainId,config.poolAddress,wallet.detail.account,'0')\r\n    if(res.length > 0){\r\n      setIsTrade(true)\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(hasConnectWallet()){\r\n      getIsApprove()\r\n      getIsClaim()\r\n      getBalance()\r\n      getHasPToken()\r\n      getIsTrade()\r\n      getTotalAirdropCount()\r\n    }\r\n  },[wallet.detail])\r\n\r\n  useEffect(() => {\r\n    let element;\r\n    if (hasConnectWallet()) {\r\n      if (!isApprove) {\r\n        element = <Button className='btn' btnText={lang['register']} click={approve} lang={lang} />\r\n      } else {\r\n        if (isClaim || isThanFiveHundred) {\r\n          element = <a href='https://app.deri.finance/#/futures/pro' className='btn'>\r\n            {lang['trade']}\r\n          </a>\r\n        } else {\r\n          element = <Button className='btn' btnText={lang['claim']} click={claimPtoken} lang={lang} />\r\n        }\r\n\r\n      }\r\n    } else {\r\n      element = <Button className='btn btn-danger connect' btnText={lang['connect-wallet']} click={connect} lang={lang} />\r\n    }\r\n    setActionElement(element)\r\n  }, [wallet.detail, isApprove, isClaim,isBalance,isHasPToken,isThanFiveHundred])\r\n\r\n  return (\r\n    <div className='nuls-box'>\r\n      <div className='title'>\r\n        <div>\r\n          {lang['title']}\r\n        </div>\r\n        <div className='time'>\r\n          {lang['in-celebration-of-the']}\r\n        </div>\r\n      </div>\r\n      <div className='logo'>\r\n        <img className='nuls-img' src={nulsimg} />\r\n        <img src={deriimg} />\r\n      </div>\r\n      <div className='user-rasks'>\r\n        <div className='header'>\r\n          {lang['user-tasks']}\r\n        </div>\r\n        <div className='content'>\r\n          <div className='content-text'>\r\n            <div className='step'>\r\n              <div className='step-img'>\r\n                <div>\r\n                  {isApprove ? <img src={success} /> : <img src={undone} />}\r\n                </div>\r\n                <div>\r\n                  {lang['register']}\r\n                </div>\r\n              </div>\r\n              <div className='step-img'>\r\n                <div>\r\n                  <img src={right} />\r\n                </div>\r\n\r\n              </div>\r\n              <div className='step-img'>\r\n                <div>\r\n                  {isClaim ? <img src={success} /> : <img src={undone} />}\r\n                </div>\r\n                <div>\r\n                  {lang['claim']}\r\n                </div>\r\n              </div>\r\n              <div className='step-img'>\r\n                <div>\r\n                  <img src={right} />\r\n                </div>\r\n\r\n              </div>\r\n              <div className='step-img'>\r\n                <div>\r\n                  {isTrade ? <img src={success} /> : <img src={undone} />}\r\n                </div>\r\n                <div>\r\n                  {lang['trade']}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className='button'>\r\n              {actionElement}\r\n            </div>\r\n            {isThanFiveHundred ? <div className='exceed'>{lang['exceed-participants']}</div>:''}\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div className='h2'>\r\n        {lang['title-one']}\r\n        <span className='title-num'>\r\n          {lang['title-num']}\r\n        </span>\r\n        <span className='in-deri'>\r\n          {lang['title-two']}\r\n        </span>\r\n        <div className='text'>\r\n          {lang['title-three']}\r\n        </div>\r\n      </div>\r\n      <div className='rules'>\r\n        <div className='rules-title'>\r\n          {lang['rules']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['rules-one']}\r\n        </div>\r\n        \r\n        <div className='text'>\r\n          {lang['rules-two']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-one']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-two']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-three']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-four']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['rules-three']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-one']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-two']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-three']}\r\n        </div>\r\n        <div className='text-n'>\r\n          {lang['rules-two-four']}\r\n        </div>\r\n        <div className='rules-title'>\r\n          {lang['how-to-participate']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['step-one']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['step-two']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['step-three']}\r\n          <a href='https://docs.deri.finance/guides/trading'>\r\n            {lang['step-three-a']}\r\n          </a>\r\n        </div>\r\n        <div className='rules-title'>\r\n          {lang['notes']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['notes-one']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['notes-two']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['notes-three']}\r\n        </div>\r\n        <div className='text'>\r\n          {lang['notes-four']}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default inject(\"wallet\")(observer(Nuls))","/* eslint-disable import/no-anonymous-default-export */\r\nimport Nuls from '../../../components/Nuls/Nuls'\r\nimport './nuls.less'\r\n\r\nexport default function({lang}){\r\n  return(\r\n    <div>\r\n      <Nuls lang={lang} />\r\n    </div>\r\n  )\r\n}","import {useState,useRef,useEffect} from 'react';\r\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\r\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\r\n  const [isApproved, setIsApproved] = useState(true);\r\n  const [pending, setPending] = useState(false);\r\n  const [buttonText, setbuttonText] = useState(btnText)\r\n  const loadRef = useRef(null)\r\n\r\n  const onClick = async () => {\r\n    if(status !== 'enabled') {\r\n      return ;\r\n    }\r\n    beforeAction()\r\n    const result = await click();    \r\n    if(result){\r\n      afterClick && afterClick()\r\n    } \r\n    afterAction()\r\n  }\r\n\r\n  const beforeAction = ()  => {\r\n    setStatus('disabled')\r\n    setPending(true);\r\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\r\n  }\r\n\r\n  const afterAction = () => {\r\n    loadRef.current && (loadRef.current.style.display = 'none')\r\n    setStatus('enabled')\r\n    setPending(false);\r\n  }\r\n\r\n  const loadApproveStatus = async () => {\r\n    if(checkApprove && wallet && wallet.detail.account){\r\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\r\n      setIsApproved(res);\r\n    }\r\n  }\r\n  const approve = async () => {\r\n    beforeAction();\r\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\r\n    if(res.success){\r\n      setIsApproved(true);\r\n    } else {\r\n      setIsApproved(false)\r\n      alert(lang['approve-failed'])\r\n    }\r\n    afterAction();\r\n  }\r\n\r\n  const action = () => {\r\n    if(isApproved){\r\n      onClick();\r\n    } else {\r\n      approve();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadApproveStatus();\r\n    return () => {};\r\n  }, [wallet,spec,checkApprove]);\r\n\r\n  useEffect(() => {\r\n    if(btnText){\r\n      setbuttonText(btnText)\r\n    }\r\n    return () => {\r\n    }\r\n  }, [btnText])\r\n\r\n  return(\r\n    <button className={className} onClick={action} >\r\n        <span className='btn-loading-wrap'>\r\n          <span ref={loadRef}\r\n            className='spinner spinner-border spinner-border-sm'\r\n            style={{display : 'none' ,marginRight : '2'}}>\r\n          </span>\r\n        </span>\r\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\r\n        </button>\r\n  )\r\n}"],"sourceRoot":""}