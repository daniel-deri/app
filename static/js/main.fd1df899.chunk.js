(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[5],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return l}));var a=n(0),r=n.n(a),i=n(1),s=n(66),u=n(16),o=n.n(u),c=n(2),p=function(){var e=null;return function(){if(null!==e)return e;var t;if(void 0===Object(s.a)(window.ethereum))throw new Error("Please install MetaMask first");return t=new o.a(window.ethereum),e=t,t}}(),l=function(){var e={};return function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object.keys(e).includes(n)){t.next=2;break}return t.abrupt("return",e[n]);case 2:return console.log("==== web3Factory(".concat(n,"), please caution the access limits ===")),t.next=5,Object(c.l)(n);case 5:return a=t.sent,i=new o.a(new o.a.providers.HttpProvider(a)),e[n]=i,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}()},122:function(e,t,n){"use strict";var a=n(4),r=n(5),i=n(11),s=n(10),u=n(6),o=n.n(u),c=n(274),p=n.n(c),l=n(159),d=n.n(l),y=(n(288),n(57)),f=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentWillMount",value:function(){d.a.start()}},{key:"componentWillUnmount",value:function(){d.a.done()}},{key:"render",value:function(){return Object(y.jsx)("div",{})}}]),n}(o.a.Component);t.a=function(e){return p()({loader:e,loading:function(){return Object(y.jsx)(f,{})}})}},164:function(e){e.exports=JSON.parse('{"prod":{"chainInfo":{"1":{"name":"Ethereum","text":"ETHEREUM","symbol":"ETH","viewUrl":"https://etherscan.io/"},"56":{"name":"bsc","text":"BSC","symbol":"BNB","viewUrl":"https://bscscan.com/"},"128":{"name":"heco","text":"HECO","symbol":"HT","viewUrl":"https://hecoscan.xyz/"}},"oracle":{"COIN":"https://oracle3.deri.finance/price","BTCUSD":"https://oracle.deri.finance/price"}},"dev":{"chainInfo":{"97":{"name":"Bsc-testnet","text":"BSC TESTNET","symbol":"BNB","viewUrl":"https://testnet.bscscan.com/"}},"oracle":{"COIN":"https://oracle2.deri.finance/price","BTCUSD":"https://oracle2.deri.finance/price"}}}')},167:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=(t="dev")=>"prod"===t||"production"===t?e&&Object({NODE_ENV:"production",PUBLIC_URL:"https://cdn.jsdelivr.net/gh/deri-finance/app@main",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"https://cdn.jsdelivr.net/gh/deri-finance/app@main",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_REST_SERVER_URL||"https://api.deri.finance":"https://testnetapi.deri.finance",r=(e="dev")=>"prod"===e?["trade_tx_quene","trade_worker_group"]:["trade_tx_quene_dev","trade_worker_group_dev"]}).call(this,n(23))},17:function(e,t,n){"use strict";n.r(t),n.d(t,"DeriEnv",(function(){return a.a})),n.d(t,"ChainProviderUrls",(function(){return r})),n.d(t,"getChainProviderUrlsConfig",(function(){return i})),n.d(t,"getContractAddressConfig",(function(){return s})),n.d(t,"getSlpContractAddressConfig",(function(){return u})),n.d(t,"getClpContractAddressConfig",(function(){return o})),n.d(t,"getClp2ContractAddressConfig",(function(){return c})),n.d(t,"getLpContractAddressConfig",(function(){return p})),n.d(t,"getMiningVaultRouterContractAddress",(function(){return l})),n.d(t,"getDeriContractAddressConfig",(function(){return d})),n.d(t,"getAnnualBlockNumberConfig",(function(){return y})),n.d(t,"getDBProviderUrlsConfig",(function(){return f.c})),n.d(t,"getDBAddressConfig",(function(){return f.a})),n.d(t,"getDBWormholeAddressConfig",(function(){return f.d})),n.d(t,"getDBAirdropAddressConfig",(function(){return f.b})),n.d(t,"getRestServerConfig",(function(){return m.b})),n.d(t,"getRedisWorkerQueneConfig",(function(){return m.a}));var a=n(87),r=[{provider_urls:["https://mainnet.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}],i=function(e){var t=[{provider_urls:["https://mainnet.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}].filter((function(t){return t.chainId===e}));if(t.length>0)return t[0].provider_urls;throw new Error("getChainProviderUrlsConfig: no urls for chainId ".concat(e))};const s=(e="dev")=>"prod"===e?[{pool:"0xAf081e1426f64e74117aD5F695D2A80482679DE5",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0x3c11c4990447F0AD575eBd74E8cD17bf61848A15",lToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"7906919",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"56",version:"v1"},{pool:"0x011346B81e5326904B5B76A11dECAf2c67eFFc23",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0xaE6429b4CDDDFefDB6ac702183c836B4e62Da410",lToken:"0xd8f78c47b0e0943B3Cb2cE1e1726472C4ddd2F98",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"6753399",bTokenSymbol:"BUSD",symbol:"COIN",unit:"COIN",chainId:"56",version:"v1"},{pool:"0xD3f5E6D1a25dA1E64EDf7cb571f9fAD17FEb623c",bToken:"0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5",pToken:"0x29Be63E854727BB3Fef77eB107B8d1c33081f989",lToken:"0x610b39F9ba0fF2167AEb646462473c011A431Cd7",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"8005906",bTokenSymbol:"DERI",symbol:"iMEME",unit:"iMEME",chainId:"56",version:"v1"},{pool:"0x23779AAc1e74a65F27B4840A8E41F767Ce993118",bToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7",pToken:"0x9c6134F9e759C6812aaC102FC1a9f7cA5615fD33",lToken:"0x43CA6D7129d7F490d5B91B4D14D7c877D15A92dA",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11949433",bTokenSymbol:"USDT",symbol:"BTCUSD",unit:"BTC",chainId:"1",version:"v1"},{pool:"0x96a1F15676746b9339DBc185F277618359Ac6346",bToken:"0x3449FC1Cd036255BA1EB19d65fF4BA2b8903A69a",pToken:"0x15aD9b67cf54037127fD986Ca3bB775f9FC4ad05",lToken:"0xeC27d4c53C2E29F1113A9667c0B19442df83c1f1",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11860070",bTokenSymbol:"BAC",symbol:"BTCUSD",unit:"BTC",chainId:"1",version:"v1"},{pool:"0xBA7e183042c8796E26A5a2375927DE7B1AB99d97",bToken:"0x0298c2b32eaE4da002a15f36fdf7615BEa3DA047",pToken:"0x732Ba556B304fd74Cd14b74ab8762A7D9f26d476",lToken:"0x90fE976Cbb48E0761A84DDA2974024377994a997",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0xF0bC8b772f26F8DeB46c1aebbEA7C8d502Abf3b8",initialBlock:"2557914",bTokenSymbol:"HUSD",symbol:"BTCUSD",unit:"BTC",chainId:"128",version:"v1"}]:[{pool:"0x372b640A00a0A6B73381e9363A39644a712cCc37",bToken:"0x4038191eFb39Fe1d21a48E061F8F14cF4981A0aF",pToken:"0xB9113758D771750e9E8ECb359A19689eC89AC1a5",lToken:"0xC727a10Be4740441BE74960296097aF39D701980",initialBlock:"9378545",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"97",version:"v1"}],u=(e="dev")=>"prod"===e?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP",symbol:"--"}]:(console.log("getSlpContractAddressConfig(): no config for dev environment"),[]),o=(e="dev")=>"prod"===e?[{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"--"}]:[],c=(e="dev")=>"prod"===e?[{pool:"0x73feaa1eE314F8c655E354234017bE2193C9E24E",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"699498",chainId:"56",bTokenSymbol:"CAKE-LP SYRUP",symbol:"--"}]:[],p=(e="dev")=>"prod"===e?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP",symbol:"--",type:"slp"},{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"--",type:"clp"},{pool:"0x73feaa1eE314F8c655E354234017bE2193C9E24E",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"699498",chainId:"56",bTokenSymbol:"CAKE-LP SYRUP",symbol:"--",type:"clp2"}]:[],l=e=>{const t=[{MiningVaultRouter:"0x8d5613451Dc0592388f98d7Ab1ce5A732561936e",chainId:"56"}].filter((t=>t.chainId===e));if(t.length>0)return t[0].MiningVaultRouter;throw new Error(`getMiningVaultRouterAddressConfig: no address for chainId ${e}`)},d=(e="dev")=>"prod"===e?[{Deri:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",Wormhole:"0x6874640cC849153Cb3402D193C33c416972159Ce",bTokenSymbol:"DERI",chainId:"1"},{Deri:"0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5",Wormhole:"0x15a5969060228031266c64274a54e02Fbd924AbF",bTokenSymbol:"DERI",chainId:"56"},{Deri:"0x2bdA3e331Cf735D9420e41567ab843441980C4B8",Wormhole:"0x134A04497e9a0b1F8850fEaf87eD18ec348dDa46",bTokenSymbol:"DERI",chainId:"128"}]:[{Deri:"0x88Fe79a3b6AC7EeF3d55B2e388fa18400590698B",Wormhole:"0xcb28Fa7dFa1844Cdb47aD5f03484f6131293Fd2e",bTokenSymbol:"DERI",chainId:"3"},{Deri:"0x8dC0aA48bbc69BaCD2548c6b7adCDeF8DDbA50B2",Wormhole:"0x9028e43114Df57C97c15355224E575DF1e244919",bTokenSymbol:"DERI",chainId:"97"},{Deri:"0x932458a637F8060AF747167656651b64d4c36620",Wormhole:"0x629B0D3D32BE5ee5F7BF3845914d26446c04165d",bTokenSymbol:"DERI",chainId:"256"}],y=()=>({1:"2367422",56:"10497304",128:"10511369",3:"2367422",97:"10497304",256:"10511369",137:"15063056",80001:"15063056"});var f=n(58),m=n(167)},2:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"z",(function(){return c})),n.d(t,"A",(function(){return p})),n.d(t,"D",(function(){return l})),n.d(t,"y",(function(){return d})),n.d(t,"w",(function(){return y})),n.d(t,"x",(function(){return f})),n.d(t,"B",(function(){return m})),n.d(t,"C",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return T})),n.d(t,"v",(function(){return g})),n.d(t,"d",(function(){return x})),n.d(t,"i",(function(){return k})),n.d(t,"b",(function(){return w})),n.d(t,"r",(function(){return O})),n.d(t,"t",(function(){return j})),n.d(t,"q",(function(){return A})),n.d(t,"j",(function(){return M})),n.d(t,"u",(function(){return I})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return P})),n.d(t,"p",(function(){return _})),n.d(t,"o",(function(){return B})),n.d(t,"s",(function(){return S})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return E})),n.d(t,"h",(function(){return R}));var a=n(16),r=n.n(a),i=n(26),s=n.n(i);n.d(t,"a",(function(){return s.a}));var u=n(17);s.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:s.a.ROUND_DOWN,EXPONENTIAL_AT:256});const o=(e,t=0)=>0===t?s()(e):t>0?s()(e).times(s()(`1${"0".repeat(t)}`)):s()(e).div(s()(`1${"0".repeat(-t)}`)),c=(e,t)=>e.gte(t)?e:t,p=(e,t)=>e.lte(t)?e:t,l=e=>r.a.utils.toChecksumAddress(e),d=e=>r.a.utils.hexToUtf8(e),y=e=>r.a.utils.hexToNumber(e),f=e=>r.a.utils.hexToNumberString(e),m=e=>o(e,18).toFixed(0),b=e=>`${o(e).sd(4).times(100).toFixed(4).toString()}%`,v=e=>o(e,-18),h=e=>o(e).toString(),T=e=>1===o(e).toNumber(),g=(...e)=>e.some((e=>isNaN(e.toString())||"0"===e.toString())),x=async e=>{try{if((await fetch(e)).ok)return!0}catch(t){}return!1},k=async(e=[])=>{for(let t=0;t<e.length;t++){const n=e[t];if(await x(n))return n}throw new Error("No alive http server in urls",e)},w="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",O=e=>{let t;switch(e=D(e)){case"1":t="ethereum";break;case"56":t="bsc";break;case"128":t="heco";break;case"3":t="ropsten";break;case"42":t="kovan";break;case"97":t="bsctestnet";break;case"256":t="hecotestnet";break;case"137":t="matic";break;case"80001":t="mumbai";break;default:throw new Error(`The networkId is not valid for chainId ${e}`)}return t},j=(e,t)=>{e=D(e);const n=Object(u.getContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e)).filter((e=>e.pool===t));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault,bTokenSymbol:n[0].bTokenSymbol,symbol:n[0].symbol,unit:n[0].unit,initialBlock:n[0].initialBlock}:[]},A=e=>{e=D(e);const t=Object(u.getContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e));if(t.length>0&&t[0].MiningVault)return t[0].MiningVault},M=e=>{const t=Object(u.getAnnualBlockNumberConfig)();if(t[e])return parseInt(t[e]);console.log(`cannot find the annual block number with chainId: ${e}`)},I=(e,t)=>{e=D(e);const n=Object(u.getSlpContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e)).filter((e=>e.pool===t));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault}:(console.log(`getSlpContractAddress(): contract address is not found: ${e} ${t}`),{})},C=(e,t)=>{e=D(e);const n=Object(u.getClp2ContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e)).filter((e=>e.pool===t));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault}:(console.log(`getClp2ContractAddress(): contract address is not found: ${e} ${t}`),{})},P=(e,t)=>{e=D(e);const n=Object(u.getClpContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e)).filter((e=>e.pool===t));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken}:(console.log(`getClpContractAddress(): contract address is not found: ${e} ${t}`),{})},_=(e,t)=>{e=D(e);const n=Object(u.getLpContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e)).filter((e=>e.pool===t));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken,type:n[0].type}:(console.log(`getLpContractAddress(): contract address is not found: ${e} ${t}`),{})},B=e=>{e=D(e);const t=Object(u.getDeriContractAddressConfig)(u.DeriEnv.get()).filter((t=>t.chainId===e));return t.length>0?{deriAddress:t[0].Deri,wormholeAddress:t[0].Wormhole,bTokenSymbol:t[0].bTokenSymbol}:(console.log(`getDeriContractAddress(): contract address is not found: ${e}`),{})},S=async(e,t)=>{let n,a=((e,t)=>{const n=u.DeriEnv.get(),{symbol:a}=j(e,t),r=(e,t="BTCUSD")=>`${e}?symbol=${t}`;return"prod"===n||"production"===n?a?r("https://oracle4.deri.finance/price",a):"https://oracle4.deri.finance/price":a?r("https://oracle2.deri.finance/price",a):"https://oracle2.deri.finance/price"})(e,t),r=2;for(;r>0&&(n=await fetch(a,{mode:"cors",cache:"no-cache"}),!n.ok);)r-=1;if(0===r&&!n)throw new Error("fetch oracle info error: exceed max retry(2).");return await n.json()},F=async(e,t)=>{const n=await S(e,t);let a=n.price;return a||(a="0"),v(n.price).toString()},E=async e=>{e=D(e);const t=Object(u.getChainProviderUrlsConfig)(e);if(t.length>0)return await k(t);throw new Error(`Cannot find the chain provider url with chainId: ${e}`)},R=e=>e.toFormat().replaceAll(",","").toString(),D=e=>{let t=e?e.toString():e;if(e&&["1","56","128","3","42","97","256","137","80001"].includes(t))return t;throw new Error(`invalid chainId: ${e}`)}},21:function(e,t,n){"use strict";var a=n(17);n.d(t,"DeriEnv",(function(){return a.DeriEnv})),n.d(t,"getLpContractAddressConfig",(function(){return a.getLpContractAddressConfig}));var r=n(2);n.d(t,"bg",(function(){return r.c}));n(28);var i=n(43);n.d(t,"PerpetualPoolParametersCache",(function(){return i.a})),n.d(t,"priceCache",(function(){return i.c}));var s=n(268);n.o(s,"addLiquidity")&&n.d(t,"addLiquidity",(function(){return s.addLiquidity})),n.o(s,"addLpLiquidity")&&n.d(t,"addLpLiquidity",(function(){return s.addLpLiquidity})),n.o(s,"closePosition")&&n.d(t,"closePosition",(function(){return s.closePosition})),n.o(s,"connectWallet")&&n.d(t,"connectWallet",(function(){return s.connectWallet})),n.o(s,"depositMargin")&&n.d(t,"depositMargin",(function(){return s.depositMargin})),n.o(s,"getContractAddressConfig")&&n.d(t,"getContractAddressConfig",(function(){return s.getContractAddressConfig})),n.o(s,"getEstimatedFee")&&n.d(t,"getEstimatedFee",(function(){return s.getEstimatedFee})),n.o(s,"getEstimatedFundingRate")&&n.d(t,"getEstimatedFundingRate",(function(){return s.getEstimatedFundingRate})),n.o(s,"getEstimatedLiquidityUsed")&&n.d(t,"getEstimatedLiquidityUsed",(function(){return s.getEstimatedLiquidityUsed})),n.o(s,"getFundingRate")&&n.d(t,"getFundingRate",(function(){return s.getFundingRate})),n.o(s,"getLiquidityInfo")&&n.d(t,"getLiquidityInfo",(function(){return s.getLiquidityInfo})),n.o(s,"getLiquidityUsed")&&n.d(t,"getLiquidityUsed",(function(){return s.getLiquidityUsed})),n.o(s,"getLpLiquidityInfo")&&n.d(t,"getLpLiquidityInfo",(function(){return s.getLpLiquidityInfo})),n.o(s,"getLpWalletBalance")&&n.d(t,"getLpWalletBalance",(function(){return s.getLpWalletBalance})),n.o(s,"getPoolInfoApy")&&n.d(t,"getPoolInfoApy",(function(){return s.getPoolInfoApy})),n.o(s,"getPoolLiquidity")&&n.d(t,"getPoolLiquidity",(function(){return s.getPoolLiquidity})),n.o(s,"getPositionInfo")&&n.d(t,"getPositionInfo",(function(){return s.getPositionInfo})),n.o(s,"getSpecification")&&n.d(t,"getSpecification",(function(){return s.getSpecification})),n.o(s,"getTradeHistory")&&n.d(t,"getTradeHistory",(function(){return s.getTradeHistory})),n.o(s,"getUserWalletBalance")&&n.d(t,"getUserWalletBalance",(function(){return s.getUserWalletBalance})),n.o(s,"getWalletBalance")&&n.d(t,"getWalletBalance",(function(){return s.getWalletBalance})),n.o(s,"isLpUnlocked")&&n.d(t,"isLpUnlocked",(function(){return s.isLpUnlocked})),n.o(s,"isUnlocked")&&n.d(t,"isUnlocked",(function(){return s.isUnlocked})),n.o(s,"removeLiquidity")&&n.d(t,"removeLiquidity",(function(){return s.removeLiquidity})),n.o(s,"removeLpLiquidity")&&n.d(t,"removeLpLiquidity",(function(){return s.removeLpLiquidity})),n.o(s,"tradeWithMargin")&&n.d(t,"tradeWithMargin",(function(){return s.tradeWithMargin})),n.o(s,"unlock")&&n.d(t,"unlock",(function(){return s.unlock})),n.o(s,"unlockLp")&&n.d(t,"unlockLp",(function(){return s.unlockLp})),n.o(s,"withdrawMargin")&&n.d(t,"withdrawMargin",(function(){return s.withdrawMargin}));var u=n(269);n.d(t,"connectWallet",(function(){return u.a})),n.d(t,"getUserWalletBalance",(function(){return u.b}));n(47);var o=n(36);n.d(t,"mintDToken",(function(){return o.e})),n.d(t,"mintAirdrop",(function(){return o.d}));var c=n(38);n.d(t,"getUserInfoAll",(function(){return c.d})),n.d(t,"getLpPoolInfoApy",(function(){return c.a})),n.d(t,"getUserInfoInPool",(function(){return c.f})),n.d(t,"getUserInfoAllForAirDrop",(function(){return c.e}));n(39);var p=n(270);n.d(t,"addLpLiquidity",(function(){return p.a})),n.d(t,"getLpLiquidityInfo",(function(){return p.b})),n.d(t,"getLpWalletBalance",(function(){return p.c})),n.d(t,"isLpUnlocked",(function(){return p.d})),n.d(t,"removeLpLiquidity",(function(){return p.e})),n.d(t,"unlockLp",(function(){return p.f}));var l=n(273);n.d(t,"addLiquidity",(function(){return l.a})),n.d(t,"closePosition",(function(){return l.b})),n.d(t,"depositMargin",(function(){return l.c})),n.d(t,"getContractAddressConfig",(function(){return l.d})),n.d(t,"getEstimatedFee",(function(){return l.e})),n.d(t,"getEstimatedFundingRate",(function(){return l.f})),n.d(t,"getEstimatedLiquidityUsed",(function(){return l.g})),n.d(t,"getFundingRate",(function(){return l.h})),n.d(t,"getLiquidityInfo",(function(){return l.i})),n.d(t,"getLiquidityUsed",(function(){return l.j})),n.d(t,"getPoolInfoApy",(function(){return l.k})),n.d(t,"getPoolLiquidity",(function(){return l.l})),n.d(t,"getPositionInfo",(function(){return l.m})),n.d(t,"getSpecification",(function(){return l.n})),n.d(t,"getTradeHistory",(function(){return l.o})),n.d(t,"getWalletBalance",(function(){return l.p})),n.d(t,"isUnlocked",(function(){return l.q})),n.d(t,"removeLiquidity",(function(){return l.r})),n.d(t,"tradeWithMargin",(function(){return l.s})),n.d(t,"unlock",(function(){return l.t})),n.d(t,"withdrawMargin",(function(){return l.u}));var d=n(22);n.d(t,"getPoolBTokensBySymbolId",(function(){return d.l}))},22:function(e,t,n){"use strict";n.d(t,"j",(function(){return me})),n.d(t,"n",(function(){return be})),n.d(t,"m",(function(){return ve})),n.d(t,"a",(function(){return he})),n.d(t,"t",(function(){return Te})),n.d(t,"p",(function(){return ke})),n.d(t,"o",(function(){return we})),n.d(t,"s",(function(){return je})),n.d(t,"r",(function(){return Oe})),n.d(t,"d",(function(){return Ae})),n.d(t,"g",(function(){return Me})),n.d(t,"h",(function(){return Pe})),n.d(t,"e",(function(){return _e})),n.d(t,"k",(function(){return Be})),n.d(t,"f",(function(){return Se})),n.d(t,"i",(function(){return Ie})),n.d(t,"l",(function(){return Fe})),n.d(t,"q",(function(){return qe})),n.d(t,"v",(function(){return Le})),n.d(t,"c",(function(){return Ue})),n.d(t,"w",(function(){return Ne})),n.d(t,"u",(function(){return Ve})),n.d(t,"b",(function(){return He}));var a=n(9),r=n(16),i=n.n(r),s=n(26),u=n.n(s);u.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:u.a.ROUND_DOWN,EXPONENTIAL_AT:256});var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t?u()(e):t>0?u()(e).times(u()("1".concat("0".repeat(t)))):u()(e).div(u()("1".concat("0".repeat(-t))))},c=function(e,t){return e.gte(t)?e:t},p=function(e,t){return e.lte(t)?e:t},l=function(e){return o(e,-18)},d=function(e){return o(e,18).toFixed(0)},y=function(e){return i.a.utils.numberToHex(e)},f=n(0),m=n.n(f),b=n(1),v=(n(165),function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(!e.sent.ok){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),h=function(){var e=Object(b.a)(m.a.mark((function e(){var t,n,a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[],n=0;case 2:if(!(n<t.length)){e.next=11;break}return a=t[n],e.next=6,v(a);case 6:if(!e.sent){e.next=8;break}return e.abrupt("return",a);case 8:n++,e.next=2;break;case 11:throw new Error("No alive http server in urls",t);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const T=e=>{let t=e?e.toString():e;if(e&&["1","56","128","3","42","97","256","137","80001"].includes(t))return t;throw new Error(`invalid chainId: ${e}`)},g=(...e)=>e.every((e=>!isNaN(parseFloat(e))));var x=n(17),k=n(120),w=n(4),O=n(5),j=n(40),A=n(30),M=n(11),I=n(10),C=n(55),P=832731,_=function(){function e(t,n,a){Object(w.a)(this,e),this.chainId=t,this.contractAddress=n,this.useInfura=a}return Object(O.a)(e,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.useInfura){e.next=6;break}return e.next=3,Y.getOrSet(this.chainId);case 3:this.web3=e.sent,e.next=7;break;case 6:this.web3=X();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_call",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a,r,i,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:[],r=2;case 2:if(!(r>0)){e.next=19;break}return e.prev=3,e.next=6,this._init();case 6:return e.next=8,(i=this.contract.methods)[t].apply(i,Object(C.a)(n)).call();case 8:return a=e.sent,e.abrupt("break",19);case 12:e.prev=12,e.t0=e.catch(3),r-=1,this.web3=null,console.log(e.t0);case 17:e.next=2;break;case 19:return 0!==r||a||console.log("method call '".concat(t," ").concat(n,"' failed with max retry 3.")),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_estimatedGas",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a,r,i,s,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:[],a=u.length>2?u[2]:void 0,e.next=4,this._init();case 4:r=0,i=0;case 6:if(!(i<2)){e.next=20;break}return e.prev=7,e.next=10,(s=this.contract.methods)[t].apply(s,Object(C.a)(n)).estimateGas({from:a});case 10:return r=e.sent,r=parseInt(1.25*r),e.abrupt("break",20);case 15:e.prev=15,e.t0=e.catch(7);case 17:i++,e.next=6;break;case 20:return(0==r||r>1e7)&&(r=P),e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(e){var t=this;return function n(a,r){t.web3.eth.getTransactionReceipt(e,(function(e,t){e?r(e):null===t?setTimeout((function(){return n(a,r)}),500):!1===t.status?(t.errorMessage="Transaction failed",r(t)):a(t)}))}}},{key:"_transact",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){var r,i,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._init();case 2:return e.next=4,this._estimatedGas(t,n,a);case 4:return i=e.sent,s=[{from:a,to:this.contractAddress,gas:y(i),value:y("0"),data:(r=this.contract.methods)[t].apply(r,Object(C.a)(n)).encodeABI()}],e.next=8,window.ethereum.request({method:"eth_sendTransaction",params:s});case 8:return u=e.sent,e.next=11,new Promise(this._getTransactionReceipt(u));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}();const B=[{inputs:[{internalType:"uint256[9]",name:"parameters",type:"uint256[9]"},{internalType:"address[4]",name:"addresses",type:"address[4]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"collector",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProtocolFeeCollection",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"symbolId",type:"uint256"},{indexed:!1,internalType:"int256",name:"tradeVolume",type:"int256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"Trade",type:"event"},{inputs:[{components:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"decimals",type:"uint256"},{internalType:"int256",name:"discount",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"cumulativePnl",type:"int256"}],internalType:"struct IPerpetualPool.BTokenInfo",name:"info",type:"tuple"}],name:"addBToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"int256",name:"multiplier",type:"int256"},{internalType:"int256",name:"feeRatio",type:"int256"},{internalType:"int256",name:"fundingRateCoefficient",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"cumulativeFundingRate",type:"int256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],internalType:"struct IPerpetualPool.SymbolInfo",name:"info",type:"tuple"}],name:"addSymbol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"targetPool",type:"address"}],name:"approvePoolMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"collectProtocolFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sourcePool",type:"address"}],name:"executePoolMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"lTokenAddress",type:"address"},{internalType:"address",name:"pTokenAddress",type:"address"},{internalType:"address",name:"routerAddress",type:"address"},{internalType:"address",name:"protocolFeeCollector",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getBToken",outputs:[{components:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"decimals",type:"uint256"},{internalType:"int256",name:"discount",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"cumulativePnl",type:"int256"}],internalType:"struct IPerpetualPool.BTokenInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getBTokenOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLengths",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"decimals0",type:"uint256"},{internalType:"int256",name:"minBToken0Ratio",type:"int256"},{internalType:"int256",name:"minPoolMarginRatio",type:"int256"},{internalType:"int256",name:"minInitialMarginRatio",type:"int256"},{internalType:"int256",name:"minMaintenanceMarginRatio",type:"int256"},{internalType:"int256",name:"minLiquidationReward",type:"int256"},{internalType:"int256",name:"maxLiquidationReward",type:"int256"},{internalType:"int256",name:"liquidationCutRatio",type:"int256"},{internalType:"int256",name:"protocolFeeCollectRatio",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getProtocolFeeAccrued",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getSymbol",outputs:[{components:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"int256",name:"multiplier",type:"int256"},{internalType:"int256",name:"feeRatio",type:"int256"},{internalType:"int256",name:"fundingRateCoefficient",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"cumulativeFundingRate",type:"int256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],internalType:"struct IPerpetualPool.SymbolInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getSymbolOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"liquidator",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"removeMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"setBTokenParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"setSymbolParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"}],S=[{inputs:[{internalType:"address",name:"lTokenAddress",type:"address"},{internalType:"address",name:"pTokenAddress",type:"address"},{internalType:"address",name:"liquidatorQualifierAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"addBToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"addLiquidityWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"addMarginWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"multiplier",type:"uint256"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"addSymbol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sourceRouter",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"liquidateWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorQualifier",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"removeLiquidityWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"removeMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"removeMarginWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"setBTokenParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"qualifierAddress",type:"address"}],name:"setLiquidatorQualifier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"poolAddress",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"setSymbolParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"tradeWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"}],F=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],E=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"numBTokens_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"int256",name:"liquidity",type:"int256"},{indexed:!1,internalType:"int256",name:"pnl",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumulativePnl",type:"int256"}],name:"UpdateAsset",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getAsset",outputs:[{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getAssets",outputs:[{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"numBTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumBTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset",name:"asset",type:"tuple"}],name:"updateAsset",outputs:[],stateMutability:"nonpayable",type:"function"}],R=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"numSymbols_",type:"uint256"},{internalType:"uint256",name:"numBTokens_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"}],name:"UpdateMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"symbolId",type:"uint256"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],name:"UpdatePosition",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getMargin",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getMargins",outputs:[{internalType:"int256[]",name:"",type:"int256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getPosition",outputs:[{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getPositions",outputs:[{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"numBTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"numSymbols",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumBTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumSymbols",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"int256",name:"amount",type:"int256"}],name:"updateMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"int256[]",name:"margins",type:"int256[]"}],name:"updateMargins",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"},{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position",name:"position",type:"tuple"}],name:"updatePosition",outputs:[],stateMutability:"nonpayable",type:"function"}],D=[{inputs:[{internalType:"address",name:"oracle_",type:"address"},{internalType:"address",name:"token_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"_I_",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"oracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],q=[{type:"constructor",stateMutability:"nonpayable",inputs:[{type:"address",name:"_aggregator",internalType:"address"},{type:"address",name:"_accessController",internalType:"address"}]},{type:"event",name:"AnswerUpdated",inputs:[{type:"int256",name:"current",internalType:"int256",indexed:!0},{type:"uint256",name:"roundId",internalType:"uint256",indexed:!0},{type:"uint256",name:"updatedAt",internalType:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"NewRound",inputs:[{type:"uint256",name:"roundId",internalType:"uint256",indexed:!0},{type:"address",name:"startedBy",internalType:"address",indexed:!0},{type:"uint256",name:"startedAt",internalType:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"OwnershipTransferRequested",inputs:[{type:"address",name:"from",internalType:"address",indexed:!0},{type:"address",name:"to",internalType:"address",indexed:!0}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{type:"address",name:"from",internalType:"address",indexed:!0},{type:"address",name:"to",internalType:"address",indexed:!0}],anonymous:!1},{type:"function",stateMutability:"nonpayable",outputs:[],name:"acceptOwnership",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"contract AccessControllerInterface"}],name:"accessController",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"address"}],name:"aggregator",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"confirmAggregator",inputs:[{type:"address",name:"_aggregator",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint8",name:"",internalType:"uint8"}],name:"decimals",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"string",name:"",internalType:"string"}],name:"description",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"int256",name:"",internalType:"int256"}],name:"getAnswer",inputs:[{type:"uint256",name:"_roundId",internalType:"uint256"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint80",name:"roundId",internalType:"uint80"},{type:"int256",name:"answer",internalType:"int256"},{type:"uint256",name:"startedAt",internalType:"uint256"},{type:"uint256",name:"updatedAt",internalType:"uint256"},{type:"uint80",name:"answeredInRound",internalType:"uint80"}],name:"getRoundData",inputs:[{type:"uint80",name:"_roundId",internalType:"uint80"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"getTimestamp",inputs:[{type:"uint256",name:"_roundId",internalType:"uint256"}]},{type:"function",stateMutability:"view",outputs:[{type:"int256",name:"",internalType:"int256"}],name:"latestAnswer",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"latestRound",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint80",name:"roundId",internalType:"uint80"},{type:"int256",name:"answer",internalType:"int256"},{type:"uint256",name:"startedAt",internalType:"uint256"},{type:"uint256",name:"updatedAt",internalType:"uint256"},{type:"uint80",name:"answeredInRound",internalType:"uint80"}],name:"latestRoundData",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"latestTimestamp",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"address payable"}],name:"owner",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"contract AggregatorV2V3Interface"}],name:"phaseAggregators",inputs:[{type:"uint16",name:"",internalType:"uint16"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint16",name:"",internalType:"uint16"}],name:"phaseId",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"proposeAggregator",inputs:[{type:"address",name:"_aggregator",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"contract AggregatorV2V3Interface"}],name:"proposedAggregator",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"uint80",name:"roundId",internalType:"uint80"},{type:"int256",name:"answer",internalType:"int256"},{type:"uint256",name:"startedAt",internalType:"uint256"},{type:"uint256",name:"updatedAt",internalType:"uint256"},{type:"uint80",name:"answeredInRound",internalType:"uint80"}],name:"proposedGetRoundData",inputs:[{type:"uint80",name:"_roundId",internalType:"uint80"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint80",name:"roundId",internalType:"uint80"},{type:"int256",name:"answer",internalType:"int256"},{type:"uint256",name:"startedAt",internalType:"uint256"},{type:"uint256",name:"updatedAt",internalType:"uint256"},{type:"uint80",name:"answeredInRound",internalType:"uint80"}],name:"proposedLatestRoundData",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"setController",inputs:[{type:"address",name:"_accessController",internalType:"address"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"transferOwnership",inputs:[{type:"address",name:"_to",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"uint256",name:"",internalType:"uint256"}],name:"version",inputs:[]}];var L=function(e){Object(M.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(w.a)(this,n),(r=t.call(this,e,a,i)).contractAbi=B,r.bTokenLength=0,r.symbolLength=0,r.lTokenAddress="",r.pTokenAddress="",r.routerAddress="",r.protocolFeeCollector="",r.protocolFeeAccrued=0,r}return Object(O.a)(n,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=4;break}return e.next=3,Object(j.a)(Object(A.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getLengths(),this.getAddresses(),this.getParameters()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLengths",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._call("getLengths");case 3:(t=e.sent)[0]&&t[1]&&(this.bTokenLength=parseInt(t[0]),this.symbolLength=parseInt(t[1])),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error("PerpetualPool#_getLength error: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAddresses",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._call("getAddresses");case 3:t=e.sent,this.lTokenAddress=t.lTokenAddress,this.pTokenAddress=t.pTokenAddress,this.routerAddress=t.routerAddress,this.protocolFeeCollector=t.protocolFeeCollector,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),new Error("PerpetualPool#_getAddress error: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getParameters",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getParameters");case 2:return t=e.sent,e.abrupt("return",{decimals0:t.decimals0,minBToken0Ratio:l(t.minBToken0Ratio),minPoolMarginRatio:l(t.minPoolMarginRatio),minInitialMarginRatio:l(t.minInitialMarginRatio),minMaintenanceMarginRatio:l(t.minMaintenanceMarginRatio),minLiquidationReward:l(t.minLiquidationReward),maxLiquidationReward:l(t.maxLiquidationReward),liquidationCutRatio:l(t.liquidationCutRatio),protocolFeeCollectRatio:l(t.protocolFeeCollectRatio)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProtocolFeeAccrued",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getProtocolFeeAccrued");case 2:t=e.sent,this.protocolFeeAccrued=l(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBToken",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._call("getBToken",[t]);case 3:return n=e.sent,e.abrupt("return",{bTokenAddress:n.bTokenAddress,swapperAddress:n.bTokenAddress,oracleAddress:n.oracleAddress,decimals:n.decimals,discount:l(n.discount),price:l(n.price),liquidity:l(n.liquidity),pnl:l(n.pnl),cumulativePnl:l(n.cumulativePnl)});case 7:throw e.prev=7,e.t0=e.catch(0),new Error("PerpetualPool#getBToken error: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBTokenOracle",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getBTokenOracle",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._call("getSymbol",[t]);case 3:return n=e.sent,e.abrupt("return",{symbol:n.symbol,oracleAddress:n.oracleAddress,multiplier:l(n.multiplier),feeRatio:l(n.feeRatio),fundingRateCoefficient:l(n.fundingRateCoefficient),price:l(n.price),cumulativeFundingRate:l(n.cumulativeFundingRate),tradersNetVolume:l(n.tradersNetVolume),tradersNetCost:l(n.tradersNetCost)});case 7:throw e.prev=7,e.t0=e.catch(0),new Error("PerpetualPool#getSymbol error: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbolOracle",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getSymbolOracle",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getTimeStamp",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._init();case 2:return e.next=4,this.web3.eth.getBlock(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_calculateFee",value:function(e,t,n,a){return o(e).abs().times(t).times(n).times(a).toString()}},{key:"_getBlockInfo",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._init();case 2:return e.next=4,this.web3.eth.getBlock(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a,r,i,s,u,o,c,p,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3&&void 0!==l[3]?l[3]:0,e.next=5,this._init();case 5:i=[],s=["56","97"].includes(this.chainId)?999:4999,a+s>r&&(s=r-a);case 8:if(!(a<=r)){e.next=18;break}return e.next=11,this.contract.getPastEvents(t,{filter:n,fromBlock:a,toBlock:a+s});case 11:u=e.sent,o=Object(k.a)(u);try{for(o.s();!(c=o.n()).done;)p=c.value,i.push(p)}catch(d){o.e(d)}finally{o.f()}(a+=s+1)+s>r&&(s=r-a),e.next=8;break;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_),U=function(e){Object(M.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(w.a)(this,n),(r=t.call(this,e,a,i)).contractAbi=S,r.poolAddress="",r}return Object(O.a)(n,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=4;break}return e.next=3,Object(j.a)(Object(A.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pool",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("pool");case 2:return this.poolAddress=e.sent,e.abrupt("return",this.poolAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addLiquidity",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("addLiquidity",[n,d(a)],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,this._transact("removeLiquidity",[n,a.MAX_INT256],t);case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,this._transact("removeLiquidity",[n,d(r)],t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"addMargin",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("addMargin",[n,d(a)],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"removeMargin",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:if(!i){e.next=10;break}return console.log("->",a.MAX_INT256),e.next=7,this._transact("removeMargin",[n,a.MAX_INT256],t);case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,this._transact("removeMargin",[n,d(r)],t);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"trade",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("trade",[n,d(a)],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"addLiquidityWithPrices",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("addLiquidityWithPrices",[n,d(a),r],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"removeLiquidityWithPrices",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=6;break}return e.next=3,this._transact("removeLiquidityWithPrices",[n,a.MAX_INT256,i],t);case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,this._transact("removeLiquidityWithPrices",[n,d(r),i],t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"addMarginWithPrices",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("addMarginWithPrices",[n,d(a),r],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"removeMarginWithPrices",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:if(!s){e.next=9;break}return e.next=6,this._transact("removeMarginWithPrices",[n,a.MAX_INT256,i],t);case 6:return e.abrupt("return",e.sent);case 9:return e.next=11,this._transact("removeMarginWithPrices",[n,d(r),i],t);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"tradeWithPrices",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poolAddress){e.next=3;break}return e.next=3,this.pool();case 3:return e.next=5,this._transact("tradeWithPrices",[n,d(a),r],t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()}]),n}(_),N=n(15),V=function(e){Object(M.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(w.a)(this,n),(r=t.call(this,e,a,i)).contractAbi=F,r}return Object(O.a)(n,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=4;break}return e.next=3,Object(j.a)(Object(A.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"symbol",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("symbol");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decimals",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("decimals");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_balanceOf",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("balanceOf",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._balanceOf(t),this.decimals()]);case 2:return n=e.sent,a=Object(N.a)(n,2),r=a[0],i=a[1],e.abrupt("return",o(r,-i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("totalSupply");case 2:return t=e.sent,e.abrupt("return",l(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUnlocked",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("allowance",[t,n]);case 2:return a=e.sent,e.abrupt("return",o(a).gt(0));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unlock",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._transact("approve",[n,a.MAX_UINT256],t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(_),H=function(e){return{liquidity:l(e[0]),pnl:l(e[1]),lastCumulativePnl:l(e[2])}},W=function(e){Object(M.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(w.a)(this,n),(r=t.call(this,e,a,i)).contractAbi=E,r}return Object(O.a)(n,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=4;break}return e.next=3,Object(j.a)(Object(A.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("balanceOf",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pool",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("pool");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("exists",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAsset",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getAsset",[t,n]);case 2:if(a=e.sent,!Array.isArray(a)){e.next=7;break}return e.abrupt("return",H(a));case 7:throw new Error("LToken#getAsset: invalid result with (".concat(t," ").concat(n,")"));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAssets",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getAssets",[t]);case 2:if(n=e.sent,!Array.isArray(n)){e.next=7;break}return e.abrupt("return",n.map((function(e){return H(e)})));case 7:throw new Error("LToken#getAsset: invalid result with (".concat(t,")"));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_),$=function(e){return{volume:l(e.volume),cost:l(e.cost),lastCumulativeFundingRate:l(e.lastCumulativeFundingRate)}},z=function(e){Object(M.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(w.a)(this,n),(r=t.call(this,e,a,i)).contractAbi=R,r}return Object(O.a)(n,[{key:"_init",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.web3){e.next=4;break}return e.next=3,Object(j.a)(Object(A.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pool",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("pool");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("balanceOf",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exists",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("exists",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMargin",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getMargin",[t,n]);case 2:return a=e.sent,e.abrupt("return",l(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMargins",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getMargins",[t]);case 2:if(n=e.sent,!Array.isArray(n)){e.next=5;break}return e.abrupt("return",n.map((function(e){return l(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPosition",value:function(){var e=Object(b.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getPosition",[t,n]);case 2:if(a=e.sent,!Array.isArray(a)){e.next=7;break}return e.abrupt("return",$(a));case 7:throw new Error("PToken#getMargin: invalid result with (".concat(t,")"));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPositions",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getPositions",[t]);case 2:if(n=e.sent,!Array.isArray(n)){e.next=5;break}return e.abrupt("return",n.map((function(e){return $(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_);class G extends _{constructor(e,t,n,a,r){super(e,t,r),this.contractAbi=D,this.symbol=n,this.decimal=a}async _init(){this.web3||(await super._init(),this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress))}async getPrice(){const e=await this._call("_I_");return o(e,`-${this.decimal}`).toString()}}class K extends _{constructor(e,t,n,a,r){super(e,t,r),this.contractAbi=q,this.symbol=n,this.decimal=a}async _init(){this.web3||(await super._init(),this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress))}async getPrice(){const e=await this._call("latestRoundData");if(e&&e.answer)return o(e.answer,`-${this.decimal}`).toString()}}const X=function(){let e=null;return()=>{if(null!==e)return e;if(void 0!==typeof window.ethereum)return e=new i.a(window.ethereum),e;throw new Error("Please install MetaMask first")}}(),Y=function(){const e={};return{async getOrSet(t){if(Object.keys(e).includes(t))return e[t];console.log(`==== web3Factory(${t}), please caution the access limits ===`);const n=await(async e=>{e=T(e);const t=Object(a.getChainProviderUrls)(e);if(t.length>0)return["56","128","97","256"].includes(e)?await h(t):t[0];throw new Error(`Cannot find the chain provider url with chainId: ${e}`)})(t);return e[t]=new i.a(new i.a.providers.HttpProvider(n)),e[t]}}}(),J=function(){const e={};return(t,n,a)=>{const r=a?`${n}.useInfura`:n;return Object.keys(e).includes(r)||(e[r]=new L(t,n,a)),e[r]}}(),Q=function(){const e={};return(t,n,a)=>{const r=a?`${n}.useInfura`:n;return Object.keys(e).includes(r)||(e[r]=new U(t,n,a)),e[r]}}(),Z=function(){const e={};return(t,n,a)=>{const r=a?`${n}.useInfura`:n;return Object.keys(e).includes(r)||(e[r]=new V(t,n,a)),e[r]}}(),ee=function(){const e={};return(t,n,a)=>{const r=a?`${n}.useInfura`:n;return Object.keys(e).includes(r)||(e[r]=new W(t,n,a)),e[r]}}(),te=function(){const e={};return(t,n,a)=>{const r=a?`${n}.useInfura`:n;return Object.keys(e).includes(r)||(e[r]=new z(t,n,a)),e[r]}}(),ne=function(){const e={};return(t,n,a,r,i)=>{const s=i?`${n}.useInfura`:n;return Object.keys(e).includes(s)||(["80001","137"].includes(t)?e[s]=new K(t,n,a,r,i):e[s]=new G(t,n,a,r,i)),e[s]}}(),ae=async(e,t,n=!1)=>{e=T(e);const r=Object(a.getOracleConfig)(e,t);if(r&&r.address){const a=ne(e,r.address,t,r.decimal,n);return await a.getPrice()}};var re=function(e,t,n){return e.eq(0)?o(0):t.div(e).div(n)},ie=function(e,t,n,a,r,i){var s=n.minus(t),u=e.gt(0)?s.div(o(1).minus(i)).minus(a).div(e).div(r):s.div(o(1).plus(i)).minus(a).div(e).div(r);return u=c(u,o(0))},se=function(e,t,n,a){var r=t;return e.gte(r)?n.minus(a).gte(0)?{success:!0}:{success:!1,error:"Pool has insufficient liquidity"}:{success:!1,error:"Trader has insufficient margin"}},ue=function(e,t,n,a,r){if(g(e,t,n,a,r))return o(a).eq(0)?o(0):o(e).times(t).times(n).times(r).div(a);throw new Error("calculateFundingRate: invalid args: ".concat([e,t,n,a,r]))},oe=function(e,t){var n=(e=>{const t=Object(a.getAnnualBlockNumberConfig)();if(t[e])return parseInt(t[e]);throw new Error(`Invalid annual block number with chainId: ${e}`)})(e);return o(t).times(n)},ce=function(e){return e.reduce((function(e,t){return e.plus(o(t.liquidity).times(t.price).times(t.discount).plus(t.pnl))}),o(0))},pe=function(e,t,n,a){e[t].liquidity=o(e[t].liquidity).plus(n);var r=ce(e),i=e[0],s=o(i.liquidity).times(i.price).times(i.discount).plus(i.pnl);return!r.eq(0)&&s.div(r).times("1").lt(a)?{success:!1,error:"Trader has insufficient bToken0"}:{success:!0}},le=function(e,t,n,a,r,i){o(n).gte(a)?e[t].liquidity=o(e[t].liquidity).minus(a):e[t].liquidity=o(e[t].liquidity).minus(n);for(var s=ce(e),u=o(0),c=0;c<r.length;c++){var p=r[c];if(!o(p.tradersNetVolume).eq(0)){var l=o(p.tradersNetVolume).times(p.price).times(p.multiplier);s=s.plus(p.tradersNetCost).minus(l),u=u.plus(l.abs())}}return!u.eq(0)&&s.div(u).times("1").lt(i)?{success:!1,error:"Trader has insufficient liquidity"}:{success:!0}},de=function(e,t,n,a,r,i){return o(n).eq(0)?t:c(p(e.liquidity.minus(i.times(n).plus(a).minus(r).div(e.price).div(e.discount)).times("0.98"),t),o(0))},ye=n(2),fe=n(8),me=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B,S,F,E,R;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=Object(a.getPoolConfig)(n,i),c=u.lToken,p=J(t,n,s),l=ee(t,c,s),d=Object(a.getFilteredPoolConfigList)(n,null,"0").sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),y=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),f=d.map((function(e){return e.bTokenId})),b=y.map((function(e){return e.symbolId})),e.next=10,Promise.all([p.getParameters(),p.getBToken(i),l.getAsset(r,i)]);case 10:for(v=e.sent,h=Object(N.a)(v,3),T=h[0],g=h[1],x=h[2],k=T.minPoolMarginRatio,w=[],O=0;O<f.length;O++)w.push(p.getBToken(f[O]));return e.next=20,Promise.all(w);case 20:for(j=e.sent,w=[],A=0;A<b.length;A++)w.push(p.getSymbol(b[A]));return e.next=25,Promise.all(w);case 25:return M=e.sent,I=M.reduce((function(e,t){return e.plus(o(t.tradersNetVolume).times(t.price).times(t.multiplier).abs())}),o(0)),C=M.reduce((function(e,t){return e.plus(o(t.tradersNetVolume).times(t.price).times(t.multiplier).minus(t.tradersNetCost))}),o(0)),P=j.reduce((function(e,t,n){return n===parseInt(i)?e.plus(t.pnl):e.plus(o(t.liquidity).times(t.price).times(t.discount).plus(t.pnl))}),o(0)),_=g.liquidity,B=x.liquidity,S=x.pnl,F=x.lastCumulativePnl,E=de(j[i],B,I,C,P,k),R=S.plus(o(j[i].cumulativePnl).minus(F).times(B)),e.abrupt("return",{poolLiquidity:_.toString(),shares:B.toString(),pnl:R.toString(),maxRemovableShares:E.toString()});case 36:e.prev=36,e.t0=e.catch(0),console.log(e.t0);case 39:return e.abrupt("return",{poolLiquidity:"",shares:"",pnl:"",maxRemovableShares:""});case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){var r,i,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(fe.e)(),e.prev=1,e.next=4,r.getValues(["".concat(t,".").concat(n,".liquidity").concat(a)]).catch((function(e){return console.log("getPoolLiquidity",e)}));case 4:if(!(i=e.sent)){e.next=8;break}return s=Object(N.a)(i,1),u=s[0],e.abrupt("return",{liquidity:l(u).toString(),symbol:""});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.abrupt("return",{liquidity:"",symbol:""});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ve=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){var r,i,s,u,o,c,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(fe.e)(!0),e.prev=1,i=Object(ye.r)(t),e.next=5,r.getValues(["".concat(i,".").concat(n,".apy").concat(a),"".concat(i,".").concat(n,".volume.1h"),"".concat(i,".").concat(n,".volume.24h")]).catch((function(e){return console.log("getPoolInfoApy",e)}));case 5:if(!(s=e.sent)){e.next=9;break}return u=Object(N.a)(s,3),o=u[0],c=u[1],p=u[2],e.abrupt("return",{apy:l(o).toString(),volume1h:l(c).toString(),volume24h:l(p).toString()});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l,d,y,f,b,v,h,T,g,x;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=Object(a.getPoolConfig)(n,s),o=u.router,c=Q(t,o),p=J(t,n),l=Object(a.getFilteredPoolConfigList)(n,null,"0").sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),d=l.map((function(e){return e.bTokenId})),y=[],f=0;f<d.length;f++)y.push(p.getBToken(d[f]));return e.next=9,Promise.all(y);case 9:return b=e.sent,e.next=12,p.getParameters();case 12:if(v=e.sent,h=v.minBToken0Ratio,!(T=pe(b,s,i,h)).success){e.next=28;break}return e.prev=16,e.next=19,c.addLiquidity(r,s,i);case 19:x=e.sent,g={success:!0,transaction:x},e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),g={success:!1,error:e.t0};case 26:e.next=29;break;case 28:g={success:!1,error:T.error};case 29:return e.abrupt("return",g);case 30:case"end":return e.stop()}}),e,null,[[16,23]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=B.length>5&&void 0!==B[5]&&B[5],o=Object(a.getPoolConfig)(n,s),c=o.router,p=Q(t,c),l=Object(a.getPoolConfig)(n,s),d=l.lToken,y=J(t,n),f=ee(t,d),e.next=8,f.getAsset(r,s);case 8:for(b=e.sent,v=b.liquidity,h=Object(a.getFilteredPoolConfigList)(n,null,"0").sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),T=h.map((function(e){return e.bTokenId})),g=[],x=0;x<T.length;x++)g.push(y.getBToken(T[x]));return e.next=16,Promise.all(g);case 16:for(k=e.sent,w=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),O=w.map((function(e){return e.symbolId})),g=[],j=0;j<O.length;j++)g.push(y.getSymbol(O[j]));return e.next=23,Promise.all(g);case 23:return A=e.sent,e.next=26,y.getParameters();case 26:if(M=e.sent,I=M.minPoolMarginRatio,!(C=le(k,s,i,v,A,I)).success){e.next=42;break}return e.prev=30,e.next=33,p.removeLiquidity(r,s,i,u);case 33:_=e.sent,P={success:!0,transaction:_},e.next=40;break;case 37:e.prev=37,e.t0=e.catch(30),P={success:!1,error:e.t0};case 40:e.next=43;break;case 42:P={success:!1,error:C.error};case 43:return e.abrupt("return",P);case 44:case"end":return e.stop()}}),e,null,[[30,37]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),ge=function(){var e={};return{get:function(t,n){var a="".concat(t,".").concat(n);if(Object.keys(e).includes(a)){var r=e[a].split("|");return Object(N.a)(r,1)[0]}console.log("please init priceCache first")},set:function(t,n,a){if(!isNaN(parseFloat(a))){var r=Date.now().toString();e["".concat(t,".").concat(n)]="".concat(a,"|").concat(r)}}}}(),xe=function(){var e={};return{get:function(t,n,a){var r="".concat(t,".").concat(n,".").concat(a);if(Object.keys(e).includes(r))return e[r];console.log("fundingRateCache: key is not in exist: ".concat(r))},set:function(t,n,a,r){var i="".concat(t,".").concat(n,".").concat(a);e[i]=r}}}(),ke=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=Object(a.getPoolConfig)(n,r,i),o=u.symbol,c=u.bTokenSymbol,p=J(t,n,s),e.next=5,Promise.all([p.getSymbol(i),p.getParameters()]);case 5:return l=e.sent,d=Object(N.a)(l,2),y=d[0],f=d[1],b=y.multiplier,v=y.feeRatio,h=y.fundingRateCoefficient,T=f.minPoolMarginRatio,g=f.minInitialMarginRatio,x=f.minMaintenanceMarginRatio,k=f.minLiquidationReward,w=f.maxLiquidationReward,O=f.liquidationCutRatio,j=f.protocolFeeCollectRatio,e.abrupt("return",{symbol:o,bSymbol:c,multiplier:b.toString(),feeRatio:v.toString(),fundingRateCoefficient:h.toString(),minPoolMarginRatio:T.toString(),minInitialMarginRatio:g.toString(),minMaintenanceMarginRatio:x.toString(),minLiquidationReward:k.toString(),maxLiquidationReward:w.toString(),liquidationCutRatio:O.toString(),protocolFeeCollectRatio:j.toString()});case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:return e.abrupt("return",{symbol:"",bSymbol:"",multiplier:"",feeRatio:"",fundingRateCoefficient:"",minPoolMarginRatio:"",minInitialMarginRatio:"",minMaintenanceMarginRatio:"",minLiquidationReward:"",maxLiquidationReward:"",liquidationCutRatio:"",protocolFeeCollectRatio:""});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),we=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B,S,F,E,R,D,q,L,U,V,H,W,$;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=Object(a.getFilteredPoolConfigList)(n,null,i).sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),c=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),p=u.map((function(e){return e.bTokenId})),l=c.map((function(e){return e.symbolId})),d=c.map((function(e){return e.symbol})),y=J(t,n,s),f=Object(a.getPoolConfig)(n,null,i),b=f.pToken,v=te(t,b,s),e.next=11,Promise.all([y.getSymbol(i),y.getParameters(),v.getPosition(r,i),v.getMargins(r),v.getPositions(r)]);case 11:for(h=e.sent,T=Object(N.a)(h,5),g=T[0],x=T[1],k=T[2],w=T[3],O=T[4],j=k.volume,A=k.cost,M=g.multiplier,I=x.minInitialMarginRatio,C=x.minMaintenanceMarginRatio,P=[],_=0;_<p.length;_++)P.push(y.getBToken(p[_]));return e.next=25,Promise.all(P);case 25:for(B=e.sent,S=B.reduce((function(e,t,n){return e.plus(o(t.price).times(t.discount).times(w[n]))}),o(0)),P=[],F=0;F<l.length;F++)P.push(y.getSymbol(l[F]));return e.next=31,Promise.all(P);case 31:for(E=e.sent,P=[],R=0;R<d.length;R++)P.push(ae(t,d[R],s));return e.next=36,Promise.all(P);case 36:return D=e.sent,q=D[i],ge.set(n,i,q),L=E.reduce((function(e,t,n){return e.plus(o(D[n]).times(t.multiplier).times(O[n].volume).times(I).abs())}),o(0)),U=o(j).abs().times(M).times(D[i]).times(I),V=E.reduce((function(e,t,n){return e.plus(o(D[n]).times(t.multiplier).times(O[n].volume).minus(O[n].cost))}),o(0)),H=E.map((function(e,t){return[e.symbol,o(D[t]).times(e.multiplier).times(O[t].volume).minus(O[t].cost).toString()]})),W=O.reduce((function(e,t){return e.plus(o(t.cost))}),o(0)),$=E.reduce((function(e,t,n){return n!==parseInt(i)?e.plus(o(O[n].volume).times(D[n]).times(t.multiplier)):e}),o(0)),e.abrupt("return",{price:q,volume:j.toString(),averageEntryPrice:re(j,A,M).toString(),margin:S.toString(),marginHeld:L.toString(),marginHeldBySymbol:U.toString(),unrealizedPnl:V.toString(),unrealizedPnlList:H,liquidationPrice:ie(j,S,W,$,M,C).toString()});case 48:e.prev=48,e.t0=e.catch(0),console.log(e.t0);case 51:return e.abrupt("return",{volume:"",averageEntryPrice:"",margin:"",marginHeld:"",unrealizedPnl:"",liquidationPrice:""});case 52:case"end":return e.stop()}}),e,null,[[0,48]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(a.getPoolConfig)(n,i),o=u.bToken,e.next=3,Z(t,o,s).balanceOf(r);case 3:return c=e.sent,e.abrupt("return",c.toString());case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(a.getPoolConfig)(n,i),o=u.bToken,e.next=3,Z(t,o,s);case 3:return c=e.sent,e.abrupt("return",c.isUnlocked(r,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,c,p,l,d,y,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=ge.get(n,i),c=Object(a.getPoolConfig)(n,null,i),p=c.symbol,u){e.next=7;break}return e.next=5,ae(t,p,s);case 5:u=e.sent,ge.set(n,i,u);case 7:if((l=xe.get(t,n,i))&&l.multiplier){e.next=12;break}return e.next=11,Ce(t,n,i,s);case 11:l=xe.get(t,n,i);case 12:return y=(d=l).multiplier,f=d.feeRatio,e.abrupt("return",o(r).abs().times(u).times(y).times(f).toString());case 14:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s,u,c){var p,l,d,y,f,b,v,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Object(a.getPoolConfig)(n,null,u),l=p.symbol,d=J(t,n,c),e.next=4,Promise.all([ae(t,l,c),d.getSymbol(u)]);case 4:return y=e.sent,f=Object(N.a)(y,2),b=f[0],v=f[1],ge.set(n,u,b),h=v.multiplier,e.abrupt("return",o(i).abs().times(b).times(h).div(o(s)).toString());case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,s,u){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe.get(t,n,a));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){var s,u,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B,S,F,E;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=J(t,n,i),u=Object(a.getFilteredPoolConfigList)(n,null,r).sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),c=Object(a.getPoolConfig)(n,null,r),p=c.symbol,l=u.map((function(e){return e.bTokenId})),d=[],y=0;y<l.length;y++)d.push(s.getBToken(y));return e.next=8,Promise.all(d);case 8:return f=e.sent,b=f.reduce((function(e,t){return e.plus(o(t.liquidity).times(t.price).times(t.discount).plus(t.pnl))}),o(0)),e.next=12,Promise.all([ae(t,p,i),s.getSymbol(r),s.getParameters()]);case 12:for(v=e.sent,h=Object(N.a)(v,3),T=h[0],g=h[1],x=h[2],ge.set(n,r,T),k=g.multiplier,w=g.fundingRateCoefficient,O=g.tradersNetVolume,j=g.feeRatio,A=x.minPoolMarginRatio,M=ue.apply(void 0,[O,T,k,b,w]),I=oe(t,M),C=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),P=C.map((function(e){return e.symbolId})),_=[],B=0;B<P.length;B++)_.push(s.getSymbol(P[B]));return e.next=29,Promise.all(_);case 29:return S=e.sent,F=S.reduce((function(e,t){return e.plus(o(t.tradersNetVolume).times(t.price).times(t.multiplier).times(A).abs())}),o(0)),E={price:T,multiplier:k.toString(),feeRatio:j.toString(),tradersNetVolume:O.toString(),liquidity:b.toString(),fundingRateCoefficient:w.toString(),minPoolMarginRatio:A.toString(),fundingRatePerBlock:M,fundingRate:I,liquidityUsed:F.div(b)},xe.set(t,n,r,E),e.abrupt("return",E);case 34:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r){var i,s,u,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce(t,n,a,r);case 3:return i=e.sent,s=i.fundingRate,u=i.fundingRatePerBlock,o=i.liquidity,c=i.tradersNetVolume,e.abrupt("return",{fundingRate0:s.times(100).toString(),fundingRatePerBlock:u.toString(),liquidity:o.toString(),volume:"-",tradersNetVolume:c.toString()});case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",{fundingRate0:"",fundingRatePerBlock:"",liquidity:"",volume:"",tradersNetVolume:""});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),_e=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i){var s,u,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=xe.get(t,n,r)){e.next=6;break}return e.next=5,Ce(t,n,r,i);case 5:s=e.sent;case 6:return u=[o(s.tradersNetVolume).plus(a).toString(),s.price,s.multiplier,s.liquidity,s.fundingRateCoefficient],c=ue.apply(void 0,u),c=oe(t,c),e.abrupt("return",{fundingRate1:c.times(100).toString()});case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:return e.abrupt("return",{fundingRate1:""});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Be=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=xe.get(t,n,a)){e.next=6;break}return e.next=5,Ce(t,n,a,r);case 5:i=e.sent;case 6:return e.abrupt("return",{liquidityUsed0:i.liquidityUsed.times(100).toString()});case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.abrupt("return",{liquidityUsed0:""});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Se=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,c,p,l,d,y,f,b,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=xe.get(t,n,i)){e.next=6;break}return e.next=5,Ce(t,n,i,s);case 5:u=e.sent;case 6:for(c=J(t,n,s),p=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),l=p.map((function(e){return e.symbolId})),d=[],y=0;y<l.length;y++)d.push(c.getSymbol(l[y]));return e.next=13,Promise.all(d);case 13:return f=e.sent,b=f.reduce((function(e,t,n){return n===parseInt(i)?e.plus(o(t.price).times(t.multiplier).times(t.tradersNetVolume.plus(r)).abs()):e.plus(o(t.price).times(t.multiplier).times(t.tradersNetVolume).abs())}),o(0)),v=b.times(u.minPoolMarginRatio).div(u.liquidity),e.abrupt("return",{liquidityUsed1:v.times(100).toString()});case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:return e.abrupt("return",{liquidityUsed1:""});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B,S,F,E,R,D;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,u=Object(a.getFilteredPoolConfigList)(n,null,i).sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),l=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),d=J(t,n,s),y=Object(a.getPoolConfig)(n,null,i),f=y.pToken,b=te(t,f,s),v=u.map((function(e){return{bTokenId:e.bTokenId,bTokenSymbol:e.bTokenSymbol,bTokenAddress:e.bToken}})),h=[],T=0;T<v.length;T++)h.push(Z(t,v[T].bTokenAddress,s).balanceOf(r));return e.next=11,Promise.all(h);case 11:for(g=e.sent,x=0;x<v.length;x++)v[x].walletBalance=g[x].toString();return k=u.map((function(e){return e.bTokenId})),w=l.map((function(e){return e.symbolId})),e.next=17,Promise.all([b.getMargins(r),b.getPositions(r),d.getParameters()]);case 17:for(O=e.sent,j=Object(N.a)(O,3),A=j[0],M=j[1],I=j[2],C=I.minInitialMarginRatio,P=[],_=0;_<k.length;_++)P.push(d.getBToken(k[_]));return e.next=27,Promise.all(P);case 27:for(B=e.sent,S=B.reduce((function(e,t,n){return e.plus(o(t.price).times(t.discount).times(A[n]))}),o(0)),P=[],F=0;F<w.length;F++)P.push(d.getSymbol(w[F]));return e.next=33,Promise.all(P);case 33:return E=e.sent,R=E.reduce((function(e,t,n){return e.plus(o(t.price).times(t.multiplier).times(M[n].volume).abs().times(C))}),o(0)),D=E.reduce((function(e,t,n){return e.plus(o(t.price).times(t.multiplier).times(M[n].volume).minus(M[n].cost))}),o(0)),v=v.map((function(e,t){return isNaN(parseFloat(B[t].price))&&"0"===B[t].price?e.availableBalance="-":e.availableBalance=c(p(S.minus(R).plus(D).div(B[t].price).div(B[t].discount),A[t]),o(0)).toString(),e})),e.abrupt("return",v);case 40:e.prev=40,e.t0=e.catch(0),console.log(e.t0);case 43:return e.abrupt("return",[]);case 44:case"end":return e.stop()}}),e,null,[[0,40]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i,s){var u,o,c,p,d,y,f,b,v,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=l(n.tradeVolume),e.next=3,t._getTimeStamp(a);case 3:return o=e.sent,c=u.gt(0)?"LONG":"SHORT",p=l(n.price),d="".concat(+o.timestamp,"000"),y=n.symbolId,f=t._calculateFee(u,p,i[parseInt(y)],s[parseInt(y)]),b=u.abs().times(p).times(i[parseInt(y)]),v=u.abs(),h={direction:c,symbolId:y,price:p.toString(),notional:b.toString(),volume:v.toString(),transactionFee:f.toString(),transactionHash:r.toString(),time:d},e.abrupt("return",h);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,s){return e.apply(this,arguments)}}(),De=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l,d,y,f,b,v,h,T,g,x,k;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),o=u.map((function(e){return e.symbolId})),c=J(t,n),e.next=5,c._getBlockInfo("latest");case 5:for(p=e.sent,s=parseInt(s),l=[],d=0;d<o.length;d++)l.push(c.getSymbol(o[d]));return e.next=11,Promise.all(l);case 11:return y=e.sent,f=y.map((function(e){return e.multiplier.toString()})),b=y.map((function(e){return e.feeRatio.toString()})),v={owner:r},e.next=17,c._getPastEvents("Trade",v,s,p.number);case 17:h=e.sent,T=[],h=h.filter((function(e){return e.returnValues.symbolId===i})),g=0;case 21:if(!(g<h.length)){e.next=30;break}return x=h[g],e.next=25,Re(c,x.returnValues,x.blockNumber,x.transactionHash,f,b);case 25:k=e.sent,T.unshift(k);case 27:g++,e.next=21;break;case 30:return e.abrupt("return",T);case 31:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),qe=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){var s,u,o,c,p,d,y,f,b,v,h,T,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=[],e.next=4,Ee("".concat(Object(x.getRestServerConfig)(x.DeriEnv.get()),"/trade_history/").concat(t,"/").concat(n,"/").concat(r,"/").concat(i));case 4:if((o=e.sent)&&o.success&&(s=parseInt(o.data.tradeHistoryBlock),o.data.tradeHistory&&Array.isArray(o.data.tradeHistory)&&(u=o.data.tradeHistory)),u.length>0&&(u=u.filter((function(e){return e})).map((function(e){return{direction:e.direction.trim(),symbolId:e.symbolId,price:l(e.price).toString(),notional:l(e.notional).toString(),volume:l(e.volume).toString(),transactionFee:l(e.transactionFee).toString(),transactionHash:e.transactionHash,time:e.time.toString()}}))),0===s){e.next=17;break}return e.next=10,Promise.all([De(t,n,r,i,s+1)]);case 10:return c=e.sent,p=Object(N.a)(c,1),d=p[0],y=d.concat(u),e.abrupt("return",y.sort((function(e,t){return parseInt(t.time)-parseInt(e.time)})));case 17:return f=Object(a.getPoolConfig)(n,null,i),b=f.initialBlock,s=parseInt(b),e.next=21,Promise.all([De(t,n,r,i,s+1)]);case 21:return v=e.sent,h=Object(N.a)(v,1),T=h[0],g=T,e.abrupt("return",g.sort((function(e,t){return parseInt(t.time)-parseInt(e.time)})));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0);case 31:return e.abrupt("return",[]);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Le=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){var s,u,o,c,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(a.getPoolConfig)(n,i),u=s.bToken,o=Z(t,u),e.prev=2,e.next=5,o.unlock(r,n);case 5:p=e.sent,c={success:!0,transaction:p},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c={success:!1,error:e.t0};case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(a.getPoolConfig)(n,s),o=u.router,c=Q(t,o),e.prev=2,e.next=5,c.addMargin(r,s,i);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,o,c,p,l,d,y=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=y.length>5&&void 0!==y[5]&&y[5],o=Object(a.getPoolConfig)(n,s),c=o.router,p=Q(t,c),e.prev=3,e.next=6,p.removeMargin(r,s,i,u);case 6:d=e.sent,l={success:!0,transaction:d},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),l={success:!1,error:e.t0};case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i,s){var u,c,p,l,d,y,f,b,v,h,T,g,x,k,w,O,j,A,M,I,C,P,_,B,S,F,E,R,D,q;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(a.getPoolConfig)(n),c=u.router,p=Q(t,c),l=J(t,n),d=Object(a.getPoolConfig)(n,null,s),y=d.pToken,f=te(t,y),e.next=7,Promise.all([l.getParameters(),f.getPositions(r)]);case 7:return b=e.sent,v=Object(N.a)(b,2),h=v[0],T=v[1],g=h.minInitialMarginRatio,x=h.minPoolMarginRatio,k=Object(a.getFilteredPoolConfigList)(n,null,s).sort((function(e,t){return parseInt(e.bTokenId)-parseInt(t.bTokenId)})),w=k.map((function(e){return e.bTokenId})),e.next=16,f.getMargins(r);case 16:for(O=e.sent,j=[],A=0;A<w.length;A++)j.push(l.getBToken(w[A]));return e.next=21,Promise.all(j);case 21:for(M=e.sent,I=M.reduce((function(e,t,n){return e.plus(o(t.price).times(t.discount).times(O[n]))}),o(0)),C=M.reduce((function(e,t){return e.plus(o(t.liquidity).times(t.price).times(t.discount).plus(t.pnl))}),o(0)),P=Object(a.getFilteredPoolConfigList)(n,"0").sort((function(e,t){return parseInt(e.symbolId)-parseInt(t.symbolId)})),_=P.map((function(e){return e.symbolId})),j=[],B=0;B<_.length;B++)j.push(l.getSymbol(_[B]));return e.next=30,Promise.all(j);case 30:if(S=e.sent,F=(F=S.reduce((function(e,t,n){return n===parseInt(s)?e.plus(o(t.price).times(t.multiplier).times(T[n].volume.plus(i)).abs()):e.plus(o(t.price).times(t.multiplier).times(T[n].volume).abs())}),o(0))).times(g),E=(E=S.reduce((function(e,t,n){return n===parseInt(s)?e.plus(o(t.tradersNetVolume.plus(i)).times(t.price).times(t.multiplier).abs()):e.plus(o(t.tradersNetVolume).times(t.price).times(t.multiplier).abs())}),o(0))).times(x),!(R=se(I,F,C,E)).success){e.next=49;break}return e.prev=37,e.next=40,p.trade(r,s,i);case 40:q=e.sent,D={success:!0,transaction:q},e.next=47;break;case 44:e.prev=44,e.t0=e.catch(37),D={success:!1,error:e.t0};case 47:e.next=50;break;case 49:D={success:!1,error:R.error};case 50:return e.abrupt("return",D);case 51:case"end":return e.stop()}}),e,null,[[37,44]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),He=function(){var e=Object(b.a)(m.a.mark((function e(t,n,r,i){var s,u,o,c,p,l,d,y,f,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(a.getPoolConfig)(n),u=s.router,o=s.pToken,c=Q(t,u),p=te(t,o),e.next=5,p.getPosition(r,i);case 5:if(l=e.sent,d=l.volume,y=d.negated(),d.eq(0)){e.next=22;break}return e.prev=9,e.next=12,c.trade(r,i,y);case 12:b=e.sent,f={success:!0,transaction:b},e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),f={success:!1,error:e.t0};case 19:return e.abrupt("return",f);case 22:f={success:!1,error:"no position to close"};case 23:return e.abrupt("return",f);case 24:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,n,a,r){return e.apply(this,arguments)}}()},268:function(e,t){},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a),i=n(66),s=n(1),u=n(16),o=n.n(u),c=n(105),p=n(2),l=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Object(i.a)(window.ethereum)){e.next=13;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return a=e.sent,e.t0=parseInt,e.next=7,window.ethereum.request({method:"net_version"});case 7:return e.t1=e.sent,s=(0,e.t0)(e.t1),u=Array.isArray(a)&&a[0],window.ethereum.on("accountsChanged",(function(e){var t;t=e.length>0?e[0]:"","function"===typeof n?n(t):window.location.reload()})),window.ethereum.on("chainChanged",(function(e){var n=Object(p.w)(e);"function"===typeof t?t(n):window.location.reload()})),e.abrupt("return",{success:!0,account:u,chainId:s});case 13:return e.abrupt("return",{success:!1,error:"Cannot connect wallet, please install MetaMask."});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(c.a)(),e.next=3,a.eth.getBalance(n);case 3:return i=e.sent,s=o.a.utils.fromWei(i),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},270:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return b}));var a=n(0),r=n.n(a),i=n(1),s=n(67),u=n(68),o=n(69),c=n(42),p=n(2),l=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(p.p)(t,n),"slp"!==(c=i.type)){e.next=7;break}return e.next=4,Object(s.b)(t,n,a);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==c){e.next=13;break}return e.next=10,Object(o.b)(t,n,a);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==c){e.next=19;break}return e.next=16,Object(u.b)(t,n,a);case 16:return e.abrupt("return",e.sent);case 19:console.log("getLpLiquidityInfo(): invalid lp type ".concat(c));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(p.p)(t,n),"slp"!==(u=s.type)){e.next=7;break}return e.next=4,Object(c.d)(t,n,a,i);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==u){e.next=13;break}return e.next=10,Object(c.b)(t,n,a,i);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==u){e.next=19;break}return e.next=16,Object(c.a)(t,n,a,i);case 16:return e.abrupt("return",e.sent);case 19:console.log("addLpLiquidity(): invalid lp type ".concat(u));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(p.p)(t,n),"slp"!==(u=s.type)){e.next=7;break}return e.next=4,Object(c.j)(t,n,a,i);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==u){e.next=13;break}return e.next=10,Object(c.h)(t,n,a,i);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==u){e.next=19;break}return e.next=16,Object(c.g)(t,n,a,i);case 16:return e.abrupt("return",e.sent);case 19:console.log("removeLpLiquidity(): invalid lp type ".concat(u));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(p.p)(t,n),"slp"!==(c=i.type)){e.next=7;break}return e.next=4,Object(s.d)(t,n,a);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==c){e.next=13;break}return e.next=10,Object(o.d)(t,n,a);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==c){e.next=19;break}return e.next=16,Object(u.d)(t,n,a);case 16:return e.abrupt("return",e.sent);case 19:console.log("isLpLiquidity(): invalid lp type ".concat(c));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(p.p)(t,n),"slp"!==(c=i.type)){e.next=7;break}return e.next=4,Object(s.f)(t,n,a);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==c){e.next=13;break}return e.next=10,Object(o.f)(t,n,a);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==c){e.next=19;break}return e.next=16,Object(u.f)(t,n,a);case 16:return e.abrupt("return",e.sent);case 19:console.log("unlockLp(): invalid lp type ".concat(c));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(p.p)(t,n),"slp"!==(c=i.type)){e.next=7;break}return e.next=4,Object(s.c)(t,n,a);case 4:return e.abrupt("return",e.sent);case 7:if("clp"!==c){e.next=13;break}return e.next=10,Object(o.c)(t,n,a);case 10:return e.abrupt("return",e.sent);case 13:if("clp2"!==c){e.next=19;break}return e.next=16,Object(u.c)(t,n,a);case 16:return e.abrupt("return",e.sent);case 19:console.log("getLpWalletBalance(): invalid lp type ".concat(c));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(4),r=n(5),i=n(7),s=n(21),u=function(){function e(){Object(a.a)(this,e),this.all=[],Object(i.o)(this,{all:i.p,setAll:i.f})}return Object(r.a)(e,[{key:"load",value:function(e){var t=e&&e.current,n=Object(s.getContractAddressConfig)(s.DeriEnv.get(),t);return e&&(n=n.filter((function(t){return t.version===e.current})),e.isV2&&(n=n.reduce((function(e,t){return-1===e.findIndex((function(e){return e.symbolId===t.symbolId}))&&e.push(t),e}),[]))),this.setAll(n),n}},{key:"setAll",value:function(e){this.all=e}}]),e}()},273:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"i",(function(){return d})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"r",(function(){return v})),n.d(t,"n",(function(){return T})),n.d(t,"m",(function(){return g})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return k})),n.d(t,"e",(function(){return w})),n.d(t,"h",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"j",(function(){return A})),n.d(t,"g",(function(){return M})),n.d(t,"t",(function(){return C})),n.d(t,"c",(function(){return P})),n.d(t,"u",(function(){return _})),n.d(t,"s",(function(){return B})),n.d(t,"b",(function(){return S})),n.d(t,"o",(function(){return F}));var a=n(17).getContractAddressConfig,r=n(9).getPoolConfigList,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",t=arguments.length>1?arguments[1]:void 0;if(t&&"1"!==t&&"v1"!==t){if("2"===t||"v2"===t)return r(e).concat(a(e));throw new Error("getPoolContractAddress: invalid version: ".concat(t))}return a(e)},s=n(0),u=n.n(s),o=n(1),c=n(39),p=n(38),l=n(22),d=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=4;break}return e.abrupt("return",Object(c.c)(t,n,a));case 4:return e.abrupt("return",Object(l.j)(t,n,a,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==a){e.next=4;break}return e.abrupt("return",Object(p.c)(t,n));case 4:return e.abrupt("return",Object(l.n)(t,n,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==a){e.next=4;break}return e.abrupt("return",Object(p.b)(t,n));case 4:return e.abrupt("return",Object(l.m)(t,n,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),m=n(42),b=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a,r,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=4;break}return e.abrupt("return",Object(m.c)(t,n,a,r));case 4:return e.abrupt("return",Object(l.a)(t,n,a,r,i));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a,r,i,s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=4;break}return e.abrupt("return",Object(m.i)(t,n,a,r));case 4:return e.abrupt("return",Object(l.t)(t,n,a,r,i,s));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,s){return e.apply(this,arguments)}}(),h=n(47);const T=async(e,t,n,a)=>void 0===a?Object(c.e)(e,t):Object(l.p)(e,t,n,a),g=async(e,t,n,a)=>void 0===a?Object(h.e)(e,t,n):Object(l.o)(e,t,n,a),x=async(e,t,n,a)=>void 0===a?Object(h.f)(e,t,n):Object(l.r)(e,t,n,a),k=async(e,t,n,a)=>void 0===n?Object(h.g)(e,t):void 0===a?Object(h.h)(e,t,n):Object(l.s)(e,t,n,a),w=async(e,t,n,a)=>void 0===a?Object(h.a)(e,t,n):Object(l.d)(e,t,n,a),O=async(e,t,n)=>void 0===n?Object(c.a)(e,t):Object(l.h)(e,t,n),j=async(e,t,n,a)=>void 0===a?Object(h.b)(e,t,n):Object(l.e)(e,t,n,a),A=async(e,t,n)=>void 0===n?Object(c.d)(e,t):Object(l.k)(e,t,n),M=async(e,t,n,a)=>void 0===a?Object(h.c)(e,t,n):Object(l.f)(e,t,n,a);var I=n(36);const C=async(e,t,n,a)=>void 0===n?Object(I.i)(e,t):void 0===a?Object(I.h)(e,t,n):Object(l.v)(e,t,n,a),P=async(e,t,n,a,r)=>void 0===r?Object(m.f)(e,t,n,a):Object(l.c)(e,t,n,a,r),_=async(e,t,n,a,r,i)=>void 0===r?Object(m.l)(e,t,n,a):Object(l.w)(e,t,n,a,r,i),B=async(e,t,n,a,r)=>void 0===r?Object(m.k)(e,t,n,a):Object(l.u)(e,t,n,a,r),S=async(e,t,n,a)=>void 0===a?Object(m.e)(e,t,n):Object(l.b)(e,t,n,a);var F=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=4;break}return e.abrupt("return",Object(c.f)(t,n,a));case 4:return e.abrupt("return",Object(l.q)(t,n,a,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},28:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"j",(function(){return f}));var a=n(2),r=function(e,t,n,r,i){return Object(a.c)(e*t*n/r*i).abs()},i=function(e,t,n,a,r){return e*t*n/a*r},s=function(e,t){var n=Object(a.j)(e);return Object(a.c)(t).times(n)},u=function(e,t){return e.eq(0)?Object(a.c)(0):t.div(e)},o=function(e,t,n,r,i,s,o,c){var p=u(t,n),l=r.times(c).times(s),d=n.plus(i).minus(l).minus(l.abs().times(o));return Object(a.z)(Object(a.A)(e,d.div(p)),Object(a.c)(0))},c=function(e,t,n){return e.eq(0)?Object(a.c)(0):t.div(e).div(n)},p=function(e,t,n,a){return t.abs().times(e).times(n).times(a)},l=function(e,t,n,a){return t.times(e).times(n).minus(a)},d=function(e,t,n,r,i,s){if(t.eq(0))return n;var u=p(e,t,i,s),o=l(e,t,i,r);return Object(a.z)(n.plus(o).minus(u.times(1.02)),Object(a.c)(0))},y=function(e,t,n,r,i){var s=n.minus(t).div(e).div(r),u=e.gt(0)?s.div(Object(a.c)(1).minus(i)):s.div(Object(a.c)(1).plus(i));return u=Object(a.z)(u,Object(a.c)(0))},f=function(e,t,n,a,r,i,s,u,o,c){var p=n.plus(o).abs().times(e).times(i).times(u),l=a.div(s).div(e).div(i);return t.plus(c).gte(p)?o.lte(l.minus(r))&&o.gte(l.negated().minus(r))?{success:!0}:{success:!1,message:"Pool insufficient liquidity"}:{success:!1,message:"Trader insufficient margin"}}},290:function(e,t,n){},303:function(e,t){},326:function(e,t){},328:function(e,t){},342:function(e,t){},343:function(e,t){},36:function(e,t,n){"use strict";n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return T})),n.d(t,"i",(function(){return g})),n.d(t,"d",(function(){return x}));var a=n(15),r=n(0),i=n.n(r),s=n(1),u=n(8),o=n(38),c=n(2),p=n(17),l=n(28),d=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,s,o,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.t)(t,n),s=r.bTokenAddress,o=Object(u.a)(t,s,n),e.prev=2,e.next=5,o.unlock(a);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(u.l)(t,n),e.next=3,s.depositMargin(a,Object(c.B)(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,o,p,d,y,f,m,b,v,h,T,g,x,k,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(c.t)(t,n),p=o.pTokenAddress,d=Object(u.l)(t,n),y=Object(u.k)(t,p,n),e.next=5,Object(c.k)(t,n);case 5:return f=e.sent,e.next=8,y.getPositionInfo(a);case 8:return m=e.sent,b=m.volume,v=m.margin,h=m.cost,e.next=14,d.getParameters();case 14:if(T=e.sent,g=T.multiplier,x=T.minInitialMarginRatio,k=Object(l.g)(f,b,v,h,g,x),!Object(c.c)(r).lte(k)){e.next=31;break}return e.prev=19,e.next=22,d._transactPool("withdrawMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r)],a);case 22:w=e.sent,s={success:!0,transaction:w},e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),s={success:!1,error:e.t0};case 29:e.next=32;break;case 31:s={success:!1,error:"amount exceeds allowed"};case 32:return e.abrupt("return",s);case 33:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,o,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(u.l)(t,n),e.prev=1,e.next=4,s._transactPool("addLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r)],a);case 4:p=e.sent,o={success:!0,transaction:p},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o={success:!1,error:e.t0};case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,s){var o,p,d,y,f,m,b,v,h,T,g,x,k,w,O,j,A,M,I;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(c.t)(t,n),p=o.lTokenAddress,d=Object(u.l)(t,n),y=Object(u.h)(t,p,n),e.next=5,Object(c.k)(t,n);case 5:return f=e.sent,e.next=8,Promise.all([y.balance(r),y.totalSupply()]);case 8:return m=e.sent,b=Object(a.a)(m,2),v=b[0],h=b[1],e.next=14,d.getParameters();case 14:return T=e.sent,g=T.multiplier,x=T.minPoolMarginRatio,e.next=19,d.getStateValues();case 19:if(k=e.sent,w=k.liquidity,O=k.tradersNetVolume,j=k.tradersNetCost,A=Object(l.f)(v,h,w,O,j,g,x,f),!Object(c.c)(s).lte(A)){e.next=37;break}return e.prev=25,e.next=28,d._transactPool("removeLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(s)],r);case 28:I=e.sent,M={success:!0,transaction:I},e.next=35;break;case 32:e.prev=32,e.t0=e.catch(25),M={success:!1,error:e.t0};case 35:e.next=38;break;case 37:M={success:!1,error:"shares exceeds allowed"};case 38:return e.abrupt("return",M);case 39:case"end":return e.stop()}}),e,null,[[25,32]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,o,p,d,y,f,m,b,v,h,T,g,x,k,w,O,j,A,M,I=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=I.length>4&&void 0!==I[4]?I[4]:"0",e.next=3,Object(c.k)(t,n);case 3:return o=e.sent,p=Object(c.t)(t,n),d=p.pTokenAddress,y=Object(u.l)(t,n),f=Object(u.k)(t,d,n),e.next=9,y.getParameters();case 9:return m=e.sent,b=m.multiplier,v=m.minInitialMarginRatio,h=m.minPoolMarginRatio,e.next=15,y.getStateValues();case 15:return T=e.sent,g=T.liquidity,x=T.tradersNetVolume,e.next=20,f.getPositionInfo(a);case 20:if(k=e.sent,w=k.volume,O=k.margin,!(A=Object(l.j)(o,O,w,g,x,b,h,v,Object(c.c)(r),Object(c.c)(s))).success){e.next=37;break}return e.prev=25,e.next=28,y._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r),Object(c.B)(s)],a);case 28:M=e.sent,j={success:!0,transaction:M},e.next=35;break;case 32:e.prev=32,e.t0=e.catch(25),j={success:!1,error:e.t0};case 35:e.next=38;break;case 37:j={success:!1,error:A.message};case 38:return e.abrupt("return",j);case 39:case"end":return e.stop()}}),e,null,[[25,32]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,s,o,p,l,d,y,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.t)(t,n),s=r.pTokenAddress,o=Object(u.l)(t,n),p=Object(u.k)(t,s,n),e.next=5,p.getPositionInfo(a);case 5:if(l=e.sent,(d=(d=l.volume).negated()).eq(0)){e.next=21;break}return e.prev=9,e.next=12,o._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(d),"0"],a);case 12:f=e.sent,y={success:!0,transaction:f},e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),y={success:!1,error:e.t0};case 19:e.next=22;break;case 21:y={success:!1,error:"no position to close"};case 22:return e.abrupt("return",y);case 23:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,n,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,s,p,l,d,y,f,m,b,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.d)(n);case 2:if(r=e.sent,s=Object(c.B)(r.amount),p=r.deadline,l=r.nonce,d=r.v,y=r.r,f=r.s,!r.valid){e.next=28;break}if(!(m=Object(c.q)(t))){e.next=25;break}return b=Object(u.i)(t,m),e.prev=13,e.next=16,b.mintDToken(n,s,p,l,d,y,f);case 16:v=e.sent,a={success:!0,transaction:v},e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),a={success:!1,error:e.t0};case 23:e.next=26;break;case 25:a={success:!1,error:"cannot find the mining vault address in chain ".concat(t)};case 26:e.next=29;break;case 28:a={success:!1,error:"userinfo is not valid"};case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,s,o,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(c.o)(t),r=a.wormholeAddress,s=a.deriAddress,o=Object(u.g)(t,s,r),e.prev=2,e.next=5,o.unlock(n);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,s,l,d,y,f,m,b,v,h,T,g,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.e)(n);case 2:if(r=e.sent,s=Object(c.B)(r.amount).toString(),l=r.deadline,d=r.nonce,y=r.v1,f=r.r1,m=r.s1,b=r.v2,v=r.r2,h=r.s2,!r.valid){e.next=24;break}if(!(T=Object(p.getMiningVaultRouterContractAddress)(t))){e.next=21;break}return g=Object(u.j)(t,T),e.prev=9,e.next=12,g.mint(n,s,l,d,y,f,m,b,v,h);case 12:x=e.sent,a={success:!0,transaction:x},e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),a={success:!1,error:e.t0};case 19:e.next=22;break;case 21:a={success:!1,error:"cannot find the mining vault router address in chain ".concat(t)};case 22:e.next=25;break;case 24:a={success:!1,error:"userinfo is not valid"};case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,n){return e.apply(this,arguments)}}()},38:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return v}));var a=n(0),r=n.n(a),i=n(15),s=n(1),u=n(8),o=n(2),c=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,p,l,d,y,f,m,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.e)(!0),t=Object(o.D)(t),e.next=4,n.getValues(["".concat(t,".claim.chainId"),"".concat(t,".claim.amount"),"".concat(t,".claim.deadline"),"".concat(t,".claim.nonce"),"".concat(t,".claim.v"),"".concat(t,".claim.r"),"".concat(t,".claim.s"),"".concat(t,".claim.valid")]).catch((function(e){return console.log("getUserInfo",e)}));case 4:if(!(a=e.sent)){e.next=8;break}return s=Object(i.a)(a,8),c=s[0],p=s[1],l=s[2],d=s[3],y=s[4],f=s[5],m=s[6],b=s[7],e.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(l),nonce:Object(o.g)(d),v:Object(o.g)(y),r:f,s:m,valid:Object(o.e)(b)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.e)(!0),t=Object(o.D)(t),e.next=4,n.getValues(["".concat(t,".claim.harvest.lp"),"".concat(t,".claim.harvest.trade")]).catch((function(e){return console.log("getUserInfoHarvest",e)}));case 4:if(!(a=e.sent)){e.next=8;break}return s=Object(i.a)(a,2),c=s[0],p=s[1],e.abrupt("return",{lp:Object(o.f)(c).toString(),trade:Object(o.f)(p).toString()});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.e)(!0),t=Object(o.D)(t),e.next=4,n.getValues(["".concat(t,".claim.total")]).catch((function(e){return console.log("getUserInfoTotal",e)}));case 4:if(!(a=e.sent)){e.next=8;break}return s=Object(i.a)(a,1),c=s[0],e.abrupt("return",{total:Object(o.f)(c).toString()});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:return n=e.sent,e.next=5,p(t);case 5:return a=e.sent,e.next=8,l(t);case 8:return i=e.sent,e.abrupt("return",Object.assign(n,a,i));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,s,c,p,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.e)(),e.prev=1,e.next=4,a.getValues(["".concat(t,".").concat(n,".liquidity")]).catch((function(e){return console.log("getPoolLiquidity",e)}));case 4:if(s=e.sent,c=Object(o.t)(t,n),p=c.symbol,!s){e.next=9;break}return l=Object(i.a)(s,1),d=l[0],e.abrupt("return",{liquidity:Object(o.f)(d).toString(),symbol:p});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,s,c,p,l,d,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.e)(!0),e.prev=1,s=Object(o.r)(t),e.next=5,a.getValues(["".concat(s,".").concat(n,".apy"),"".concat(s,".").concat(n,".volume.1h"),"".concat(s,".").concat(n,".volume.24h")]).catch((function(e){return console.log("getPoolInfoApy",e)}));case 5:if(!(c=e.sent)){e.next=9;break}return p=Object(i.a)(c,3),l=p[0],d=p[1],y=p[2],e.abrupt("return",{apy:Object(o.f)(l).toString(),volume1h:Object(o.f)(d).toString(),volume24h:Object(o.f)(y).toString()});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var a,s,c,p,l,d,y,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.e)(!0),e.prev=1,s=Object(o.r)(t),e.next=5,a.getValues(["".concat(s,".").concat(n,".apy"),"".concat(s,".").concat(n,".apy2"),"".concat(s,".").concat(n,".volume.1h"),"".concat(s,".").concat(n,".volume.24h")]).catch((function(e){return console.log("getPoolInfoApy",e)}));case 5:if(!(c=e.sent)){e.next=9;break}return p=Object(i.a)(c,4),l=p[0],d=p[1],y=p[2],f=p[3],e.abrupt("return",{apy:Object(o.f)(l).toString(),apy2:Object(o.f)(d).toString(),volume1h:Object(o.f)(y).toString(),volume24h:Object(o.f)(f).toString()});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var s,c,p,l,d,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(u.e)(!0),a=Object(o.D)(a),e.prev=2,c=Object(o.r)(t),e.next=6,s.getValues(["".concat(c,".").concat(n,".").concat(a,".volume.1h"),"".concat(c,".").concat(n,".").concat(a,".volume.24h")]).catch((function(e){return console.log("getUserInfoInPool",e)}));case 6:if(!(p=e.sent)){e.next=10;break}return l=Object(i.a)(p,2),d=l[0],y=l[1],e.abrupt("return",{volume1h:Object(o.f)(d).toString(),volume24h:Object(o.f)(y).toString()});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,p,l,d,y,f,m,b,v,h,T;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.d)(!0),t=Object(o.D)(t),e.next=4,n.getValues(["".concat(t,".claim.chainId"),"".concat(t,".claim.amount"),"".concat(t,".claim.deadline"),"".concat(t,".claim.nonce"),"".concat(t,".claim.v1"),"".concat(t,".claim.r1"),"".concat(t,".claim.s1"),"".concat(t,".claim.v2"),"".concat(t,".claim.r2"),"".concat(t,".claim.s2"),"".concat(t,".claim.valid")]).catch((function(e){return console.log("getUserInfoAllForAirDrop",e)}));case 4:if(!(a=e.sent)){e.next=8;break}return s=Object(i.a)(a,11),c=s[0],p=s[1],l=s[2],d=s[3],y=s[4],f=s[5],m=s[6],b=s[7],v=s[8],h=s[9],T=s[10],e.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(l),nonce:Object(o.g)(d),v1:Object(o.g)(y),r1:f,s1:m,v2:Object(o.g)(b),r2:v,s2:h,valid:Object(o.e)(T)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return x}));var a=n(15),r=n(0),i=n.n(r),s=n(1),u=n(17),o=n(2),c=n(8),p=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r,s,u,c){var p,l,d,y,f,m,b,v,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Object(o.f)(a.tradeVolume),e.next=3,t._getTimeStamp(r);case 3:return l=e.sent,d=p.gt(0)?"LONG":"SHORT",y=Object(o.f)(a.price),f="".concat(+l.timestamp,"000"),m=t._calculateFee(p,y,u,c),b=p.abs().times(y).times(u),v=p.abs(),h={direction:d,baseToken:n,price:y.toString(),notional:b.toString(),volume:v.toString(),transactionFee:m.toString(),transactionHash:s.toString(),time:f},e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,s,u){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,u,c,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.f)(t.volume).abs(),u="".concat(t.timestamp,"000"),c=Object(o.f)(t.price),p=s.times(c).times(r),l={direction:"Liquidation",baseToken:a,price:c.toString(),notional:p.toString(),volume:s.toString(),transactionFee:"0",transactionHash:n.toString(),time:u},e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,u,l,d,y,f,m,b,v,h,T,g,x,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.t)(t,n),u=s.bTokenSymbol,l=Object(c.l)(t,n),e.next=4,l._getBlockInfo("latest");case 4:return d=e.sent,r=parseInt(r),y={owner:a},e.next=9,l._getPastEvents("Trade",y,r,d.number);case 9:return f=e.sent,e.next=12,l.getParameters();case 12:m=e.sent,b=m.multiplier,v=m.feeRatio,h=m.minInitialMarginRatio,T=[],g=0;case 18:if(!(g<f.length)){e.next=27;break}return x=f[g],e.next=22,p(l,u,x.returnValues,x.blockNumber,x.transactionHash,b,v,h);case 22:k=e.sent,T.unshift(k);case 24:g++,e.next=18;break;case 27:return e.abrupt("return",T);case 28:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a,r){var s,u,p,d,y,f,m,b,v,h,T,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.t)(t,n),u=s.bTokenSymbol,p=Object(c.l)(t,n),e.next=4,p._getBlockInfo("latest");case 4:return d=e.sent,r=parseInt(r),y={owner:a},e.next=9,p._getPastEvents("Liquidate",y,r,d.number);case 9:return f=e.sent,e.next=12,p.getParameters();case 12:m=e.sent,b=m.multiplier,v=[],h=0;case 16:if(!(h<f.length)){e.next=25;break}return T=f[h],e.next=20,l(T.returnValues,T.transactionHash,u,b);case 20:g=e.sent,v.unshift(g);case 22:h++,e.next=16;break;case 25:return e.abrupt("return",v);case 26:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f=function(){return Object(u.getRestServerConfig)(u.DeriEnv.get())},m=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/specification/").concat(n));case 2:if(!(a=e.sent)||!a.success){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/funding_rate/").concat(n));case 2:if(!(a=e.sent)||!a.success){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/liquidity_used/").concat(n));case 2:if(!(a=e.sent)||!a.success){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/funding_rate_cache/").concat(n));case 2:if(!(a=e.sent)||!a.success){e.next=9;break}return(r=a.data).price=Object(o.c)(r.price),r.fundingRate=Object(o.c)(r.fundingRate),r.liquidityUsed=Object(o.c)(r.liquidityUsed),e.abrupt("return",r);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/liquidity_info/").concat(t,"/").concat(n,"/").concat(a));case 2:if(!(r=e.sent)||!r.success){e.next=5;break}return e.abrupt("return",r.data);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,c,p,l,b,v,h,T,g,x,k,w,O,j,A;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("".concat(f(),"/trade_history/").concat(t,"/").concat(n,"/").concat(r));case 2:if((p=e.sent)&&p.success&&(s=parseInt(p.data.tradeHistoryBlock),u=parseInt(p.data.liquidateHistoryBlock),c=p.data.tradeHistory),c=c.filter((function(e){return e})).map((function(e){return{direction:e.direction.trim(),baseToken:e.baseToken.trim(),price:Object(o.f)(e.price).toString(),notional:Object(o.f)(e.notional).toString(),volume:Object(o.f)(e.volume).toString(),transactionFee:Object(o.f)(e.transactionFee).toString(),transactionHash:e.transactionHash,time:e.time.toString()}})),0===s||0===u){e.next=16;break}return e.next=8,Promise.all([d(t,n,r,s+1),y(t,n,r,u+1)]);case 8:return l=e.sent,b=Object(a.a)(l,2),v=b[0],h=b[1],T=v.concat(h).concat(c),e.abrupt("return",T.sort((function(e,t){return parseInt(t.time)-parseInt(e.time)})));case 16:return g=Object(o.t)(t,n),x=g.initialBlock,s=parseInt(x),u=parseInt(x),e.next=21,Promise.all([d(t,n,r,s+1),y(t,n,r,u+1)]);case 21:return k=e.sent,w=Object(a.a)(k,2),O=w[0],j=w[1],A=O.concat(j),e.abrupt("return",A.sort((function(e,t){return parseInt(t.time)-parseInt(e.time)})));case 27:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},404:function(e,t){},406:function(e,t){},42:function(e,t,n){"use strict";n.d(t,"k",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"l",(function(){return h})),n.d(t,"c",(function(){return T})),n.d(t,"i",(function(){return g})),n.d(t,"d",(function(){return x})),n.d(t,"j",(function(){return k})),n.d(t,"b",(function(){return w})),n.d(t,"h",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"g",(function(){return A}));var a=n(24),r=n(0),i=n.n(r),s=n(1),u=n(36),o=n(67),c=n(69),p=n(68),l=n(43),d=n(17),y=function(e,t){return new Promise((function(n){e.on(t,(function(e){n(JSON.parse(e))}))}))},f=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.d.getOrSet(Object(d.getRestServerConfig)(d.DeriEnv.get())),e.next=3,n.send(t);case 3:return e.next=5,y(n,"trade_tx_receipt");case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,s){var o,c,p,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:"0",e.next=3,Object(u.g)(t,n,r,s,o);case 3:if(!(c=e.sent).success){e.next=11;break}return e.next=7,f("trade_with_margin(".concat(t,",").concat(n,",").concat(r,")"));case 7:return p=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},p),c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,s){var o,c,p,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:"0",e.next=3,Object(u.b)(t,n,r,s,o);case 3:if(!(c=e.sent).success){e.next=11;break}return e.next=7,f("close_position(".concat(t,",").concat(n,",").concat(r,")"));case 7:return p=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},p),c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,o,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(u.c)(t,n,r,s);case 3:if(!(o=e.sent).success){e.next=11;break}return e.next=7,f("deposit_margin(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),o));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,o,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(u.j)(t,n,r,s);case 3:if(!(o=e.sent).success){e.next=11;break}return e.next=7,f("withdraw_margin(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),o));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,o,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(u.a)(t,n,r,s);case 3:if(!(o=e.sent).success){e.next=11;break}return e.next=7,f("add_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),o));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,o,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(u.f)(t,n,r,s);case 3:if(!(o=e.sent).success){e.next=11;break}return e.next=7,f("remove_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),o));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(o.a)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("add_slp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,c,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(o.e)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("remove_slp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return c=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},c),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,o,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(c.a)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("add_clp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return o=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},o),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,o,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>3&&void 0!==p[3]?p[3]:"0",e.next=3,Object(c.e)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("remove_clp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return o=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},o),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,o,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>3&&void 0!==c[3]?c[3]:"0",e.next=3,Object(p.a)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("add_clp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return o=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},o),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var s,u,o,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>3&&void 0!==c[3]?c[3]:"0",e.next=3,Object(p.e)(t,n,r,s);case 3:if(!(u=e.sent).success){e.next=11;break}return e.next=7,f("remove_clp_liquidity(".concat(t,",").concat(n,",").concat(r,")"));case 7:return o=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},o),u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d}));var a=n(0),r=n.n(a),i=n(1),s=n(8),u=n(2),o=n(119),c=function(){var e={};return{get:function(t,n){var a="".concat(t,".").concat(n);if(Object.keys(e).includes(a))return e[a];console.log("Cache key is not in resouceMap: ".concat(a))},set:function(t,n,a){var r="".concat(t,".").concat(n);e[r]=a}}}(),p=(function(){var e=""}(),function(){var e="",t=null;return{get:function(){return""===e&&console.log("please init 'price' first"),e},_update:function(t,n){return Object(i.a)(r.a.mark((function a(){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(u.k)(t,n);case 3:""!==(i=a.sent)&&(e=i),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("priceCache.update: ".concat(a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},update:function(e,n){var a=this;t=setInterval((function(){a._update(e,n)}),3e3)},clear:function(){t&&clearInterval(t),e=""}}}()),l=function(){var e={};return{get:function(){return e.multiplier||console.log("please init 'perpetual pool parameters' first"),e},update:function(t,n){return Object(i.a)(r.a.mark((function a(){var i,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=Object(s.l)(t,n),a.next=3,i.getParameters();case 3:return(u=a.sent).multiplier&&(e=u),a.abrupt("return",u);case 6:case"end":return a.stop()}}),a)})))()}}}(),d=function(){var e=null;return{get:function(){if(e)return e;console.log("wsInstance.get() error: ws instance is not init")},set:function(t){try{var n=Object(o.io)(t,{transports:["websocket"],path:"/ws"});n.on("connect",(function(){console.log("hello from ws:",n.id)})),n?e=n:console.log("wsInstance.get() error: ws instance is not init")}catch(a){console.log("wsInstance.set():",a)}},getOrSet:function(t){return e||this.set(t),e}}}()},438:function(e,t){},443:function(e,t){},445:function(e,t){},452:function(e,t){},465:function(e,t){},47:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"g",(function(){return f}));var a=n(8),r=(n(38),n(43)),i=n(2),s=n(28);const u=async(e,t,n)=>{let r="";try{r=await Object(i.k)(e,t)}catch(b){console.log(b)}const{pTokenAddress:u}=Object(i.t)(e,t),o=Object(a.l)(e,t),c=Object(a.k)(e,u,t),{multiplier:p,minInitialMarginRatio:l,minMaintenanceMarginRatio:d}=await o.getParameters(),{volume:y,margin:f,cost:m}=await c.getPositionInfo(n);return""===r?{price:r,volume:y.toString(),averageEntryPrice:Object(s.a)(y,m,p).toString(),margin:f.toString(),marginHeld:"",unrealizedPnl:"",liquidationPrice:Object(s.c)(y,f,m,p,d).toString()}:{price:r,volume:y.toString(),averageEntryPrice:Object(s.a)(y,m,p).toString(),margin:f.toString(),marginHeld:Object(s.e)(r,y,p,l).toString(),unrealizedPnl:Object(s.h)(r,y,p,m).toString(),liquidationPrice:Object(s.c)(y,f,m,p,d).toString()}},o=async(e,t,n)=>{const{bTokenAddress:r}=Object(i.t)(e,t),s=Object(a.a)(e,r,t);return(await s.balance(n)).toString()},c=async(e,t,n)=>{const{bTokenAddress:r}=Object(i.t)(e,t),s=Object(a.a)(e,r,t);return await s.isUnlocked(n)},p=async(e,t,n,r,s)=>{const u=await Object(i.k)(e,t),o=Object(a.l)(e,t),{multiplier:c}=await o.getParameters();return Object(i.c)(r).abs().times(u).times(c).div(Object(i.c)(s)).toString()},l=async(e,t,n)=>{let a=r.c.get(),s=r.a.get();""===a&&(await r.c.update(e,t),a=r.c.get()),s.multiplier||(s=await r.a.update(e,t));const{multiplier:u,feeRatio:o}=s;return Object(i.c)(n).abs().times(a).times(u).times(o).toString()},d=async(e,t,n)=>{let u,o;if(o=r.b.get(e,t),!o){const n=Object(a.l)(e,t);o=await n.getFundingRate()}if(o){const t=[Object(i.c)(o.tradersNetVolume).plus(Object(i.c)(n)).toString(),o.price,o.multiplier,o.liquidity,o.fundingRateCoefficient];return Object(i.v)(...t)?{fundingRate1:"0"}:(u=Object(s.b)(...t),u=Object(s.k)(e,u),{fundingRate1:Object(i.C)(u)})}},y=async(e,t,n)=>{let u;if(u=r.b.get(e,t),!u){const n=Object(a.l)(e,t);u=await n.getFundingRate().catch((e=>console.log("getLiquidityUsed",e)))}if(u){const e=[Object(i.c)(u.tradersNetVolume).plus(Object(i.c)(n)).toString(),u.price,u.multiplier,u.liquidity,u.poolMarginRatio];if(Object(i.v)(...e))return{liquidityUsed1:"0"};const t=Object(s.d)(...e);return{liquidityUsed1:Object(i.C)(t)}}},f=async(e,t)=>{const{wormholeAddress:n,deriAddress:r}=Object(i.o)(e),s=Object(a.g)(e,r,n);return await s.isUnlocked(t)}},483:function(e,t){},494:function(e,t){},497:function(e,t){},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"e",(function(){return v}));var a=n(26),r=n.n(a),i="deri-current-version";function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==t?r()(e):t>0?r()(e).times(r()("1"+"0".repeat(t))):r()(e).div(r()("1"+"0".repeat(-t)))}function u(e){return e&&"".concat(e.substr(0,6),"...").concat(e.substr(-4))}function o(e){return e&&(+e).toFixed(4)}function c(e,t){return+e===+t}function p(e){return"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd"===e||"0x73feaa1eE314F8c655E354234017bE2193C9E24E"===e}function l(e){return"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd"===e}function d(e){return"0x73feaa1eE314F8c655E354234017bE2193C9E24E"===e}function y(e){return"".concat(e,"-current-trading-pool")}function f(e){sessionStorage.setItem(i,e)}function m(){return sessionStorage.getItem(i)}function b(e,t){if(t){var n=y(e);sessionStorage.setItem(n,JSON.stringify(t))}}function v(e){return JSON.parse(sessionStorage.getItem(y(e)))}},567:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),i=n(106),s=n.n(i),u=n(163),o=n(158),c=n(122),p=n(57),l=Object(c.a)((function(){return n.e(8).then(n.bind(null,641))})),d=Object(c.a)((function(){return n.e(9).then(n.bind(null,640))}));var y=function(){return o.isBrowser?Object(p.jsx)(l,{}):o.isMobile?Object(p.jsx)(d,{}):void 0},f=(n(290),n(162)),m=n(24),b=n(0),v=n.n(b),h=n(1),T=n(4),g=n(5),x=n(21),k=n(164),w=n(51),O=n(7),j=function(){function e(){var t=this;Object(T.a)(this,e),this.detail={},this.isConnected=function(){return!!t.detail.account},this.approve=function(){var e=Object(h.a)(v.a.mark((function e(n,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.detail.chainId){e.next=5;break}return e.next=3,Object(x.unlock)(t.detail.chainId,n,t.detail.account,a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.connect=Object(h.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.connectWallet)();case 2:return n=e.sent,e.abrupt("return",new Promise(function(){var e=Object(h.a)(v.a.mark((function e(a,r){var i,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.success){e.next=8;break}return i=n.chainId,s=n.account,e.next=4,t.loadWalletBalance(i,s);case 4:u=e.sent,a(u),e.next=9;break;case 8:r(null);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),this.loadWalletBalance=function(){var e=Object(h.a)(v.a.mark((function e(n,a){var r,i,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getUserWalletBalance)(n,a);case 2:return r=e.sent,i={chainId:n,account:a,balance:r,formatBalance:Object(w.d)(r)},s=x.DeriEnv.get(),(u=k[s].chainInfo)[n]&&Object.assign(i,Object(m.a)(Object(m.a)({},u[n]),{},{supported:!0})),t.setDetail(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.get=function(){return t.detail},Object(O.n)(this,{detail:O.p,setDetail:O.f,supportV2:O.g,supportChain:O.g})}return Object(g.a)(e,[{key:"isApproved",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.detail.chainId){e.next=7;break}return e.next=3,Object(x.isUnlocked)(this.detail.chainId,t,this.detail.account,n);case 3:return a=e.sent,this.detail.isApproved=a,this.setDetail(this.detail),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setDetail",value:function(e){this.detail=e}},{key:"supportV2",get:function(){return Object(w.b)(this.detail.chainId,56)||Object(w.b)(this.detail.chainId,97)}},{key:"supportChain",get:function(){return this.detail.supported}}]),e}(),A=n(119),M=n.n(A),I=function(){function e(){Object(T.a)(this,e),this.symbol="BTCUSD",this.timeType="min",this.index=0,this.kData=[],this.ws=null,this.paused=!1,this.listeners={},this.already=!1,Object(O.n)(this,{index:O.p,kData:O.p,setIndex:O.f}),this.initWebSocket()}return Object(g.a)(e,[{key:"initWebSocket",value:function(){var e=this;null===this.ws&&(this.ws=new M.a("wss://oracle4.deri.finance",{transports:["websocket"],withCredentials:!0}),this.ws.on("connect",(function(){e.already&&(e.ws.emit("get_kline_update",{symbol:e.symbol,time_type:e.timeType}),console.log("ws is reconnected already")),console.log("ws is already connected")})))}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"min";this.ws.on("kline_update",(function(e){var n={},a=e.time;if(e.symbol.toUpperCase()===t.symbol.toUpperCase()&&(n.time=a,n.low=Number(e.low),n.high=Number(e.high),n.open=Number(e.open),n.close=Number(e.close),n.volume=Number(e.volume),n.time_type=e.time_type,n.symbol=e.symbol,!t.paused)){t.setIndex(n.close);for(var r=0,i=Object.keys(t.listeners);r<i.length;r++){var s=i[r];"function"===typeof t.listeners[s]&&t.listeners[s](n)}}})),e!==this.symbol&&this.unsubscribeBars(this.symbol),this.setSymbol(e),this.setTimeType(n),this.ws.emit("get_kline_update",{symbol:this.symbol,time_type:this.timeType}),this.already=!0}},{key:"addListener",value:function(e,t){this.listeners[e]||(this.listeners[e]=t)}},{key:"unsubscribeBars",value:function(e){this.ws.emit("un_get_kline_update",{symbol:e,time_type:"min"})}},{key:"loadHistory",value:function(e,t,n){this.ws.on("kline_history",(function(e){var t=e.map((function(e){return{time:e.time,low:Number(e.low),high:Number(e.high),open:Number(e.open),close:Number(e.close),volume:Number(e.volume)}}));n&&(console.log("history ->",t[t.length-1].time),n(t))})),this.ws.emit("get_kline",{symbol:e,time_type:t,bars:1e3})}},{key:"resume",value:function(){this.setPause(!1)}},{key:"pause",value:function(){this.setPause(!0)}},{key:"setIndex",value:function(e){this.paused||(this.index=e)}},{key:"setSymbol",value:function(e){this.symbol=e}},{key:"setTimeType",value:function(e){this.timeType=e}},{key:"setPause",value:function(e){this.paused=e}}]),e}(),C=function(){function e(){Object(T.a)(this,e),this.callback=function(){},this.wallet=null,this.spec=null,this.mockPositionInfo={averageEntryPrice:"",liquidationPrice:"",margin:"20000",marginHeld:"10068.26538",marginHeldBySymbol:"293.16152",unrealizedPnl:"3.1311",volume:"800"}}return Object(g.a)(e,[{key:"load",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.isConnected()&&t.supportChain&&n&&n.pool)){e.next=7;break}return e.next=3,Object(x.getPositionInfo)(t.detail.chainId,n.pool,t.detail.account,n.symbolId);case 3:return(r=e.sent)&&a&&a(r),this.start(t,n,a),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"start",value:function(e,t,n){var a=this;this.interval||(this.interval=window.setInterval((function(){return a.load(e,t,n)}),3e3),e&&(this.wallet=e),t&&(this.spec=t),n&&(this.callback=n))}},{key:"pause",value:function(){clearInterval(this.interval),this.interval=null}},{key:"resume",value:function(e,t,n){this.start(e,t,n||this.callback)}}]),e}(),P=function(){function e(){Object(T.a)(this,e),this.info={bSymbol:"BUSD",symbol:"BTCUSD",multiplier:"0.0001",fundingRateCoefficient:"0.0000025",minInitialMarginRatio:.1,minMaintenanceMarginRatio:.05,feeRatio:5e-4}}return Object(g.a)(e,[{key:"load",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.supportChain&&n&&n.pool!==this.info.pool)){e.next=5;break}return e.next=3,Object(x.getSpecification)(t.detail.chainId,n.pool,n.bTokenId,n.symbolId);case 3:a=e.sent,this.setInfo(a);case 5:return e.abrupt("return",this.info);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setInfo",value:function(e){this.info=e}}]),e}(),_=function(){function e(){Object(T.a)(this,e)}return Object(g.a)(e,[{key:"load",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.detail.chainId&&n&&n.pool)){e.next=7;break}return e.next=3,Object(x.getTradeHistory)(t.detail.chainId,n.pool,t.detail.account,n.symbolId);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),B=n(271),S=function(){function e(){Object(T.a)(this,e),this.version=null,this.wallet=null,this.configs=[],this.config=null,this.index="",this.volume="",this.paused=!1,this.slideIncrementMargin=0,this.position={},this.contract={},this.fundingRate={},this.history=[],this.userSelectedDirection="long",Object(O.o)(this,{index:O.p,volume:O.p,slideIncrementMargin:O.p,fundingRate:O.p,position:O.p,history:O.p,contract:O.p,userSelectedDirection:O.p,setWallet:O.f,setConfigs:O.f,setConfig:O.f,setIndex:O.f,setContract:O.f,setPosition:O.f,setVolume:O.f,setUserSelectedDirection:O.f,setFundingRate:O.f,setHistory:O.f,setSlideMargin:O.f,amount:O.g,fundingRateTip:O.g,direction:O.g,volumeDisplay:O.g,isNegative:O.g,isPositive:O.g}),this.configInfo=new B.a,this.oracle=new I,this.positionInfo=new C,this.contractInfo=new P,this.historyInfo=new _}return Object(g.a)(e,[{key:"init",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(this.version=n),e.next=3,this.configInfo.load(n);case 3:a=e.sent,t&&t.isConnected()&&(this.setWallet(t),this.setConfigs(a.filter((function(e){return Object(w.b)(t.detail.chainId,e.chainId)}))),(r=this.getDefaultConfig(this.configs,t))||(r=a.length>0?a[0]:{}),this.setConfig(r)),!t.isConnected()&&0===this.configs.length&&a.length>0&&(i=(i=a.find((function(e){return"BTCUSD"===e.symbol})))||a[0],this.setConfig(i)),this.loadByConfig(this.wallet,this.config,!0),this.setVolume("");case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"switch",value:function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.configs.find((function(e){return e.pool===t.pool&&e.symbolId===t.symbolId})),a=!1,this.version&&(a=this.version.isV1?t.pool!==this.config.pool:t.symbolId!==this.config.symbolId),n&&(this.pause(),this.setConfig(n),this.loadByConfig(this.wallet,n,a),a&&this.store(n),this.resume(),this.setVolume(""));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadByConfig",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,s,u,o,c=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.positionInfo.load(t,n,(function(e){c.setPosition(e)}));case 2:return r=e.sent,a&&n&&(this.oracle.unsubscribeBars(),this.oracle.addListener("trading",(function(e){c.setIndex(e.close)})),r&&this.setIndex(r.price),i=this.version.isV2?"".concat(n.symbol,"_V2"):n.symbol,this.oracle.load(i)),e.next=6,this.contractInfo.load(t,n);case 6:return s=e.sent,e.next=9,this.loadFundingRate(t,n);case 9:return u=e.sent,e.next=12,this.historyInfo.load(t,n);case 12:o=e.sent,s&&this.setContract(s),u&&this.setFundingRate(u),o&&this.setHistory(o);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getDefaultConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null;if(e.length>0){var a=this.getFromStore();if(a&&Object(w.b)(t.detail.chainId,a.chainId)&&(n=a),n){var r=e.findIndex((function(e){return e.pool===n.pool}));-1===r&&(n=e[0])}else n=e[0]}return n}},{key:"store",value:function(e){Object(w.j)(this.version.current,e)}},{key:"getFromStore",value:function(){return Object(w.e)(this.version.current)}},{key:"refresh",value:function(){var e=Object(h.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pause(),e.next=3,this.positionInfo.load(this.wallet,this.config);case 3:return t=e.sent,this.wallet.loadWalletBalance(this.wallet.detail.chainId,this.wallet.detail.account),e.next=7,this.loadFundingRate(this.wallet,this.config);case 7:return n=e.sent,e.next=10,this.historyInfo.load(this.wallet,this.config);case 10:a=e.sent,n&&this.setFundingRate(n),t&&this.setPosition(t),a&&this.setHistory(a),this.setVolume(""),this.resume();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){this.setPaused(!0),this.oracle.pause(),this.positionInfo.pause()}},{key:"resume",value:function(){this.setPaused(!1),this.oracle.resume(),this.positionInfo.resume(this.wallet,this.config)}},{key:"setWallet",value:function(e){this.wallet=e}},{key:"setConfigs",value:function(e){this.configs=e}},{key:"setConfig",value:function(e){this.config=e}},{key:"setIndex",value:function(e){this.index=e}},{key:"setPosition",value:function(e){e&&(this.position=e)}},{key:"setContract",value:function(e){this.contract=e}},{key:"setHistory",value:function(e){this.history=e}},{key:"setFundingRate",value:function(e){this.fundingRate=e}},{key:"setVolume",value:function(e){this.volume=e}},{key:"setPaused",value:function(e){this.paused=e}},{key:"setUserSelectedDirection",value:function(e){this.userSelectedDirection=e}},{key:"setSlideMargin",value:function(e){if(""!==e){this.slideIncrementMargin=e;var t=this.position,n=t.price||this.index,a=(e-t.marginHeld)/(n*this.contract.multiplier*this.contract.minInitialMarginRatio);this.setVolume(a.toFixed(0))}}},{key:"volumeDisplay",get:function(){return 0===Math.abs(this.volume)||""===this.volume||"-"===this.volume||"e"===this.volume||isNaN(this.volume)?"":Math.abs(this.volume)}},{key:"amount",get:function(){var e=this.position,t=this.contract,n=""===this.volume||isNaN(this.volume)?0:Math.abs(this.volume),a=e.margin,r=e.marginHeldBySymbol,i=e.marginHeld,s=e.unrealizedPnl,u=e.price||this.index,o=Object(x.bg)(i).minus(r);o=o.isNaN()?Object(x.bg)(0):o;var c=n*u*t.multiplier*t.minInitialMarginRatio,p=Object(x.bg)(i);this.isPositive&&"short"===this.userSelectedDirection||this.isNegative&&"long"===this.userSelectedDirection?((p=p.minus(c)).lt(o)&&(p=o.plus(o.minus(p).abs())),r=Object(x.bg)(r).minus(c).abs().toFixed(2)):(p=Object(x.bg)(i).plus(c),r&&(r=Object(x.bg)(r).plus(c).toFixed(2)));var l=a&&Object(x.bg)(a).plus(s).toFixed(2);p=p.gt(l)?l:p.toFixed(2),r&&(r=+r>+l?l:(+r).toFixed(2));var d=Object(x.bg)(l).minus(p).toFixed(2),y=Object(x.bg)(n).multipliedBy(t.multiplier).toFixed(4),f=("short"===this.userSelectedDirection?-this.volumeDisplay+ +e.volume:+this.volumeDisplay+ +e.volume)*u*t.multiplier,m=Math.abs(f/+l).toFixed(1);return d=+d<0?0:d,{volume:this.volume,dynBalance:l,margin:p,available:d,exchanged:y,currentSymbolMarginHeld:r,leverage:m}}},{key:"direction",get:function(){if(""!==this.margin){if(+this.position.volume>0)return Math.abs(this.volume)>Math.abs(this.position.volume)?"long":"short";if(+this.position.volume<0)return+this.volume>Math.abs(+this.position.volume)?"short":"long"}return 0}},{key:"isPositive",get:function(){return Object(x.bg)(this.position.volume).gt(0)}},{key:"isNegative",get:function(){return Object(x.bg)(this.position.volume).isNegative()}},{key:"loadFundingRate",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}if(a=t&&t.isConnected()&&t.supportChain?t.detail.chainId:n.chainId,!n){e.next=7;break}return e.next=5,Object(x.getFundingRate)(a,n.pool,n.symbolId);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fundingRateTip",get:function(){if(this.version&&this.version.isV2){if(this.fundingRate&&this.fundingRate.fundingRatePerBlock&&this.config)return"Funding  Rate (per block) = ".concat(this.fundingRate.fundingRatePerBlock)+"\n1 Long contract pays 1 short contract (".concat(this.fundingRate.fundingRatePerBlock," * IndexPrice * ").concat(this.contract.multiplier," ) ").concat(this.config.bTokenSymbol," per block")}else if(this.fundingRate&&this.fundingRate.fundingRatePerBlock&&this.config)return"Funding  Rate (per block) = ".concat(this.fundingRate.fundingRatePerBlock)+"\n(1 Long contract pays 1 short contract ".concat(this.fundingRate.fundingRatePerBlock," ").concat(this.config.bTokenSymbol," per block)");return""}}]),e}(),F=function(){function e(){Object(T.a)(this,e),this.current=null,Object(O.n)(this,{current:O.p,setCurrent:O.f,isV1:O.g,isV2:O.g});var t=Object(w.i)();this.current=t||null}return Object(g.a)(e,[{key:"setCurrent",value:function(e,t){this.current=e,t||Object(w.k)(e)}},{key:"switch",value:function(){"v1"===this.current?this.setCurrent("v2"):this.setCurrent("v1")}},{key:"isV1",get:function(){return"v1"===this.current}},{key:"isV2",get:function(){return"v2"===this.current}}]),e}(),E=new j,R=new S,D=new F;x.DeriEnv.set("prod"),s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(u.a,{children:Object(p.jsx)(f.a,{wallet:E,trading:R,version:D,children:Object(p.jsx)(y,{})})})}),document.getElementById("root"))},58:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s}));var a=function(){return["https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"]},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",t=arguments.length>1?arguments[1]:void 0;return"prod"!==e&&"production"!==e||!t?"0x7C1267188379f57d92e640E519151229E1eA5565":"0x824B6238EdCbaCCAF83C3F60C0cEB38bEb7C9e89"},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",t=arguments.length>1?arguments[1]:void 0;return"prod"!==e&&"production"!==e||!t?"0x3c9118C7f9f4ef0Ab5333cD710922dBCCC2d870d":"0xd8137F05c1F432A80525053c473d0e286c4F46f0"},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",t=arguments.length>1?arguments[1]:void 0;return"prod"!==e&&"production"!==e||!t?"0x7C1267188379f57d92e640E519151229E1eA5565":"0x35b2650eFb799DF4696b292D11b4770a0fFaa7c7"}},67:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return f}));var a=n(0),r=n.n(a),i=n(15),s=n(1),u=n(8),o=n(2),c=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var s,c,p,l,d,y,f,m,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(o.u)(t,n),!(c=s.bTokenAddress)){e.next=12;break}return p=Object(u.m)(t,n),l=Object(u.a)(t,c,n),e.next=6,Promise.all([l.balance(n),l.balance(a),p.getLiquidity(a)]);case 6:return d=e.sent,y=Object(i.a)(d,3),f=y[0],m=y[1],b=y[2],e.abrupt("return",{poolLiquidity:f.toString(),bTokenBalance:m.toString(),shares:b.toString(),shareValue:"1"});case 12:return console.log("no SlpPool address, please check"),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a,i){var s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.u)(t,n),!c.bTokenAddress){e.next=15;break}return p=Object(u.m)(t,n),e.prev=3,e.next=6,p.addLiquidity(a,i);case 6:l=e.sent,s={success:!0,transaction:l},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s={success:!1,error:e.t0};case 13:e.next=16;break;case 15:s={success:!1,error:"unable to get bToken address of slp pool"};case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a,i){var s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.u)(t,n),!c.bTokenAddress){e.next=15;break}return p=Object(u.m)(t,n),e.prev=3,e.next=6,p.removeLiquidity(a,i);case 6:l=e.sent,s={success:!0,transaction:l},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s={success:!1,error:e.t0};case 13:e.next=16;break;case 15:s={success:!1,error:"unable to get bToken address of slp pool"};case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.u)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.next=4,c.isUnlocked(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.u)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.prev=2,e.next=5,c.unlock(a);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.u)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.next=4,c.balance(a);case 4:return p=e.sent,e.abrupt("return",p.toString());case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return f}));var a=n(0),r=n.n(a),i=n(15),s=n(1),u=n(8),o=n(2),c=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var s,c,p,l,d,y,f,m,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(o.m)(t,n),!(c=s.bTokenAddress)){e.next=12;break}return p=Object(u.b)(t,n),l=Object(u.a)(t,c,n),e.next=6,Promise.all([l.balance(n),l.balance(a),p.getLiquidity(a)]);case 6:return d=e.sent,y=Object(i.a)(d,3),f=y[0],m=y[1],b=y[2],e.abrupt("return",{poolLiquidity:f.toString(),bTokenBalance:m.toString(),shares:b.toString(),shareValue:"1"});case 12:return console.log("no Clp2Pool address, please check"),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a,i){var s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.m)(t,n),!c.bTokenAddress){e.next=15;break}return p=Object(u.b)(t,n),e.prev=3,e.next=6,p.addLiquidity(a,i);case 6:l=e.sent,s={success:!0,transaction:l},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s={success:!1,error:e.t0};case 13:e.next=16;break;case 15:s={success:!1,error:"unable to get bToken address of clp2 pool"};case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a,i){var s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.m)(t,n),!c.bTokenAddress){e.next=15;break}return p=Object(u.b)(t,n),e.prev=3,e.next=6,p.removeLiquidity(a,i);case 6:l=e.sent,s={success:!0,transaction:l},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s={success:!1,error:e.t0};case 13:e.next=16;break;case 15:s={success:!1,error:"unable to get bToken address of clp2 pool"};case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.m)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.next=4,c.isUnlocked(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c,p,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.m)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.prev=2,e.next=5,c.unlock(a);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a){var i,s,c,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.m)(t,n),s=i.bTokenAddress,c=Object(u.a)(t,s,n),e.next=4,c.balance(a);case 4:return p=e.sent,e.abrupt("return",p.toString());case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return m}));var a=n(66),r=n(0),i=n.n(r),s=n(15),u=n(1),o=n(8),c=n(2),p=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,u,p,l,d,y,f,m,b,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.n)(t,n),u=r.lTokenAddress,p=Object(o.c)(t,n),l=Object(o.h)(t,u,n),e.next=5,Promise.all([l.balance(a),l.totalSupply()]);case 5:return d=e.sent,y=Object(s.a)(d,2),f=y[0],m=y[1],e.next=11,p.getStateValues();case 11:return b=e.sent,v=b.liquidity,e.abrupt("return",{totalSupply:m.toString(),poolLiquidity:v.toString(),shares:f.toString(),shareValue:(m.eq(0)?Object(c.c)(0):v.div(m)).toString(),maxRemovableShares:f.toString()});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,s){var u,p,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=Object(c.n)(t,n),!p.bTokenAddress){e.next=16;break}return l=Object(o.c)(t,n),e.prev=3,e.next=6,l.addLiquidity(r,s);case 6:d=e.sent,console.log(d,Object(a.a)(d)),u={success:!0,transaction:d},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),u={success:!1,error:e.t0};case 14:e.next=17;break;case 16:u={success:!1,error:"unable to get bToken address of clp pool"};case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a,r){var s,u,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=Object(c.n)(t,n),!u.bTokenAddress){e.next=15;break}return p=Object(o.c)(t,n),e.prev=3,e.next=6,p.removeLiquidity(a,r);case 6:l=e.sent,s={success:!0,transaction:l},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s={success:!1,error:e.t0};case 13:e.next=16;break;case 15:s={success:!1,error:"unable to get bToken address of clp pool"};case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.n)(t,n),s=r.bTokenAddress,u=Object(o.a)(t,s,n),e.next=4,u.isUnlocked(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,s,u,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.n)(t,n),s=r.bTokenAddress,u=Object(o.a)(t,s,n),e.prev=2,e.next=5,u.unlock(a);case 5:l=e.sent,p={success:!0,transaction:l},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p={success:!1,error:e.t0};case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,s,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.n)(t,n),s=r.bTokenAddress,u=Object(o.a)(t,s,n),e.next=4,u.balance(a);case 4:return p=e.sent,e.abrupt("return",p.toString());case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},8:function(e,t,n){"use strict";n.d(t,"e",(function(){return J})),n.d(t,"f",(function(){return Q})),n.d(t,"d",(function(){return Z})),n.d(t,"l",(function(){return ee})),n.d(t,"a",(function(){return te})),n.d(t,"k",(function(){return ne})),n.d(t,"h",(function(){return ae})),n.d(t,"i",(function(){return re})),n.d(t,"m",(function(){return ie})),n.d(t,"c",(function(){return se})),n.d(t,"b",(function(){return ue})),n.d(t,"g",(function(){return oe})),n.d(t,"n",(function(){return ce})),n.d(t,"j",(function(){return pe}));var a=n(120),r=n(55),i=n(0),s=n.n(i),u=n(1),o=n(4),c=n(5),p=n(11),l=n(10),d=n(16),y=n.n(d),f=n(105),m=532731,b=function(){function e(t,n,a){Object(o.a)(this,e),this.chainId=t,this.contractAddress=n,this.web3=a?Object(f.b)(t):Object(f.a)()}return Object(c.a)(e,[{key:"setAccount",value:function(e){return this.accountAddress=e,this}},{key:"setPool",value:function(e){return this.poolAddress=e,this}},{key:"_call",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:[],e.next=3,(n=this.contract.methods)[t].apply(n,Object(r.a)(a)).call();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_estimatedGas",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i,u,o,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:[],a=c.length>2?c[2]:void 0,i=0,u=0;case 4:if(!(u<2)){e.next=18;break}return e.prev=5,e.next=8,(o=this.contract.methods)[t].apply(o,Object(r.a)(n)).estimateGas({from:a});case 8:return i=e.sent,i=parseInt(1.25*i),e.abrupt("break",18);case 13:e.prev=13,e.t0=e.catch(5);case 15:u++,e.next=4;break;case 18:return 0==i&&(i=m),i>m&&(i=m),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(e){var t=this;return function n(a,r){t.web3.eth.getTransactionReceipt(e,(function(e,t){e?r(e):null===t?setTimeout((function(){return n(a,r)}),500):!1===t.status?(t.errorMessage="Transaction failed",r(t)):a(t)}))}}},{key:"_transact",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var i,u,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._estimatedGas(t,n,a);case 2:return u=e.sent,o=[{from:a,to:this.contractAddress,gas:y.a.utils.numberToHex(u),value:y.a.utils.numberToHex("0"),data:(i=this.contract.methods)[t].apply(i,Object(r.a)(n)).encodeABI()}],e.next=6,window.ethereum.request({method:"eth_sendTransaction",params:o});case 6:return c=e.sent,e.next=9,new Promise(this._getTransactionReceipt(c));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),v=n(2),h=n(28),T=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"DepositMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"tradeVolume",type:"int256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"Trade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"WithdrawMargin",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"pToken",type:"address"},{internalType:"address",name:"lToken",type:"address"},{internalType:"address",name:"oracle",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"multiplier",type:"uint256"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"minPoolMarginRatio",type:"uint256"},{internalType:"uint256",name:"minInitialMarginRatio",type:"uint256"},{internalType:"uint256",name:"minMaintenanceMarginRatio",type:"uint256"},{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"},{internalType:"uint256",name:"minLiquidationReward",type:"uint256"},{internalType:"uint256",name:"maxLiquidationReward",type:"uint256"},{internalType:"uint256",name:"liquidationCutRatio",type:"uint256"},{internalType:"uint256",name:"priceDelayAllowance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"int256",name:"cumuFundingRate",type:"int256"},{internalType:"uint256",name:"cumuFundingRateBlock",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[4]",name:"addresses_",type:"address[4]"},{internalType:"uint256[12]",name:"parameters_",type:"uint256[12]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"}],g=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(T,i.contractAddress),i}return Object(c.a)(n,[{key:"symbol",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("symbol");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.c)(0),e.prev=1,e.next=4,this._call("getStateValues");case 4:a=e.sent,t={cumuFundingRate:Object(v.f)(a.cumuFundingRate),cumuFundingRateBlock:Object(v.c)(a.cumuFundingRateBlock),liquidity:Object(v.f)(a.liquidity),tradersNetVolume:Object(v.f)(a.tradersNetVolume),tradersNetCost:Object(v.f)(a.tradersNetCost)},e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t={cumuFundingRate:n,cumuFundingRateBlock:n,liquidity:n,tradersNetCost:n,tradersNetVolume:n},console.log("getStateValues: ".concat(e.t0));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getParameters",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.c)(0),e.prev=1,e.next=4,this._call("getParameters");case 4:a=e.sent,t={multiplier:Object(v.f)(a.multiplier),feeRatio:Object(v.f)(a.feeRatio),minPoolMarginRatio:Object(v.f)(a.minPoolMarginRatio),minInitialMarginRatio:Object(v.f)(a.minInitialMarginRatio),minMaintenanceMarginRatio:Object(v.f)(a.minMaintenanceMarginRatio),minAddLiquidity:Object(v.f)(a.minAddLiquidity),redemptionFeeRatio:Object(v.f)(a.redemptionFeeRatio),fundingRateCoefficient:Object(v.f)(a.fundingRateCoefficient),minLiquidationReward:Object(v.f)(a.minLiquidationReward),maxLiquidationReward:Object(v.f)(a.maxLiquidationReward),liquidationCutRatio:Object(v.f)(a.liquidationCutRatio),priceDelayAllowance:Object(v.c)(a.priceDelayAllowance)},e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t={multiplier:n,feeRatio:n,minPoolMarginRatio:n,minInitialMarginRatio:n,minMaintenanceMarginRatio:n,minAddLiquidity:n,redemptionFeeRatio:n,fundingRateCoefficient:n,minLiquidationReward:n,maxLiquidationReward:n,liquidationCutRatio:n,priceDelayAllowance:n},console.log("getParameters: ".concat(e.t0));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(e){var t=this;return function n(a,r){t.web3.eth.getTransactionReceipt(e,(function(e,t){e?r(e):null==t?setTimeout((function(){return n(a,r)}),500):!1===t.status?(t.errorMessage="Transaction failed",r(t)):a(t)}))}}},{key:"_estimatedGas",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var i,u,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,u=0;case 2:if(!(u<20)){e.next=16;break}return e.prev=3,e.next=6,(o=this.contract.methods)[t].apply(o,Object(r.a)(n)).estimateGas({from:a});case 6:return i=e.sent,i=parseInt(1.25*i),e.abrupt("break",16);case 11:e.prev=11,e.t0=e.catch(3);case 13:u++,e.next=2;break;case 16:return 0==i&&(i=532731),i>532731&&(i=532731),e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_transactPool",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i,u,o,c,p,l,d=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:[],i=d.length>2?d[2]:void 0,e.next=4,Object(v.s)(this.chainId,this.contractAddress);case 4:return u=e.sent,o=[u.timestamp,u.price,u.v,u.r,u.s],e.next=8,this._estimatedGas(t,[].concat(Object(r.a)(a),o),i);case 8:return c=e.sent,p=[{from:i,to:this.contractAddress,gas:y.a.utils.numberToHex(c),value:y.a.utils.numberToHex("0"),data:(n=this.contract.methods)[t].apply(n,Object(r.a)(a).concat(o)).encodeABI()}],e.next=12,window.ethereum.request({method:"eth_sendTransaction",params:p});case 12:return l=e.sent,e.next=15,new Promise(this._getTransactionReceipt(l));case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFundingRate",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,i,u,o,c,p,l,d,y,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.k)(this.chainId,this.contractAddress);case 2:return t=e.sent,e.prev=3,e.next=6,this.getStateValues();case 6:return i=e.sent,u=i.tradersNetVolume,o=i.liquidity,e.next=11,this.getParameters();case 11:return c=e.sent,p=c.multiplier,l=c.fundingRateCoefficient,d=c.minPoolMarginRatio,y=[u,t,p,o,l],v.v.apply(void 0,y)?(n="0",a="0"):(a=h.b.apply(void 0,y),n=Object(h.k)(this.chainId,a)),f=[u,t,p,o,d],r=v.v.apply(void 0,f)?"0":h.d.apply(void 0,f),e.abrupt("return",{price:t,multiplier:p.toString(),fundingRate:n,fundingRatePerBlock:a,tradersNetVolume:u.toString(),liquidity:o.toString(),fundingRateCoefficient:l.toString(),liquidityUsed:r,poolMarginRatio:d.toString()});case 22:throw e.prev=22,e.t0=e.catch(3),console.log("PerpetualPool#gerFundingRate():",e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[3,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"depositMargin",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("depositMargin"),e.prev=1,e.next=4,this._transactPool("depositMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[n],t);case 4:r=e.sent,a={success:!0,transaction:r},e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("here"),a={success:!1,error:e.t0};case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBlockInfo",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getBlock(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,i,u,o,c,p,l,d,y=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y.length>1&&void 0!==y[1]?y[1]:{},r=y.length>2&&void 0!==y[2]?y[2]:0,i=y.length>3&&void 0!==y[3]?y[3]:0,u=[],o="56"===this.chainId?1999:4999,r+o>i&&(o=i-r);case 6:if(!(r<=i)){e.next=16;break}return e.next=9,this.contract.getPastEvents(t,{filter:n,fromBlock:r,toBlock:r+o});case 9:c=e.sent,p=Object(a.a)(c);try{for(p.s();!(l=p.n()).done;)d=l.value,u.push(d)}catch(s){p.e(s)}finally{p.f()}(r+=o+1)+o>i&&(o=i-r),e.next=6;break;case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getTimeStamp",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getBlock(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_calculateFee",value:function(e,t,n,a){return Object(v.c)(e).abs().times(t).times(n).times(a).toString()}}]),n}(b),x=n(15),k=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_upgradedAddress",type:"address"}],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_evilUser",type:"address"}],name:"addBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"upgradedAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maximumFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"},{name:"amount",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_maker",type:"address"}],name:"getBlackListStatus",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowed",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"who",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newBasisPoints",type:"uint256"},{name:"newMaxFee",type:"uint256"}],name:"setParams",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"issue",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"redeem",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"basisPointsRate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"isBlackListed",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_clearedUser",type:"address"}],name:"removeBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_UINT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_blackListedUser",type:"address"}],name:"destroyBlackFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Redeem",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"newAddress",type:"address"}],name:"Deprecate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"feeBasisPoints",type:"uint256"},{indexed:!1,name:"maxFee",type:"uint256"}],name:"Params",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_blackListedUser",type:"address"},{indexed:!1,name:"_balance",type:"uint256"}],name:"DestroyedBlackFunds",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"AddedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"RemovedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"}],w=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,e,a,i)).poolAddress=r,s.contract=new s.web3.eth.Contract(k,s.contractAddress),s}return Object(c.a)(n,[{key:"isUnlocked",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("allowance",[t,this.poolAddress]);case 2:return n=e.sent,n=Object(v.f)(n),e.abrupt("return",n.gt(0));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unlock",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._transact("approve",[this.poolAddress,v.b],t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"symbol",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("symbol");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decimals",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("decimals");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_balance",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("balanceOf",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"balance",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._balance(t),this.decimals()]);case 2:return n=e.sent,a=Object(x.a)(n,2),r=a[0],i=a[1],e.abrupt("return",Object(v.c)(r,-i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),O=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"Update",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"margin",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"}],j=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,e,a,i)).poolAddress=r,s.contract=new s.web3.eth.Contract(O,s.contractAddress),s}return Object(c.a)(n,[{key:"getPositionInfo",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,this._call("getPosition(address)",[t]);case 4:a=e.sent,n={volume:Object(v.f)(a[0]),cost:Object(v.f)(a[1]),lastCumuFundingRate:Object(v.f)(a[2]),margin:Object(v.f)(a[3]),lastUpdateTimestamp:Object(v.c)(a[4])},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n={volume:Object(v.c)(0),cost:Object(v.c)(0),lastCumuFundingRate:Object(v.c)(0),margin:Object(v.c)(0),lastUpdateTimestamp:Object(v.c)(0)};case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"exists",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("exists",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),A=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],M=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,e,a,i)).poolAddress=r,s.contract=new s.web3.eth.Contract(A,s.contractAddress),s}return Object(c.a)(n,[{key:"balance",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.f,e.next=3,this._call("balanceOf",[t]);case 3:return e.t1=e.sent,n=(0,e.t0)(e.t1),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.f,e.next=3,this._call("totalSupply");case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(b),I=n(58),C=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"data",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"keys",type:"string[]"}],name:"getValues",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"key",type:"string"},{internalType:"bytes32",name:"value",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"pairs",type:"tuple[]"}],name:"setValues",outputs:[],stateMutability:"nonpayable",type:"function"}],P=function(){function e(t,n){Object(o.a)(this,e),this.providerUrl=n,this.contractAddress=t,this.providerUrl&&this._init()}return Object(c.a)(e,[{key:"_init",value:function(){this.web3=new y.a(new y.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(C,this.contractAddress)}},{key:"updateProviderUrl",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.providerUrl){e.next=7;break}return e.next=3,Object(v.i)(Object(I.c)());case 3:this.providerUrl=e.sent,this._init(),e.next=17;break;case 7:if(e.t0=this.providerUrl,!e.t0){e.next=12;break}return e.next=11,Object(v.d)(this.providerUrl);case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=17;break}return e.next=15,Object(v.i)(Object(I.c)());case 15:this.providerUrl=e.sent,this._init();case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getValues",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=3;case 1:if(!(a>0)){e.next=18;break}return e.prev=2,e.next=5,this.updateProviderUrl();case 5:return e.next=7,this.contract.methods.getValues(t).call();case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.providerUrl=null;case 13:if(!n){e.next=15;break}return e.abrupt("break",18);case 15:a-=1,e.next=1;break;case 18:if(0!==a||n){e.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"values",type:"tuple[]"}],name:"setSignature",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"signature",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"bool",name:"valid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"values",type:"address[]"}],name:"unsetSignature",outputs:[],stateMutability:"nonpayable",type:"function"}],B=function(){function e(t,n){Object(o.a)(this,e),this.providerUrl=n,this.contractAddress=t,this.providerUrl&&this._init()}return Object(c.a)(e,[{key:"updateProviderUrl",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.providerUrl){e.next=7;break}return e.next=3,Object(v.i)(Object(I.c)());case 3:this.providerUrl=e.sent,this._init(),e.next=17;break;case 7:if(e.t0=this.providerUrl,!e.t0){e.next=12;break}return e.next=11,Object(v.d)(this.providerUrl);case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=17;break}return e.next=15,Object(v.i)(Object(I.c)());case 15:this.providerUrl=e.sent,this._init();case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_init",value:function(){this.web3=new y.a(new y.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(_,this.contractAddress)}},{key:"signature",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=3;case 1:if(!(a>0)){e.next=18;break}return e.prev=2,e.next=5,this.updateProviderUrl();case 5:return e.next=7,this.contract.methods.signature(t).call();case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.providerUrl=null;case 13:if(!n){e.next=15;break}return e.abrupt("break",18);case 15:a-=1,e.next=1;break;case 18:if(0!==a||n){e.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"data",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"keys",type:"string[]"}],name:"getValues",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"key",type:"string"},{internalType:"bytes32",name:"value",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"pairs",type:"tuple[]"}],name:"setValues",outputs:[],stateMutability:"nonpayable",type:"function"}],F=function(){function e(t,n){Object(o.a)(this,e),this.providerUrl=n,this.contractAddress=t,this.providerUrl&&this._init()}return Object(c.a)(e,[{key:"_init",value:function(){this.web3=new y.a(new y.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(S,this.contractAddress)}},{key:"updateProviderUrl",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.providerUrl){e.next=7;break}return e.next=3,Object(v.i)(Object(I.c)());case 3:this.providerUrl=e.sent,this._init(),e.next=17;break;case 7:if(e.t0=this.providerUrl,!e.t0){e.next=12;break}return e.next=11,Object(v.d)(this.providerUrl);case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=17;break}return e.next=15,Object(v.i)(Object(I.c)());case 15:this.providerUrl=e.sent,this._init();case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getValues",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=3;case 1:if(!(a>0)){e.next=18;break}return e.prev=2,e.next=5,this.updateProviderUrl();case 5:return e.next=7,this.contract.methods.getValues(t).call();case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.providerUrl=null;case 13:if(!n){e.next=15;break}return e.abrupt("break",18);case 15:a-=1,e.next=1;break;case 18:if(0!==a||n){e.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],R=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(E,i.contractAddress),i}return Object(c.a)(n,[{key:"mintDToken",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i,u,o,c,p=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=p.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=p[i];return e.next=3,this._estimatedGas("claim",[t].concat(r),t);case 3:return u=e.sent,console.log(u),o=[{from:t,to:this.contractAddress,gas:y.a.utils.numberToHex(u),value:y.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[t].concat(r)).encodeABI()}],e.next=8,window.ethereum.request({method:"eth_sendTransaction",params:o});case 8:return c=e.sent,e.next=11,new Promise(this._getTransactionReceipt(c));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),D=[{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"address",name:"miningVault_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v1",type:"uint8"},{internalType:"bytes32",name:"r1",type:"bytes32"},{internalType:"bytes32",name:"s1",type:"bytes32"},{internalType:"uint8",name:"v2",type:"uint8"},{internalType:"bytes32",name:"r2",type:"bytes32"},{internalType:"bytes32",name:"s2",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"miningVault",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],q=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(D,i.contractAddress),i}return Object(c.a)(n,[{key:"mint",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i,u,o,c,p=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=p.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=p[i];return e.next=3,this._estimatedGas("claim",[t].concat(r),t);case 3:return u=e.sent,o=[{from:t,to:this.contractAddress,gas:y.a.utils.numberToHex(u),value:y.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[t].concat(r)).encodeABI()}],e.next=7,window.ethereum.request({method:"eth_sendTransaction",params:o});case 7:return c=e.sent,e.next=10,new Promise(this._getTransactionReceipt(c));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),L=n(87),U=n(17),N=[{inputs:[{internalType:"contractSushiToken",name:"_sushi",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_sushiPerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"},{internalType:"uint256",name:"_bonusEndBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contractIERC20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"bonusEndBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contractIMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingSushi",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contractIERC20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accSushiPerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contractIMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushi",outputs:[{internalType:"contractSushiToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushiPerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],V=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(N,i.contractAddress),i}return Object(c.a)(n,[{key:"addLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[152,Object(v.B)(n)],e.next=3,this._transact("deposit",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[152,Object(v.B)(n)],e.next=3,this._transact("withdraw",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("userInfo",[152,t]);case 2:if(!(n=e.sent)||!n.amount){e.next=7;break}return e.abrupt("return",Object(v.f)(n.amount));case 7:return console.log("the amount is not exist "),e.abrupt("return","0");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),H=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"mintAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"removeAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"lToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[2]",name:"addresses_",type:"address[2]"},{internalType:"uint256[2]",name:"parameters_",type:"uint256[2]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lAmount",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],W=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(H,i.contractAddress),i}return Object(c.a)(n,[{key:"addLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[Object(v.B)(n)],e.next=3,this._transact("addLiquidity",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[Object(v.B)(n)],e.next=3,this._transact("removeLiquidity",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParameters",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getParameters");case 2:return t=e.sent,e.abrupt("return",{minAddLiquidity:Object(v.f)(t.minAddLiquidity),redemptionFeeRatio:Object(v.f)(t.redemptionFeeRatio)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getStateValues");case 2:return t=e.sent,e.abrupt("return",{liquidity:Object(v.f)(t)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("getStateValues");case 2:if(!(t=e.sent)||!t.liquidity){e.next=5;break}return e.abrupt("return",Object(v.f)(t.liquidity));case 5:throw new Error("unable to get liquidity of this clp pool ".concat(this.poolAddress));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(b),$=[{inputs:[{internalType:"contract CakeToken",name:"_cake",type:"address"},{internalType:"contract SyrupBar",name:"_syrup",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_cakePerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contract IBEP20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cake",outputs:[{internalType:"contract CakeToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"cakePerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"enterStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"leaveStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contract IMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingCake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contract IBEP20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accCakePerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"syrup",outputs:[{internalType:"contract SyrupBar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multiplierNumber",type:"uint256"}],name:"updateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract($,i.contractAddress),i}return Object(c.a)(n,[{key:"addLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[391,Object(v.B)(n)],e.next=3,this._transact("deposit",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[391,Object(v.B)(n)],e.next=3,this._transact("withdraw",a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("userInfo",[391,t]);case 2:if(!(n=e.sent)||!n.amount){e.next=7;break}return e.abrupt("return",Object(v.f)(n.amount));case 7:return console.log("the amount is not exist "),e.abrupt("return","0");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),G=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldController",type:"address"},{indexed:!1,internalType:"address",name:"newController",type:"address"}],name:"ChangeController",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],K=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,e,a,i)).poolAddress=r,s.contract=new s.web3.eth.Contract(G,s.contractAddress),s}return Object(c.a)(n,[{key:"isUnlocked",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("allowance",[t,this.poolAddress]);case 2:return n=e.sent,e.abrupt("return",Object(v.f)(n).gt(0));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unlock",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._transact("approve",[this.poolAddress,v.b],t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decimals",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("decimals");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_balance",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._call("balanceOf",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"balance",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._balance(t),this.decimals()]);case 2:return n=e.sent,a=Object(x.a)(n,2),r=a[0],i=a[1],e.abrupt("return",Object(v.c)(r,-i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b),X=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"bool",name:"allowMintBurn_",type:"bool"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Freeze",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"allowMintBurn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"fromNonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"}],name:"freeze",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Y=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,a,r)).contract=new i.web3.eth.Contract(X,i.contractAddress),i}return Object(c.a)(n,[{key:"freeze",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(v.o)(a),i=r.wormholeAddress,e.abrupt("return",this._transact("freeze",[Object(v.B)(n),a,i],t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"mintDeri",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a,r,i,u,o,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._transact("claim",[n,a,r,i,u,o,c],t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,i,s,u,o){return e.apply(this,arguments)}}()}]),n}(b),J=function(){var e={};return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBAddressConfig)(L.a.get(),t),a=n;if(Object.keys(e).includes(a))return e[a];var r=new P(n);return e[a]=r,r}}(),Q=function(){var e={};return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBWormholeAddressConfig)(L.a.get(),t),a=n;if(Object.keys(e).includes(a))return e[a];var r=new B(n);return e[a]=r,r}}(),Z=function(){var e={};return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBAirdropAddressConfig)(L.a.get(),t),a=n;if(Object.keys(e).includes(a))return e[a];var r=new F(n);return e[a]=r,r}}(),ee=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new g(t,n,r);return e[a]=i,i}}(),te=function(){var e={};return function(t,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(t,".").concat(n,".").concat(a,".isProvider"):"".concat(t,".").concat(n,".").concat(a),Object.keys(e).includes(r))return e[r];var s=new w(t,n,a,i);return e[r]=s,s}}(),ne=function(){var e={};return function(t,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(t,".").concat(n,".").concat(a,".isProvider"):"".concat(t,".").concat(n,".").concat(a),Object.keys(e).includes(r))return e[r];var s=new j(t,n,a,i);return e[r]=s,s}}(),ae=function(){var e={};return function(t,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(t,".").concat(n,".").concat(a,".isProvider"):"".concat(t,".").concat(n,".").concat(a),Object.keys(e).includes(r))return e[r];var s=new M(t,n,a,i);return e[r]=s,s}}(),re=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new R(t,n,r);return e[a]=i,i}}(),ie=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new V(t,n,r);return e[a]=i,i}}(),se=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new W(t,n,r);return e[a]=i,i}}(),ue=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new z(t,n,r);return e[a]=i,i}}(),oe=function(){var e={};return function(t,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(r))return e[r];var s=new K(t,n,a,i);return e[r]=s,s}}(),ce=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new Y(t,n,r);return e[a]=i,i}}(),pe=function(){var e={};return function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(t,".").concat(n,".isProvider"):"".concat(t,".").concat(n),Object.keys(e).includes(a))return e[a];var i=new q(t,n,r);return e[a]=i,i}}()},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e="dev";return{get:function(){return e},set:function(t){if("dev"!==t&&"prod"!==t&&"production"!==t)throw new Error("please use 'dev' or 'prod' for DeriEnv");e=t}}}()},9:function(e,t,n){"use strict";n.r(t),n.d(t,"getChainProviderUrls",(function(){return a})),n.d(t,"getAnnualBlockNumberConfig",(function(){return r})),n.d(t,"MAX_UINT256",(function(){return i})),n.d(t,"MAX_INT256",(function(){return s})),n.d(t,"getPoolConfigList",(function(){return o})),n.d(t,"getFilteredPoolConfigList",(function(){return c})),n.d(t,"getPoolConfig",(function(){return p})),n.d(t,"getOracleConfigList",(function(){return l})),n.d(t,"getOracleConfig",(function(){return d}));var a=function(e){var t=[{provider_urls:["https://mainnet.infura.io/v3/d0e6582644a845ee8d7c3c18683fec06"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://rpc-mainnet.matic.network","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet.chainstacklabs.com","https://matic-mainnet-full-rpc.bwarelabs.com","https://matic-mainnet-archive-rpc.bwarelabs.com"],chainId:"137"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"},{provider_urls:["https://rpc-mumbai.matic.today","https://rpc-mumbai.maticvigil.com","https://matic-mumbai.chainstacklabs.com","https://matic-testnet-archive-rpc.bwarelabs.com"],chainId:"80001"}].filter((function(t){return t.chainId===e}));if(t.length>0)return t[0].provider_urls;throw new Error("getChainProviderUrls: no urls for chainId ".concat(e))},r=function(){return{1:"2367422",56:"10497304",128:"10511369",3:"2367422",97:"10497304",256:"10511369",137:"15063056",80001:"15063056"}},i="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",s="0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",u=n(17);const o=(e="dev")=>"prod"===e?[{pool:"0x19c2655A0e1639B189FB0CF06e02DC0254419D92",pToken:"0x2AA5865BF556ab3f6Cd9405e565099f70234dF05",lToken:"0x6f8F1C2781b555B63F1A1BE85BF99aEe27d87cB2",router:"0xC9C234243f48Fa05A993c29B4F5f93048f5b07E4",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",bTokenId:"0",initialBlock:"7884650",bTokenSymbol:"BUSD",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"56",version:"v2"},{pool:"0x19c2655A0e1639B189FB0CF06e02DC0254419D92",pToken:"0x2AA5865BF556ab3f6Cd9405e565099f70234dF05",lToken:"0x6f8F1C2781b555B63F1A1BE85BF99aEe27d87cB2",router:"0xC9C234243f48Fa05A993c29B4F5f93048f5b07E4",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",bTokenId:"0",initialBlock:"7884650",bTokenSymbol:"BUSD",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"56",version:"v2"}]:[{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0x4038191eFb39Fe1d21a48E061F8F14cF4981A0aF",bTokenId:"0",initialBlock:"9516935",bTokenSymbol:"BUSD",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0x4038191eFb39Fe1d21a48E061F8F14cF4981A0aF",bTokenId:"0",initialBlock:"9516935",bTokenSymbol:"BUSD",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"},{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0xd2F37BADdB702FF778aA038C63b7068054d93508",bTokenId:"1",initialBlock:"9516935",bTokenSymbol:"AUTO",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0xd2F37BADdB702FF778aA038C63b7068054d93508",bTokenId:"1",initialBlock:"9516935",bTokenSymbol:"AUTO",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"},{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0x5b403E0f6686725171c2Baa7A0b7cD4253B0bc57",bTokenId:"2",initialBlock:"9516935",bTokenSymbol:"CAKE",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",pToken:"0x270128C2d7E8713c8c25F7800738C29214eAFeBA",lToken:"0x904262d92B21e5214278632d01405738d841d82a",router:"0x07fb21FE50A31dFaf312dFa9f5BA5CF14DC7E1e6",bToken:"0x5b403E0f6686725171c2Baa7A0b7cD4253B0bc57",bTokenId:"2",initialBlock:"9516935",bTokenSymbol:"CAKE",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"},{pool:"0x35a85396e7A8a9E85170fbb589ce085abcAd8266",pToken:"0x3495f770eC0dc8701d2b89454047A8521306E070",lToken:"0xeFCbBF65100FC2C2b96E92c9AbFfeC384177943e",router:"0x4861a9958B65eA8146B89Af929a80c352c905270",bToken:"0x1BD7B233B054AD4D1FBb767eEa628f28fdE314c6",bTokenId:"0",initialBlock:"14917984",bTokenSymbol:"USDT",symbol:"ETHUSD",symbolId:"0",unit:"ETH",chainId:"80001",version:"v2"},{pool:"0x35a85396e7A8a9E85170fbb589ce085abcAd8266",pToken:"0x3495f770eC0dc8701d2b89454047A8521306E070",lToken:"0xeFCbBF65100FC2C2b96E92c9AbFfeC384177943e",router:"0x4861a9958B65eA8146B89Af929a80c352c905270",bToken:"0x1BD7B233B054AD4D1FBb767eEa628f28fdE314c6",bTokenId:"0",initialBlock:"14917984",bTokenSymbol:"USDT",symbol:"MATICUSD",symbolId:"1",unit:"MATIC",chainId:"80001",version:"v2"}],c=(e,t,n)=>{t="number"===typeof t?t.toString():t,n="number"===typeof n?n.toString():n;const a=o(u.DeriEnv.get()),r=null!=t?null!=n?a=>a.pool===e&&a.bTokenId===t&&a.symbolId===n:n=>n.pool===e&&n.bTokenId===t:null!=n?t=>t.pool===e&&t.symbolId===n:t=>t.pool===e;if(a.length>0){const e=a.filter(r);if(e&&e.length>0)return e}throw new Error(`Cannot find the pool config by poolAddress(${e}) bTokenId(${t}) and symbolId(${n})`)},p=(e,t,n)=>c(e,t,n)[0],l=()=>"prod"===u.DeriEnv.get()?[{chainId:"56",symbol:"BTCUSD",address:"0xe3C58d202D4047Ba227e437b79871d51982deEb7"},{chainId:"56",symbol:"ETHUSD",address:"0x9BA8966B706c905E594AcbB946Ad5e29509f45EB"}]:[{chainId:"97",symbol:"BTCUSD",address:"0x72Dba14f90bFF7D74B7556A37205c1291Db7f1E9",decimal:"18"},{chainId:"97",symbol:"ETHUSD",address:"0x36aF683ba23ef721780FCc0e64F25EB72B294020",decimal:"18"},{chainId:"80001",symbol:"ETHUSD",address:"0x0715A7794a1dc8e42615F059dD6e406A6594651A",decimal:"8"},{chainId:"80001",symbol:"MATICUSD",address:"0xd0D5e3DB44DE05E9F294BB0a3bEEaF030DE24Ada",decimal:"8"}],d=(e,t)=>{const n=l().filter((n=>t?n.chainId===e&&n.symbol===t:n.chainId===e));if(n.length>0)return t?n[0]:n;throw new Error("getOracleConfig(): invalid chainId or symbol.",e,t)}}},[[567,6,7]]]);
//# sourceMappingURL=main.fd1df899.chunk.js.map