{"version":3,"sources":["components/Claim/Claim.js","hooks/useSpecification.js","components/Mining/Liquidity/Liquidity.js","components/Mining/Liquidity/Dialog/AddLiquidity.js","components/Mining/Liquidity/Dialog/RemoveLiquidity.js","components/Mining/Liquidity/LiquidityMining.js","components/Mining/Trade/Liquidity.js","../node_modules/react-modal/lib/index.js","components/Button/Button.js","utils/DeriNumberFormat.js","hooks/useDisableScroll.js","hooks/useClaimInfo.js"],"names":["Claim","wallet","miningClaim","tradingClaim","lang","btnText","setBtnText","useState","claimed","setClaimed","claimInfo","claimInfoInterval","useClaimInfo","remainingTime","setRemainingTime","config","useConfig","chainId","useEffect","interval","window","setInterval","period","current","parseInt","Date","now","dis","h","m","s","isConnected","clearInterval","detail","account","className","harvestDeriLp","harvestDeriTrade","unclaimed","toFixed","value","decimalScale","name","click","async","undefined","alert","eqInNumber","mintDToken","success","claim","connect","e","useSpecification","address","symbolId","spec","setSpec","getSpecification","loadSpec","AddDialog","withModal","baseToken","onClose","afterAdd","balance","isLpPool","baseTokenId","amount","setAmount","decimal","setDecimal","addValue","setAddValue","useDisableScroll","substring","indexOf","length","onClick","displayType","thousandSeparator","allowZero","style","display","type","placeholder","onChange","target","DeriNumberFormat","Button","max","bg","gt","minAddLiquidity","isNaN","res","addLpLiquidity","addLiquidity","afterClick","RemoveDialog","liqInfo","afterRemove","unit","version","setBalance","formatShares","totalShares","data-dismiss","cur","removeLpLiquidity","removeLiquidity","eq","Operator","loadLiqidityInfo","isApproved","setIsApproved","btnType","setBtnType","isOpen","setIsOpen","buttonElment","setButtonElment","loadBalance","a","total","openConfigListCache","update","getLpWalletBalance","getWalletBalance","isApprove","isLpUnlocked","result","isUnlocked","approve","unlockLp","unlock","error","message","refresh","el","switchNetwork","id","modalIsOpen","inject","observer","loading","liquidity","setLiquidity","bToken","setBToken","loadLiquidityInfo","getPoolInfoApy","apyPool","getPoolLiquidity","pooLiquidity","info","getLpLiquidityInfo","getLiquidityInfo","isLP","getLpPoolInfoApy","lapy","lpApy","apy2","shares","multipliedBy","shareValue","poolLiquidity","apy","percent","dividedBy","toString","values","sharesTitle","pnl","swappedPnl","pnlToken","bToken0Symbol","multiplier","loaded","isCakeLP","href","test","rel","suffix","tip","isSushiLP","prefix","LiquidityMining","props","configInfo","Config","userInfoInPool","setUserInfoInPool","tradeSummary","setTradeSummary","history","useHistory","userInfo","getUserInfoAll","userInfoPool","getUserInfoInPool","trade","myTradingVolumeCurrent","volume1h","loadUserInfoInPool","totalTradingVolumeCurrent","getTradeInfo","configs","load","isV1","find","c","pool","storeConfig","push","Object","defineProperty","exports","obj","_Modal","require","_Modal2","__esModule","default","module","disabled","checkApprove","status","setStatus","pending","setPending","buttonText","setbuttonText","loadRef","useRef","beforeAction","afterAction","bTokenId","loadApproveStatus","ref","marginRight","renderablity","setRenderablity","isValidate","Math","abs","defaultValue","others","fixedDecimalScale","timeout","setTimeout","clearTimeout","nested","document","querySelector","overflow","setClaimInfo","loadClaimInfo","valid","lp"],"mappings":"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","file":"static/js/12.d15812a6.chunk.js","sourcesContent":["import { useState, useEffect} from 'react'\n\nimport useClaimInfo from \"../../hooks/useClaimInfo\";\nimport useConfig from \"../../hooks/useConfig\";\nimport { mintDToken } from \"../../lib/web3js/indexV2\";\nimport Button from '../Button/Button';\nimport { eqInNumber } from '../../utils/utils';\nimport DeriNumberFormat from '../../utils/DeriNumberFormat';\n\nexport default function Claim({wallet,miningClaim,tradingClaim,lang}){\n\tconst [btnText, setBtnText] = useState(lang['connect-wallet'])\n\tconst [claimed, setClaimed] = useState(false);\n\tconst [claimInfo,claimInfoInterval] = useClaimInfo(wallet);\n\tconst [remainingTime, setRemainingTime] = useState('')\n\tconst config = useConfig(claimInfo.chainId) \n\n  //claim deri\n\tconst claim = async () => {\n\t\tif(config.name === undefined) {\n\t\t\talert(`${lang['wrong-network']}`);\n\t\t\treturn;\n\t\t}\n\t\tif(!eqInNumber(wallet.detail.chainId,claimInfo.chainId)) {\n\t\t\talert(`${lang['your-deri-is-on']} ${ config.name } ${lang['connect-to']} ${ config.name } ${lang['to-claim']}`)\n\t\t\treturn ;\n\t\t}\n\t\tif ((+claimInfo.unclaimed) === 0) {\n\t\t\talert(lang['no-deri-to-claim-yet']);\n\t\t\treturn;\n\t\t}\n\t\tlet now = parseInt(Date.now() / 1000) % (3600 * 8);\n\t\tif (now < 1800) {\n\t\t\talert(lang['claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch']);\n\t\t\treturn;\n\t\t}\n\t\tconst res = await mintDToken(wallet.detail.chainId,wallet.detail.account)\n\t\tif(res.success){\n\t\t\tclearInterval(claimInfoInterval);\n\t\t\treturn true;\n\t\t} else {\n\t\t\talert(lang['claim-failed'])\n\t\t\treturn false;\n\t\t}\n  }\n\n\tconst click = async () => {\n\t\tif(wallet.isConnected()){\n\t\t\tconst res = await claim();\n\t\t\tif(res){\n\t\t\t\tsetClaimed(true)\n\t\t\t}\n\t\t} else {\n\t\t\ttry{\n\t\t\t\tconst result =await wallet.connect();\n\t\t\t\treturn result ? true : false\n\t\t\t} catch (e){\n\t\t\t\treturn false\n\t\t\t}\n\t\t} \n\t}\n\n\n\t\n\t//初始化按钮文案和事件\n\tconst initButton = () => {\n\t\tif(wallet.isConnected()){\n\t\t\tsetBtnText(lang['claim'])\n\t\t} else {\n\t\t\tsetBtnText(lang['collect-wallet'])\n\t\t}\n\t}\n  \n  useEffect(() => {\n\t\tlet interval = null;\n\t\tif(miningClaim){\n\t\t\t//计数器\n\t\t\tinterval = window.setInterval(() => {\n\t\t\t\tlet period = 3600 * 8;\n\t\t\t\tlet current = parseInt(Date.now()/1000);\n\t\t\t\tlet epochBegin = parseInt(current / period)*period;\n\t\t\t\tlet dis = (epochBegin + period - current);\n\t\t\t\tlet h = parseInt(dis / 3600);\n\t\t\t\tlet m = parseInt((dis % 3600)/60)\n\t\t\t\tlet s = parseInt(dis % 60) \n\t\t\t\tsetRemainingTime(`${h} ${lang['h']} ${m} ${lang['m']} ${s} ${lang['s']}`);\n\t\t\t},1000);\n\t\t}    \n\n\t\tinitButton();\t\t\n    return () => {\n      interval && clearInterval(interval);\n\t\t};\n\t\t\n  }, [wallet.detail.account]);\n\n\n  return (\n    <div className='claim-box'>\n\t\t\t\t<div className='odd title'>{miningClaim ?  lang['my-liquidity-providing-harvest-in-current-epoch'] : lang['my-trading-harvest-in-current-epoch']}</div>\n\t\t\t\t{miningClaim && <div className='odd text'>\n\t\t\t\t\t\t<div className='text-title'>{lang['current-epoch-remaining-time']}</div>\n\t\t\t\t\t\t<div className='text-num'>{ remainingTime }</div>\n\t\t\t\t</div>}\t\t\t\t\n\t\t\t\t<div className='odd text'>\n\t\t\t\t\t\t{miningClaim && <div className='text-title'>{lang['my-harvest-in-current-epoch-estimated']}</div>}\n\t\t\t\t\t\t{tradingClaim && <div className='text-title'>{lang['my-trading-harvest-in-current-epoch-Est']}</div>}\n\t\t\t\t\t\t<div className='text-num'>{ miningClaim ? claimInfo.harvestDeriLp : claimInfo.harvestDeriTrade} {lang['deri']}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='odd text'>\n\t\t\t\t\t\t<div className='text-title'>{lang['claimed-deri']}</div>\n\t\t\t\t\t\t<div className='text-num'>{claimed ? ((+claimInfo.claimed) + (+claimInfo.unclaimed)).toFixed(2) : claimInfo.claimed }</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='odd text'>\n\t\t\t\t\t\t<div className='text-title'></div>\n\t\t\t\t\t\t<div className='text-num'></div>\n\t\t\t\t</div>\n\t\t\t\t<div className='odd text'>\n\t\t\t\t\t\t<div className='text-title'>{lang['unclaimed-deri']}</div>\n\t\t\t\t\t\t<div className='text-num'>{ claimed ? 0 : <DeriNumberFormat value={claimInfo.unclaimed} decimalScale={2}/>}</div>\n\t\t\t\t</div>\n\t\t\t\t{tradingClaim && \n\t\t\t\t<div className='odd text'>\n\t\t\t\t\t\t<div className='text-title'></div>\n\t\t\t\t\t\t<div className='text-num'></div>\n\t\t\t\t</div>}\n\t\t\t\t<div className='odd claim-network'>\n\t\t\t\t\t\t{miningClaim && <div className='text-title'>{lang['your-deri-is-on']} { config.name }  {lang['connect-to']} { config.name } {lang['to-claim']}</div>}\n\t\t\t\t</div>\n\t\t\t\t<div className='claim-btn'>\n\t\t\t\t\t<Button btnText={btnText} click={click} className='claim' lang={lang}/>\t\t\t\t\t\n\t\t\t\t</div>\n      </div>\n  ) \n}","import { useState, useEffect } from 'react'\nimport { getSpecification } from \"../lib/web3js/indexV2\";\n\nexport default function useSpecification({wallet,address,symbolId}){\n  const [spec, setSpec] = useState({});\n\n  const loadSpec = async () => {\n    if(wallet.isConnected() && address){\n      const spec =  await getSpecification(wallet.detail.chainId,address,symbolId);\n      setSpec(spec);\n    }\n  }\n\n  useEffect(() => {\n    loadSpec();\n    return () => {      \n    }\n  }, wallet.detail.account,address);\n\n  return spec;\n}","import React, { useState, useEffect} from 'react'\nimport {\n\tgetLiquidityInfo,getPoolInfoApy,isUnlocked,unlock,getPoolLiquidity,openConfigListCache, getWalletBalance, unlockLp, isLpUnlocked, getLpWalletBalance, getLpLiquidityInfo,getLpPoolInfoApy, bg\n} from '../../../lib/web3js/indexV2'\nimport AddLiquidity from './Dialog/AddLiquidity';\nimport RemoveLiquidity from './Dialog/RemoveLiquidity';\nimport Button from '../../Button/Button';\nimport { inject, observer } from 'mobx-react';\nimport withModal from '../../hoc/withModal';\nimport { eqInNumber, isCakeLP, isLP, isSushiLP } from '../../../utils/utils';\nimport DeriNumberFormat from '../../../utils/DeriNumberFormat';\n\nfunction Liquidity({wallet,version,chainId,baseToken,address,type,baseTokenId,symbolId,lang,loading}) {\n  const [liquidity,setLiquidity] = useState({})\n  const [bToken,setBToken] = useState(baseToken)\n\tconst isLpPool = (type === 'lp')\n\tconst loadLiquidityInfo = async () => {\n\t\tif(version === 'v2_lite_open'){\n\t\t\tawait openConfigListCache.update()\n\t\t}\n\t\tloading.loading();\n\t\tconst apyPool = await getPoolInfoApy(chainId,address,baseTokenId)\n\t\tconst pooLiquidity = await getPoolLiquidity(chainId,address,baseTokenId);\n\t\tif(wallet.isConnected() && eqInNumber(chainId , wallet.detail.chainId)){\n\t\t\tlet info = null;\n\t\t\tif(isLpPool){\n\t\t\t\tinfo = await getLpLiquidityInfo(chainId,address,wallet.detail.account)\n\t\t\t} else {\n\t\t\t\tinfo = await getLiquidityInfo(chainId,address,wallet.detail.account,baseTokenId);\n\t\t\t}\n\t\t\tlet lpApy ;\n\t\t\tif(isLP(address)){\n\t\t\t\tlet lapy = await getLpPoolInfoApy(chainId,address)\n\t\t\t\tlpApy = (+lapy.apy2) * 100;                     \t\t\t\t\t\t\n\t\t\t\t// if(!info.shareValue){\n\t\t\t\t// \tinfo.shareValue = 1; \n\t\t\t\t// }\n\t\t\t}\n\t\t\tif(info){\n\t\t\t\tconst shares = info.shares ? bg(info.shares) : bg(0)\n\t\t\t\tif(version === 'v1' || version === 'v2_lite' || version === 'v2_lite_open' || version === 'option') {\n\t\t\t\t\tconst total = shares.isNaN() ? bg(0) : shares.multipliedBy(info.shareValue) \n\t\t\t\t\tsetLiquidity({\n\t\t\t\t\t\ttotal :  info.poolLiquidity,\n\t\t\t\t\t\tapy : ((+apyPool.apy) * 100).toFixed(2),\n\t\t\t\t\t\tshareValue : info.shareValue,\n\t\t\t\t\t\tpercent : info.poolLiquidity > 0 ? total.dividedBy(info.poolLiquidity).multipliedBy(100).toFixed(2) : 0,\n\t\t\t\t\t\tshares : shares.toFixed(2),\n\t\t\t\t\t\tformatShares : shares.toFixed(2),\n\t\t\t\t\t\ttotalShares : bg(shares).toString(),\n\t\t\t\t\t\tvalues : total.toFixed(4),\n\t\t\t\t\t\tlpApy,\n\t\t\t\t\t\tunit : lang['shares'],\n\t\t\t\t\t\tsharesTitle : lang['staked-balance']\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tsetLiquidity({\n\t\t\t\t\t\ttotal : info.poolLiquidity,\n\t\t\t\t\t\tapy : ((+apyPool.apy) * 100).toFixed(2),\n\t\t\t\t\t\tpnl : (+info.pnl).toFixed(2),\n\t\t\t\t\t\tswappedPnl : (+info.swappedPnl).toFixed(2),\n\t\t\t\t\t\tshares : shares.toString(),\n\t\t\t\t\t\tformatShares : shares.toFixed(2),\n\t\t\t\t\t\ttotalShares : bg(shares).toString(),\n\t\t\t\t\t\tpercent : info.poolLiquidity > 0 ? shares.dividedBy(info.poolLiquidity).multipliedBy(100).toFixed(2) : 0,\n\t\t\t\t\t\tunit : baseToken,\n\t\t\t\t\t\tpnlToken:info.bToken0Symbol,\n\t\t\t\t\t\tsharesTitle : lang['my-Liquidity'],\n\t\t\t\t\t\tmultiplier : `${apyPool.multiplier}x`\n\t\t\t\t\t})\n\t\t\t\t}\t\n\t\t\t}\n\t\t} else {\n\t\t\t\n\t\t\tlet lpApy ;\n\t\t\tif(isLP(address)){\n\t\t\t\tlet lapy = await getLpPoolInfoApy(chainId,address)\n        \t\tlpApy = (+lapy.apy2) * 100;                           \n\t\t\t}\n\t\t\tif(pooLiquidity){\n\t\t\t\tsetLiquidity({\n\t\t\t\t\ttotal : pooLiquidity.liquidity,\n\t\t\t\t\tapy : (+apyPool.apy) * 100,\n\t\t\t\t\tlpApy\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tloading.loaded()\n\t}\n\n\tuseEffect(() => {\n\t\tloadLiquidityInfo();\n\t\t//cake 显示的baseToken 不一致，特殊处理\n\t\tif(isCakeLP(address)){\n\t\t\tsetBToken('CAKE-LP')\n\t\t}\n\t\treturn () => {}\n\t}, [wallet.detail.account,baseToken])\n\n\n  return (\n    <div className=\"liquidity-box\">\n\t\t\t{version === 'v2_lite_open' \n\t\t\t\t? <div className=\"odd title\">{lang['my-liqudity-providing']}</div> \n\t\t\t\t: <div className=\"odd title\">{lang['provide']} \n\t\t\t\t\t{isLpPool ? <a href={/DERI-USDT/.test(bToken) ? 'https://app.sushi.com/add/0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9/0xdAC17F958D2ee523a2206206994597C13D831ec7' : 'https://pancakeswap.finance/add/0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5/0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56'} target='_blank' rel='noreferrer'>\n\t\t\t\t\t{ bToken }</a> : ` ${bToken} `}\n\t\t\t\t\t {lang['earn-deri']}</div>}\n\t\t\t\t<div className=\"odd text\">\n\t\t\t\t\t\t<div className=\"text-title\">{lang['pool-total-liquidity']}</div>\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true} value={ liquidity.total} suffix={` ${ bToken}`  } thousandSeparator={true}/></div>\n\t\t\t\t</div>\n\t\t\t\t{version === 'v2' && <div className='odd text'>\n\t\t\t\t\t<div className='text-title'>{lang['multiplier']}</div>\n\t\t\t\t\t<div className='text-num multiplier' tip={lang['multiplier-tip']}>{liquidity.multiplier}</div>\n\t\t\t\t</div>\t}\n\t\t\t\t{version !== 'v2_lite_open' && <div className=\"odd text\">\n\t\t\t\t\t<div className=\"text-title\">{lang['apy']}</div>\n\t\t\t\t\t\t\t<div className='text-num' >\n\t\t\t\t\t\t\t\t<span tip={isLP(address) && lang['deri-apy']} className={`${isLP(address) && 'sushi-apy-underline'}`}>\n\t\t\t\t\t\t\t\t\t<DeriNumberFormat value={ liquidity.apy } decimalScale={2} suffix='%'/></span>\n\t\t\t\t\t\t\t\t\t{isLP(address) && liquidity.lpApy > 0 && <><span> +</span> <span className=\"sushi-apy-underline text-num\" tip={isSushiLP(address) ? lang['sushi-apy'] : lang['cake-apy']}> \n\t\t\t\t\t\t\t\t\t<DeriNumberFormat value={  liquidity.lpApy } allowZero={true}  decimalScale={2} suffix='%'/></span></>}\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</div>}\n\t\t\t\t{(version === 'v1' || version === 'v2_lite' || version === 'v2_lite_open' || version === 'option') && <div className=\"odd text\">\n\t\t\t\t\t<div className=\"text-title\">{lang['liquidity-share-value']}</div>\n\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat  allowZero={true} decimalScale={6} value={ liquidity.shareValue} suffix={ ' '+ bToken } thousandSeparator={true}/></div>\t\t\t\t\t\t\n\t\t\t\t</div>}\n\t\t\t\t<div className=\"odd text\">\n\t\t\t\t\t\t<div className=\"text-title\">{lang['my-liquidity-pencentage']}</div>\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true} value={ liquidity.percent } decimalScale={2} suffix={'%'}/></div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"odd text\">\n\t\t\t\t\t\t<div className=\"text-title\">{liquidity.sharesTitle} </div>\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true}  value={ liquidity.formatShares } decimalScale={2} /> <span>{liquidity.unit}</span> </div>\n\t\t\t\t</div>\n\t\t\t\t{version === 'v2' && <div className=\"odd text claim-network\">\n\t\t\t\t\t<div className='text-title'>{lang['mining-pnl']}</div>\n\t\t\t\t\t<div className=\"text-num\">≈ &nbsp;<DeriNumberFormat allowZero={true} prefix=' ' value={ liquidity.swappedPnl } decimalScale={2} suffix ={' '+ bToken }  /></div>\n\t\t\t\t</div>}\n\t\t\t\t{(version === 'v1' || version === 'v2_lite' || version === 'v2_lite_open' || version === 'option') && <div className=\"odd claim-network\">\n\t\t\t\t\t<div className=\"text-title money\"> ≈ <DeriNumberFormat allowZero={true}   value={liquidity.values} suffix ={' '+ bToken } decimalScale={4}/></div>\t\t\t\t\t\t\n\t\t\t\t\t{/* <div className=\"text-title money\"> {liquidity.values ? (+liquidity.values).toFixed(2) : '--'}</div>\t\t\t\t\t\t */}\n\t\t\t\t</div>}\n\t\t\t\t<Operator version={version} wallet={wallet} chainId={chainId} address={address} liqInfo={liquidity} baseToken={bToken} isLpPool={isLpPool} loadLiqidityInfo={loadLiquidityInfo} symbolId={symbolId} baseTokenId={baseTokenId} lang={lang}/>\n\t</div>\n  )\n}\n\n\nconst AddDialog = withModal(AddLiquidity)\nconst RemoveDialog = withModal(RemoveLiquidity)\n\n//操作区\nconst Operator = ({version,wallet,chainId,address,baseToken,isLpPool,liqInfo,loadLiqidityInfo,baseTokenId,symbolId,lang})=> {\n\tconst [isApproved,setIsApproved] = useState(false)\n\tconst [btnType, setBtnType] = useState('add')\n\tconst [isOpen, setIsOpen] = useState(false)\n\tconst [balance, setBalance] = useState('');\n\tconst [buttonElment, setButtonElment] = useState(null);\n\t\n\n  const loadBalance = async () => {\n    if(wallet.isConnected() && eqInNumber(wallet.detail.chainId,chainId)){\n\t\t\tlet total = null;\n\t\t\tif(version === 'v2_lite_open'){\n\t\t\t\tawait openConfigListCache.update()\n\t\t\t}\n\t\t\tif(isLpPool){\n\t\t\t\ttotal = await getLpWalletBalance(wallet.detail.chainId,address,wallet.detail.account);\n\t\t\t} else {\n\t\t\t\ttotal = await getWalletBalance(wallet.detail.chainId,address,wallet.detail.account,baseTokenId);\n\t\t\t}\n\t\t\tif(typeof total !== 'object'){\n\t\t\t\tsetBalance(total)\t\t\t\t\n\t\t\t}\n    }\n  }\n\n  useEffect(() => {\n\t\tloadBalance();\n\t\tloadLiqidityInfo();\n    return () => {}\n  }, [wallet.detail.account])\n\n\n\tconst isApprove = async () => {\n\t\tif(version === 'v2_lite_open'){\n\t\t\tawait openConfigListCache.update()\n\t\t}\n\t\tif(isLpPool){\n\t\t\tconst result = await isLpUnlocked(chainId,address,wallet.detail.account) \t\t\t \n\t\t\tsetIsApproved(result);\n\t\t\treturn result;\n\t\t} else {\n\t\t\tconst result = await isUnlocked(chainId,address,wallet.detail.account,baseTokenId) \t\t\t \n\t\t\tsetIsApproved(result);\n\t\t\treturn result;\n\t\t}\n\t}\n\t\n\n\n\tconst approve = async () => {\n\t\tlet res = null;\n\t\tif(isLpPool){\n\t\t\tres = await unlockLp(chainId,address,wallet.detail.account);\n\t\t} else {\n\t\t\tres = await unlock(chainId,address,wallet.detail.account,baseTokenId);\n\t\t}\t\t\n\t\tif(res && res.success){\n\t\t\tsetIsApproved(true)\n\t\t} else {\n\t\t\talert(res.error ?  res.error.message || lang['approve-failed'] : lang['approve-failed'])\n\t\t}\n  }\n\n\n\tconst connect =  async () => {\n\t\ttry {\n\t\t\tconst result = await wallet.connect();\n\t\t\treturn result ? true : false\n\t\t} catch (e){\n\t\t\treturn false\n\t\t}\n\t}\n\t\n\tconst addLiquidity = () => {\n\t\tsetIsOpen(true);\n\t\tsetBtnType('add')\n\t}\n\n\tconst afterClick = () => {\n\t\tsetIsOpen(false);\n\t\t// loadLiquidity()\n\t\tloadBalance();\n\t\tloadLiqidityInfo();\n\t\twallet.refresh()\n\t}\n\n\tconst removeLiquidity = () => {\n\t\tsetIsOpen(true);\n\t\tsetBtnType('remove')\n\t}\n\n\n  \n  useEffect(() => {\n\t\t// todo 判断网络\n    if(wallet.isConnected() && eqInNumber(wallet.detail.chainId, chainId)){\n\t\t\tisApprove()\n    }\n\t\treturn () => {}\n\t}, [wallet.detail.account])\n\n\tuseEffect(() => {\t\t\n\t\tif(wallet.isConnected() && eqInNumber(wallet.detail.chainId,chainId) && isApproved){\n\t\t\tsetButtonElment((<div className=\"add-remove-liquidity\">\n\t\t\t<button \n\t\t\t\t\tclassName=\"add-liquidity\"\n\t\t\t\t\tonClick={addLiquidity}>\n\t\t\t\t\t{lang['add-liquidity']}\n\t\t\t</button>\n\t\t\t<button className=\"remove-liquidity\" onClick={removeLiquidity}>\n\t\t\t\t\t{lang['remove-liquidity']}\n\t\t\t</button>\n\t\t</div>))\n\t\t} else {\n\t\t\tlet el = null\n\t\t\tif(!wallet.isConnected()){\n\t\t\t\tel = <div className='approve'><Button className='approve-btn' click={connect} btnText={lang['connect-wallet']} lang={lang}></Button></div>\n\t\t\t} else if(!eqInNumber(wallet.detail.chainId,chainId)) {\n\t\t\t\twallet.switchNetwork({id: chainId})\n\t\t\t\tel = <div className=\"approve\" ><Button className='approve-btn wrong-network' btnText={lang['wrong-network']}  lang={lang} click={() => wallet.switchNetwork({id : chainId})} ></Button></div>\t\t\t\t\n\t\t\t} else if(!isApproved) {\n\t\t\t\tel = <div className='approve'><Button className='approve-btn' click={approve} btnText={lang['approve']} lang={lang}></Button></div>\n\t\t\t} \n\t\t\tsetButtonElment(el)\n\t\t}\n\t\t\t\n\t\treturn () => {};\n\t}, [wallet.detail.account,isApproved]);\n\n  return (\n    <div className=\"liquidity-btn\">\n\t\t\t{\n\t\t\t\tbtnType === 'add' \n\t\t\t\t? <AddDialog  modalIsOpen={isOpen} isLpPool={isLpPool} onClose={afterClick} balance={balance}\n\t\t\t\t\t\t\t\t\t\t  address={address} wallet={wallet} baseToken={baseToken} afterAdd={afterClick} baseTokenId={baseTokenId}  symbolId={symbolId} lang={lang}/> \n\t\t\t\t: <RemoveDialog  modalIsOpen={isOpen} isLpPool={isLpPool} onClose={afterClick} liqInfo={liqInfo}  \n\t\t\t\t\t\t\t\t\t\t\taddress={address} wallet={wallet} version={version} unit={version === 'v1' || version === 'v2_lite' || version === 'option' ? lang['shares'] :baseToken} afterRemove={afterClick} baseTokenId={baseTokenId} symbolId={symbolId} lang={lang}/>\n\t\t\t}\t\t\t\n\t\t\t{buttonElment}\n  </div>\n  )\n}\n\nexport default inject('wallet','loading')(observer(Liquidity))","import React, { useState ,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport Button from '../../../Button/Button';\nimport Modal from 'react-modal'\nimport { addLiquidity, getWalletBalance, bg, addLpLiquidity } from '../../../../lib/web3js/indexV2';\nimport useSpecification from '../../../../hooks/useSpecification';\nimport useDisableScroll from '../../../../hooks/useDisableScroll';\nimport DeriNumberFormat from '../../../../utils/DeriNumberFormat';\n\n\n\nexport default function AddLiquidity({wallet,address,baseToken,onClose,afterAdd,balance,isLpPool,baseTokenId,symbolId,lang}){\n  const [amount, setAmount] = useState('0');\n  const [decimal, setDecimal] = useState('00');\n  const [addValue, setAddValue] = useState('')\n  const spec = useSpecification({wallet,address,symbolId});\n  useDisableScroll();\n\n\n  const input = (e) => {\n    const {value} =e.target\n    setAddValue(value)\n  }\n\n  const addAll = () => {\n    setAddValue(balance);\n  }\n\n  const addLiq = async () => {\n    const max = bg(balance)\n    const cur = bg(addValue);\n    if(cur.gt(max)) {\n      alert(lang['not-sufficient-funds']);\n      return false;\n    }\n    if(spec && (+addValue) < (+spec.minAddLiquidity)) {\n      alert(`${lang['the-input-liquidity-shall-not-be-less-than']} ${spec.minAddLiquidity}`);\n      return false;\n    }\n    if(addValue <=0 || isNaN(addValue)){\n      alert(lang['it-has-to-be-greater-than-zero']);\n      return false;\n    }\n    let res =  null;\n    if(isLpPool){\n      res = await addLpLiquidity(wallet.detail.chainId,address,wallet.detail.account,addValue);\n    } else{\n      res = await addLiquidity(wallet.detail.chainId,address,wallet.detail.account,addValue,baseTokenId)\n    }\n    \n    if (!res ||  !res.success) {\n      alert(lang['failure-of-transaction']);\n    }\n    return true;\n  }\n\n  useEffect(() => {    \n    const amount = (+balance).toFixed(2)\n    const decimal = amount.substring(amount.indexOf('.') + 1,amount.length)\n    setAmount(amount);\n    setDecimal(decimal)\n    return () => {};\n  }, [balance]);\n\n\n  return(\n    <div className='modal-dialog'>\n        <div className='modal-content'>\n          <div className='modal-header'>\n            <div className='title'>{lang['add-liquidity']}</div>\n            <div className='close' onClick={onClose}>\n              <span>&times;</span>\n            </div>\n          </div>\n          <div className='modal-body'>\n            <div className='margin-box-info'>\n              <div>{lang['wallet-balance']}</div>\n              <div className='money'>\n                <span> \n                  <span className='bt-balance'>\n                    <NumberFormat displayType='text' value ={amount } thousandSeparator={true} allowZero={true} decimalScale={0}/>.\n                    <span className='float'><NumberFormat displayType='text' value ={decimal} thousandSeparator={true} decimalScale={2} allowZero={true}/></span>\n                  </span> \n                    <div className='base-token'>{ baseToken }</div> \n                  </span>\n                <span className='add'></span>\n              </div>\n              <div className='enter-margin'>\n                <div className='input-margin'>\n                  <div className='box'>\n                    <div className='amount' style={{display : addValue ? 'block' : 'none'}}>{lang['liquidity']}</div>\n                    <input\n                      type='number'\n                      className='margin-value'\n                      placeholder={lang['liquidity']}\n                      value={addValue}\n                      onChange={input}\n                    />\n                  </div>\n                </div>\n                <div>{ baseToken }</div>\n              </div>\n              <div className='max'>\n                {lang['max']}: <span className='max-num'><DeriNumberFormat value={balance} decimalScale={8}/></span>\n                <span className='max-btn-left' onClick={addAll}>{lang['add-all']}</span>\n              </div>\n              <div className='add-margin-btn'>\n                <Button className='margin-btn' click={addLiq} btnText={lang['add']} afterClick={afterAdd} lang={lang}/>\n              </div>\n            </div>\n          </div>    \n        </div>\n      </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport { removeLiquidity, bg, removeLpLiquidity } from '../../../../lib/web3js/indexV2';\nimport Button from '../../../Button/Button';\nimport useDisableScroll from '../../../../hooks/useDisableScroll';\nimport DeriNumberFormat from '../../../../utils/DeriNumberFormat';\n\nexport default function RemoveLiquidity({wallet,address,liqInfo,onClose,afterRemove,isLpPool,baseTokenId,unit,lang,version}){  \n  const [amount, setAmount] = useState('');\n  const [balance, setBalance] = useState('0');\n  const [decimal, setDecimal] = useState('00');\n  useDisableScroll();\n\n\n  const addAll = () => {\n    setAmount(liqInfo.totalShares)\n  }\n\n  const onChange = e => {\n    const {value} = e.target;\n    setAmount(value)\n  }\n\n  const remove = async () => {\n    const max = bg(liqInfo.totalShares);\n    const cur = bg(amount);\n    if (cur.gt(max)) {\n      alert(`${lang['your-current-max-removable-shares-are']}  ${liqInfo.totalShares}`);\n      return false;\n    }\n    if(!isLpPool && version === 'v1'){\n      const balance = (+liqInfo.totalShares) - (+amount)\n      if (balance < 1 && balance > 0) {\n        alert(lang['staking-max-limit-tip']);\n        return false;\n      }\n    }\n    if (+amount <= 0 || isNaN(amount)) {\n      alert(lang['invalid-liquidity']);\n      return false;\n    }\n    let res = null;\n    if(isLpPool){\n      res = await removeLpLiquidity(wallet.detail.chainId,address,wallet.detail.account,amount);\n    } else {\n      res = await removeLiquidity(wallet.detail.chainId,address,wallet.detail.account,amount,baseTokenId,max.eq(cur));\n    }\n    \n    if(!res || !res.success){\n      alert(lang['failure-of-transaction']);\n      return false; \n    }\n    return true;\n  }\n\n\n  useEffect(() => {    \n    if(liqInfo && liqInfo.formatShares){\n      const balance = liqInfo.formatShares;\n      const decimal = balance.substring(balance.indexOf('.') +1 ,balance.indexOf('.') + 3)\n      setBalance(balance);\n      setDecimal(decimal)\n    }\n    return () => {};\n  }, [liqInfo.totalShares]);\n\n  \n  \n  return(\n    <div className='modal-dialog'>\n        <div className='modal-content'>\n          <div className='modal-header'>\n            <div className='title'>{lang['remove-liquidity']}</div>\n            <div className='close' data-dismiss='modal' onClick={onClose}>\n              <span>&times;</span>\n            </div>\n          </div>\n          <div className='modal-body'>          \n            <div className='margin-box-info'>\n              <div> {version === 'v1' || version === 'v2_lite'  || version === 'v2_lite_open' ? lang['shares-available'] : lang['liquidity-available']}</div>\n              <div className='money'>\n                <span>\n                  <span className='bt-balance'>\n                    <NumberFormat displayType='text' value ={balance} decimalScale={0} thousandSeparator={true}/>.\n                    <span className='float'>{decimal}</span>\n                  </span>\n                    </span>\n                <span className='remove'></span>\n              </div>\n              <div className='enter-margin'>\n                <div className='input-margin'>\n                  <div className='box'>\n                    <div className='amount' style={{display : amount ? 'block' : 'none'}}>\n                      {version === 'v1' || version === 'v2_lite'  || version === 'v2_lite_open'  ? lang['liquidity-shares'] : lang['liquidity']}\n                    </div>\n                    <input\n                      type='number'\n                      className='margin-value'\n                      placeholder={version === 'v1' || version === 'v2_lite'  || version === 'v2_lite_open'  ? lang['liquidity-shares'] : lang['liquidity']}\n                      value={amount}\n                      onChange={onChange}\n                    />\n                  </div>\n                </div>\n                <div>\n                 {version === 'v2' ? unit : lang['shares']}\n                </div>\n              </div>\n              <div className='max'>\n                <span>{lang['max-removeable']}</span>\n                <span className='max-num'><DeriNumberFormat value={liqInfo.totalShares} decimalScale={8}/></span>\n                <span className='max-btn-left' onClick={addAll}>{lang['remove-all']}</span>\n              </div>\n              <div className='add-margin-btn'>\n                <Button click={remove} className='margin-btn' btnText={lang['remove']} afterClick={afterRemove} lang={lang}/>\n              </div>\n            </div>\n          </div>    \n        </div>\n      </div>\n      )\n}","import Claim from '../../Claim/Claim';\nimport Liquidity from './Liquidity';\n\n\nfunction LiquidityMining(props){\n  return (\n    <div className=\"liquidity-info\">\n      {props.version !== 'v2_lite_open' &&<Claim {...props} miningClaim={true}/>}\n      <Liquidity {...props}/>\n  </div>)\n}\n\nexport default LiquidityMining","import { useState, useEffect } from 'react'\nimport {Link} from 'react-router-dom'\nimport { getUserInfoAll,getUserInfoInPool ,getPoolInfoApy} from '../../../lib/web3js/indexV2';\nimport { useHistory } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nimport { storeConfig, eqInNumber } from '../../../utils/utils';\nimport Config from '../../../model/Config';\n\nconst configInfo = new Config();\n\n\nfunction Liquidity({wallet = {},version,chainId,address,symbolId,lang}) {\n  const [userInfoInPool,setUserInfoInPool] = useState({})\n  const [tradeSummary, setTradeSummary] = useState({});\n  const history = useHistory();\n\n\tconst loadUserInfoInPool = async () => {\n\t\tconst userInfo = await getUserInfoAll(wallet.account);\n\t\tconst userInfoPool = await getUserInfoInPool(chainId,address,wallet.account);\n\t\tconst harvestDeriTrade = (+userInfo.trade).toFixed(2);\n\t\tconst myTradingVolumeCurrent = userInfoPool.volume1h\n\t\tsetUserInfoInPool({harvestDeriTrade,myTradingVolumeCurrent})\n\t}\n\n\tconst getTradeInfo = async () => {\n\t\tconst poolInfo = await getPoolInfoApy(chainId,address);\n\t\tconst totalTradingVolumeCurrent = poolInfo.volume1h\n\t\tsetTradeSummary({totalTradingVolumeCurrent})\n  }\n  \n  const toTrade = () => {\n    const configs = configInfo.load(version);\n    const config = version.isV1 ? configs.find(c => eqInNumber(c.pool,address)) : configs.find(c => eqInNumber(c.pool,address) && c.symbolId === symbolId)\n    storeConfig(version.current,config)\n    history.push('/lite')\n  }\n\n\tuseEffect(() => {\n\t\tif(wallet && wallet.account){\n\t\t\tloadUserInfoInPool();\n\t\t\tgetTradeInfo();\n\t\t}\n\t\treturn () => {};\n\t}, []);\n\n  return(\n    <div className=\"liquidity-box\">\n      <div className=\"odd title\">{lang['trade-to-earn-deri']}</div>\n        <div className=\"odd text\">\n            <div className=\"text-title\">{lang['total-trading-volume-in-current-hour']}</div>\n            <div className=\"text-num\">{ tradeSummary.totalTradingVolumeCurrent || 0}</div>\n        </div>\n        <div className=\"odd text\">\n            <div className=\"text-title\">{lang['my-trading-volume-in-current-hour']}</div>\n            <div className=\"text-num\">{ userInfoInPool.myTradingVolumeCurrent || 0 }</div>\n        </div>\n        <div className=\"odd text\">\n            <div className=\"text-title\"></div>\n            <div className=\"text-num\"></div>\n        </div>\n        <div className=\"odd text\">\n            <div className=\"text-title\"></div>\n            <div className=\"text-num\"></div>\n        </div>\n        <div className=\"odd text\">\n            <div className=\"text-title\"></div>\n            <div className=\"text-num\"></div>\n        </div>\n        <div className=\"odd claim-network\">\n              \n        </div>\n        <div className=\"claim-btn\">\n            <button className=\"claim\" onClick={toTrade}>\n              {lang['trade']}\n            </button>\n        </div>\n    </div> \n  )\n}\nexport default inject('version')(observer(Liquidity))","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","import {useState,useRef,useEffect} from 'react';\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\n  const [isApproved, setIsApproved] = useState(true);\n  const [pending, setPending] = useState(false);\n  const [buttonText, setbuttonText] = useState(btnText)\n  const loadRef = useRef(null)\n\n  const onClick = async () => {\n    if(status !== 'enabled') {\n      return ;\n    }\n    beforeAction()\n    const result = await click();    \n    if(result){\n      afterClick && afterClick()\n    } \n    afterAction()\n  }\n\n  const beforeAction = ()  => {\n    setStatus('disabled')\n    setPending(true);\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\n  }\n\n  const afterAction = () => {\n    loadRef.current && (loadRef.current.style.display = 'none')\n    setStatus('enabled')\n    setPending(false);\n  }\n\n  const loadApproveStatus = async () => {\n    if(checkApprove && wallet && wallet.detail.account){\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\n      setIsApproved(res);\n    }\n  }\n  const approve = async () => {\n    beforeAction();\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\n    if(res.success){\n      setIsApproved(true);\n    } else {\n      setIsApproved(false)\n      alert(lang['approve-failed'])\n    }\n    afterAction();\n  }\n\n  const action = () => {\n    if(isApproved){\n      onClick();\n    } else {\n      approve();\n    }\n  }\n\n  useEffect(() => {\n    loadApproveStatus();\n    return () => {};\n  }, [wallet,spec,checkApprove]);\n\n  useEffect(() => {\n    if(btnText){\n      setbuttonText(btnText)\n    }\n    return () => {\n    }\n  }, [btnText])\n\n  return(\n    <button className={className} onClick={action} >\n        <span className='btn-loading-wrap'>\n          <span ref={loadRef}\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : 'none' ,marginRight : '2'}}>\n          </span>\n        </span>\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\n        </button>\n  )\n}","import React,{useState,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport { inject, observer } from 'mobx-react';\n\nfunction DeriNumberFormat(props){\n  const [renderablity, setRenderablity] = useState(<span className='loading-line'></span>);\n\n  const isValidate = () => {\n    const {allowZero} = props \n    return (typeof props.value !== 'object' && props.value !== undefined && props.value !== '' && props.value !== 'NaN') \n          || ((isNaN(props.value) && Math.abs(props.value)) === 0 && allowZero === true )\n  }\n\n  useEffect(() => {\n    const {allowZero,wallet,defaultValue = '--',...others} = props \n    if(isValidate()) {\n      setRenderablity(<NumberFormat {...others}  displayType = 'text'  fixedDecimalScale={true} />)\n    } else {\n      setRenderablity(<span className='loading-line'></span>)\n    } \n    const timeout = window.setTimeout(() => {\n      if(!isValidate() && wallet && !wallet.isConnected()){\n        setRenderablity(defaultValue)\n      }\n    },30000)\n    return () => {\n      clearTimeout(timeout)\n    };\n  }, [props.value]);\n\n  return renderablity;\n}\n\nexport default inject('wallet','trading')(observer(DeriNumberFormat))","import { useEffect } from 'react'\n\nexport default function useDisableScroll(nested) {\n  \n  useEffect(() => {\n    // window.scrollTo(0, 0);\n    document.querySelector('body').style.overflow = 'hidden'\n    return () => {\n      if(!nested){\n        document.querySelector('body').style.overflow = 'auto'\n      }\n    };\n  }, []);\n  return null;\n}\n","import { useState, useEffect } from 'react'\nimport { getUserInfoAll ,deriToNatural} from '../lib/web3js/indexV2';\n\n\nexport default function useClaimInfo(wallet){\n  const [claimInfo, setClaimInfo] = useState({});\n  let interval = null;\n\n  const loadClaimInfo =  async () => {\n    if(wallet.isConnected()){\n      const claimInfo  = await getUserInfoAll(wallet.detail.account);\n      const claimed = (+claimInfo.total).toFixed(2);\n      const unclaimed = claimInfo.valid ? (+claimInfo.amount).toFixed(2) : 0;\n      const harvestDeriLp = (+claimInfo.lp).toFixed(2);\n      const harvestDeriTrade = (+claimInfo.trade).toFixed(2);\n      const chainId = claimInfo.chainId\n      setClaimInfo({claimed,unclaimed,harvestDeriLp,harvestDeriTrade,chainId})\n    }\n  }\n\n  useEffect(() => {\n    interval = window.setInterval(loadClaimInfo,1000 * 60 *3);\n      loadClaimInfo();\n    return () => clearInterval(interval);\n  }, [wallet.detail.account])\n  return [claimInfo,interval];\n}"],"sourceRoot":""}