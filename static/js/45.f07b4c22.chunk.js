(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[45],{1420:function(e,t,a){},1459:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var n=a(896),s=(a(1420),a(28));function c({lang:e}){return Object(s.jsx)(n.a,{lang:e})}},665:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),s=a(28);function c({btnText:e,className:t,disabled:a,click:c,afterClick:r,checkApprove:i,wallet:l,spec:d,lang:o}){const[b,u]=Object(n.useState)(a?"disabled":"enabled"),[p,j]=Object(n.useState)(!0),[f,O]=Object(n.useState)(!1),[v,h]=Object(n.useState)(e),k=Object(n.useRef)(null),x=()=>{u("disabled"),O(!0),k.current&&(k.current.style.display="inline-block")},g=()=>{k.current&&(k.current.style.display="none"),u("enabled"),O(!1)};return Object(n.useEffect)((()=>((async()=>{if(i&&l&&l.detail.account){const e=await l.isApproved(d.pool,d.bTokenId);j(e)}})(),()=>{})),[l,d,i]),Object(n.useEffect)((()=>(e&&h(e),()=>{})),[e]),Object(s.jsxs)("button",{className:t,onClick:()=>{p?(async()=>{if("enabled"!==b)return;x(),await c()&&r&&r(),g()})():(async()=>{x(),(await l.approve(d.pool,d.bTokenId)).success?j(!0):(j(!1),alert(o["approve-failed"])),g()})()},children:[Object(s.jsx)("span",{className:"btn-loading-wrap",children:Object(s.jsx)("span",{ref:k,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),f?o.pending:p?v:o.approve]})}},896:function(e,t,a){"use strict";var n=a(9),s=a(70),c=a(665),r=a(12),i=a(28);t.a=Object(s.b)("wallet")(Object(s.c)((function({wallet:e={},lang:t}){const[a,s]=Object(n.useState)(),[l,d]=Object(n.useState)(!0);return Object(n.useEffect)((()=>{(async()=>{let t=`/broker/${e.detail.account}/get_broker`,a=await Object(r.n)(t);a.data&&a.data.length?(d(!0),s(a.data[0].broker_address)):d(!1)})()}),[e.detail]),Object(i.jsxs)("div",{className:"broker-bind",children:[Object(i.jsx)("div",{className:"header",children:t["brokers-address"]}),Object(i.jsxs)("div",{className:"bind-input",children:[Object(i.jsx)("div",{className:"address",children:Object(i.jsx)("input",{className:"address-input",type:"text",placeholder:t.address,value:a,onChange:e=>(e=>{let{value:t}=e.target;s(t)})(e)})}),Object(i.jsx)("div",{className:"bind-button",children:Object(i.jsx)(c.a,{className:"btn",btnText:t.bind,lang:t,click:async()=>{if(e&&e.detail&&e.detail.account){if(void 0===a)return void alert(t["please-enter-address"]);let n=a.toLocaleLowerCase();if(42!==n.length||0!==n.indexOf("0x"))return void alert(t["please-enter-a-correct-address"]);if(n===e.detail.account)return void alert(t["brokder-addr-cannot-be-the-same-as-trader"]);if(l)return void alert(t["cannot-bind-twice"]);let s=await Object(r.ub)(e.detail.chainId,e.detail.account,a);console.log(s),s.success||alert(t["bind-faild"]),s.success&&d(!0)}}})})]})]})})))}}]);
//# sourceMappingURL=45.f07b4c22.chunk.js.map